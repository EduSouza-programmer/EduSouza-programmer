/*! For license information please see pixel.js.LICENSE.txt */
(()=>{var t,e,r={851:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return(e=function(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(){"use strict";l=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,a=Object.create(o.prototype),c=new A(n||[]);return i(a,"_invoke",{value:S(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var v="suspendedStart",d="suspendedYield",y="executing",m="completed",g={};function w(){}function b(){}function x(){}var I={};f(I,c,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(T([])));_&&_!==r&&o.call(_,c)&&(I=_);var E=x.prototype=w.prototype=Object.create(I);function O(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,u)}))}u(s.arg)}var a;i(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function S(e,r,n){var o=v;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=h(e,r,n);if("normal"===s.type){if(o=n.done?m:d,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(o.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=x,i(E,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(L.prototype),f(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(p(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),f(E,s,"Generator"),f(E,c,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function f(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){f(i,n,o,a,c,"next",t)}function c(t){f(i,n,o,a,c,"throw",t)}a(void 0)}))}}var h=r(273),v=r(374).getFieldData,d=r(389),y=r(203),m=y.EXPERIMENTAL_FEATURES,g=y.executeFeature,w=function(t){var e,r=d.getItem("synced_at"),n=Date.now();if(void 0!==t?!0===t:!0===(null===(e=window.vector)||void 0===e?void 0:e.forceIdentityWaterfall))return!0;if(!r)return!0;var o=parseInt(r,10);return!!isNaN(o)||n-o>2592e6},b=null,x=function(){var t=p(l().mark((function t(){var e,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!b){t.next=2;break}return t.abrupt("return",b);case 2:return e=new h("https://api.vector.co"),t.prev=3,t.next=6,e.get("/pixel/ip-info");case 6:return r=t.sent,b=r,t.abrupt("return",r);case 11:return t.prev=11,t.t0=t.catch(3),t.t0 instanceof TypeError||console.error("Error fetching IP info:",t.t0),t.abrupt("return",{ipInfo:{},isCloudProvider:!1});case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}(),I=function(){var t=p(l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:return e=t.sent,t.abrupt("return",e.ipInfo||{});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=p(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:return r=t.sent,t.abrupt("return",r.isCloudProvider||!1);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=p(l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:return e=t.sent,t.abrupt("return",{ipInfo:e.ipInfo||{},isCloudProvider:e.isCloudProvider||!1});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=function(t){try{var e="; ".concat(document.cookie).split("; ".concat(t,"="));if(2===e.length)return!!e.pop().split(";").shift()}catch(t){}return!1},O=function(t){try{var e="; ".concat(document.cookie).split("; ".concat(t,"="));if(2===e.length){var r=e.pop().split(";").shift();if(r)return r}}catch(t){}return d.getItem(t)},L=function(){try{if(window.crypto&&"function"==typeof window.crypto.randomUUID)return window.crypto.randomUUID()}catch(t){}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},S=function(t){var e=null;if(t?(E("vector_visitor_id")&&(e=O("vector_visitor_id")),e||(e=d.getItem("visitor_id"))):e=d.getItem("visitor_id"),!e){var r=function(){try{var t=localStorage.getItem("vector_visitor_id");if(t)return t}catch(t){}return null}();r&&(e=r,function(t){if(t)try{d.setItem("visitor_id",t),localStorage.removeItem("vector_visitor_id")}catch(t){}}(r))}return e},P=function(){var t=p(l().mark((function t(e,r){var n,o,i,a,c,u,s,f,p,v,y,m,g,b,x;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new h("https://api.vector.co"),t.next=3,n.get("/pixel/".concat(e,"/settings"));case 3:if(!(o=t.sent).tartarus){t.next=7;break}return console.error("Load failed, error in settings"),t.abrupt("return",null);case 7:if(i={formListeningState:o.pixelFormListening||"us_only",forceIdentityWaterfall:o.pixelForceIdentityWaterfall||!1,useCerebroWaterfall:o.pixelUseCerebroWaterfall||!1,pixelMode:"multi"===o.pixelMode?"multi":"original"},a=function(t,e,r){var n=new Date(Date.now()+864e5*r).toUTCString(),o=window.location.hostname.split("."),i=o.length>2?o.slice(-2).join("."):window.location.hostname;document.cookie="".concat(t,"=").concat(encodeURIComponent(e),"; expires=").concat(n,"; path=/; domain=.").concat(i,"; SameSite=None; Secure")},c=function(){if(o.pixelCookieFallback){var t=window.location.hostname.split("."),e=t.length>2?t.slice(-2).join("."):window.location.hostname;document.cookie="vector_visitor_id=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.".concat(e,"; SameSite=None; Secure")}d.removeItem("visitor_id"),d.removeItem("visitor_uuid")},window.vector.formListeningState=i.formListeningState,window.vector.forceIdentityWaterfall=i.forceIdentityWaterfall,window.vector.useCerebroWaterfall=i.useCerebroWaterfall,window.vector.pixelMode=i.pixelMode,s="multi"===i.pixelMode,f=!0===i.forceIdentityWaterfall,p="true"===d.getItem("vector_force_rewaterfalled_".concat(e)),!f||p?(u=S(o.pixelCookieFallback))&&o.pixelCookieFallback&&!E("vector_visitor_id")&&a("vector_visitor_id",u,3650):d.setItem("vector_force_rewaterfalled_".concat(e),"true"),!u){t.next=27;break}if(!w(i.forceIdentityWaterfall)){t.next=24;break}c(),u=null,t.next=27;break;case 24:if(s){t.next=27;break}return window.vector.emit("visitor.id.found",{vectorVisitorId:u}),t.abrupt("return",{visitorId:u,settings:i,wasNewlyCreated:!1});case 27:if(!s){t.next=58;break}if(v=d.getItem("visitor_uuid"),y=v?"visitor_uuid (namespaced)":null,!v&&u&&(v=u,d.setItem("visitor_uuid",u),y="visitor_id (from earlier read)"),!v||"newly_generated"===y){t.next=34;break}return window.vector.emit("visitor.id.found",{vectorVisitorId:v}),t.abrupt("return",{visitorId:v,settings:i,wasNewlyCreated:!1});case 34:if(v||(v=L(),y="newly_generated"),"newly_generated"!==y){t.next=56;break}return g={visitorUuid:v,ipInfo:r,partnerId:window.vector.partnerId,url:window.location.href,title:document.title,referrer:document.referrer,userAgent:window.vector.userAgent||(null===(m=navigator)||void 0===m?void 0:m.userAgent)||"Unknown"},t.prev=37,t.next=40,n.post("/pixel/".concat(e,"/new-visitor"),g);case 40:return b=t.sent,o.pixelCookieFallback&&a("vector_visitor_id",b.visitor.uuid,3650),d.setItem("visitor_uuid",b.visitor.uuid),d.setItem("visitor_id",b.visitor.uuid),window.vector.emit("visitor.id.created",{vectorVisitorId:b.visitor.uuid}),t.abrupt("return",{visitorId:b.visitor.uuid,settings:i,wasNewlyCreated:!0});case 48:t.prev=48,t.t0=t.catch(37),console.error("Error creating visitor via new-visitor endpoint, falling back to legacy visitor flow",t.t0),c(),i.pixelMode="original",window.vector.pixelMode="original";case 54:t.next=58;break;case 56:return console.warn("[Vector] Unexpected state in multi mode: visitorUuid exists (".concat(v,") but uuidSource is ").concat(y)),t.abrupt("return",{visitorId:v,settings:i,wasNewlyCreated:!1});case 58:return t.next=60,n.post("/pixel/".concat(e,"/visitor"),{ipInfo:r,partnerId:window.vector.partnerId});case 60:return x=t.sent,o.pixelCookieFallback?(a("vector_visitor_id",x.uuid,3650),d.setItem("visitor_id",x.uuid)):d.setItem("visitor_id",x.uuid),window.vector.emit("visitor.id.created",{vectorVisitorId:x.uuid}),t.abrupt("return",{visitorId:x.uuid,settings:i,wasNewlyCreated:!0});case 64:case"end":return t.stop()}}),t,null,[[37,48]])})));return function(e,r){return t.apply(this,arguments)}}(),j=function(){var t=p(l().mark((function t(e,r,n,o){var i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new h("https://api.vector.co"),t.next=3,i.post("/pixel/".concat(e,"/visitor-activity"),{visitorId:r,url:window.location.href,title:document.title,referrer:document.referrer,ipInfo:n,userAgent:o});case 3:case"end":return t.stop()}}),t)})));return function(e,r,n,o){return t.apply(this,arguments)}}(),N=function(){var t=p(l().mark((function t(e,r,n,o){var i,a,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("Pixel ID is required");case 2:if(r){t.next=4;break}throw new Error("Visitor ID is required");case 4:return i=new h("https://api.vector.co"),a=O("hubspotutk"),c=u(u({},o),{},{hubspotutk:a}),n&&(c.external_id=n),window.vector.partnerId&&(c.partner_id=window.vector.partnerId),t.next=11,i.put("/pixel/".concat(e,"/visitor/").concat(r),c);case 11:case"end":return t.stop()}}),t)})));return function(e,r,n,o){return t.apply(this,arguments)}}(),A=function(){var t=p(l().mark((function t(e,r,n){var o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new h("https://api.vector.co"),t.next=3,o.post("/pixel/".concat(e,"/visitor/").concat(r,"/cerebro"),{sha256:n,partnerId:window.vector.partnerId,hubspotutk:O("hubspotutk")});case 3:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),T=function(){var t=p(l().mark((function t(e,r,n){var o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new h("https://api.vector.co"),t.next=3,o.put("/pixel/".concat(e,"/visitor/").concat(r,"/consent"),n);case 3:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),C=function(t,e){var r=document.createElement("script");r.src="https://a.usbrowserspeed.com/cs?pid=b910e4cfe0d26c8f65884d90d71e4eb6628b4c8f3747dbae6c22ea24efcb8d5e&puid=".concat(t,"|").concat(e),r.type="text/javascript",document.head.appendChild(r)},F=function(){var t=p(l().mark((function t(e,r){var n=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w(n.length>2&&void 0!==n[2]&&n[2])){t.next=6;break}return d.setItem("synced_at",Date.now().toString()),C(e,r),t.next=6,M(e,r);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),D=function(){var t=p(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new h("https://api.vector.co"),t.next=3,r.post("/pixel/li",{domain:window.location.hostname.split(".").slice(-2).join("."),pixelId:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),W=function(){var t=p(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){window.liQd_did_006l=window.liQd_did_006l||[];var r=document.createElement("script");r.src="https://d-code.liadm.com/did-006l.min.js",r.onload=function(){window.liQd_did_006l.resolve(function(){var r=p(l().mark((function r(n){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n?t(n):e(new Error("No result from LI"));case 1:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}(),(function(t){e(new Error(t))}),{resolve:["sha2"]})},r.onerror=function(t){e(new Error("Failed to load script: "+t.message))},document.head.appendChild(r)})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=function(){var t=p(l().mark((function t(e,r){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D(e);case 3:return t.next=5,W();case 5:if((n=t.sent).sha2){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,A(e,r,n.sha2);case 10:t.next=14;break;case 12:t.prev=12,t.t0=t.catch(0);case 14:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,r){return t.apply(this,arguments)}}(),G=function(){var t=p(l().mark((function t(e,r,n,o){var i,a,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new h("https://api.vector.co"),a=O("hubspotutk"),t.prev=2,t.next=5,D(e);case 5:return t.next=7,W();case 7:return c=t.sent,t.next=10,i.post("/pixel/".concat(e,"/visitor/").concat(r,"/cerebro"),{externalId:n,sha256:c.sha2,additionalData:o,hubspotutk:a,partnerId:window.vector.partnerId});case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.error("Error in executeCerebro:",t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e,r,n,o){return t.apply(this,arguments)}}(),U=function(){var t=p(l().mark((function t(e,r){var n,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={},new MutationObserver((function(t){t.forEach((function(t){t.addedNodes.forEach((function(t){"FORM"===t.nodeName&&o(t)}))}))})).observe(document.body,{childList:!0,subtree:!0}),o=function(t){t&&t instanceof HTMLFormElement?t.addEventListener("submit",function(){var o=p(l().mark((function o(i){var a;return l().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,a={data_source:"form_listener"},t.querySelectorAll("input[type='email'],\n           input[name*='email'], input[id*='email'],\n           input[name*='first_name'], input[name*='firstname'], input[id*='first_name'], input[id*='firstname'],\n           input[name*='last_name'], input[name*='lastname'], input[id*='last_name'], input[id*='lastname'],\n           input[name*='firstName'], input[id*='firstName'], input[name*='lastName'], input[id*='lastName']").forEach((function(e,r){try{var n=(e.name||e.id||"".concat(t.id||"form","_field_").concat(r)).toLowerCase().replace(/([A-Z])/g,"_$1").replace(/(firstname)/g,"first_name").replace(/(lastname)/g,"last_name").replace(/[\s-]+/g,"_").replace(/__+/g,"_").replace(/^_|_$/g,"");if("email"===e.type||n.includes("email")||n.includes("first_name")||n.includes("last_name")){var o=v(e);a[n]=o.value}}catch(t){console.error("Error processing form field:",t)}})),n=a,window.vector.emit("form.submit",{formId:t.id||t.getAttribute("data-form-id")||"unnamed_form",formName:t.getAttribute("name")||"unnamed_form",vectorData:a,visitorId:e,timestamp:(new Date).toISOString(),url:window.location.href}),!window.vector.useCerebroWaterfall){o.next=11;break}return o.next=9,G(r,e,a.email?a.email:null,n);case 9:o.next=13;break;case 11:return o.next=13,N(r,e,a.email?a.email:null,n);case 13:o.next=19;break;case 15:o.prev=15,o.t0=o.catch(0),console.error("Error in form submission handler:",o.t0),window.vector.emit("form.error",{error:o.t0.message,formId:t.id||t.getAttribute("data-form-id")||"unnamed_form"});case 19:case"end":return o.stop()}}),o,null,[[0,15]])})));return function(t){return o.apply(this,arguments)}}()):console.error("Invalid form element provided to attachSingleFormListener")},document.querySelectorAll("form").forEach(o);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),V=function(){return d.getItem("experimental_features")},K=function(t){d.setItem("experimental_features",t)},q=function(){var t=new URLSearchParams(window.location.search),e={};if("true"===t.get("v_x_f_all"))return Object.keys(m).reduce((function(t,e){return t[e]="true",t}),{});var r,n=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=i(t))){e&&(t=e);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(c)throw o}}}}(t.entries());try{for(n.s();!(r=n.n()).done;){var a=o(r.value,2),c=a[0],s=a[1];c.startsWith("v_x_f_")&&(e[c.replace("v_x_f_","")]=s)}}catch(t){n.e(t)}finally{n.f()}if(0===Object.keys(e).length)return!1;var l=V();return l?(K(JSON.stringify(u(u({},JSON.parse(l)),e))),u(u({},JSON.parse(l)),e)):(K(JSON.stringify(e)),e)},R=function(){var t=p(l().mark((function t(e,r){var n,i,a,c,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=q()){t.next=3;break}return t.abrupt("return");case 3:i=0,a=Object.entries(n);case 4:if(!(i<a.length)){t.next=12;break}if(c=o(a[i],2),u=c[0],"true"!==c[1]||!Object.keys(m).includes(u)){t.next=9;break}return t.next=9,g(m[u],r,e);case 9:i++,t.next=4;break;case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),J=function(){var t=p(l().mark((function t(e,r){var n,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window._hsq=window._hsq||[],n=["email","firstname","lastname","first_name","last_name"],o=Array.prototype.push,window._hsq.push=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var c=i[0];if(Array.isArray(c)&&"identify"===c[0]){var s=c[1]||{},l=n.reduce((function(t,e){return void 0!==s[e]&&(t[e]=s[e]),t}),{});window.vector.useCerebroWaterfall?G(r,e,l.email,u(u({},l),{},{hubspot:!0})):N(r,e,l.email,u(u({},l),{},{hubspot:!0}))}return o.apply(this,i)};case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),Y=function(){var t=p(l().mark((function t(e,r){var n,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=window.drift||[],o=n.identify,n.identify=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n[0];var a=n[1],c=a.email;return c&&(window.vector.useCerebroWaterfall?G(r,e,c,u(u({},a),{},{drift:!0})):N(r,e,c,u(u({},a),{},{drift:!0}))),o.apply(this,n)};case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();t.exports={getIpInfo:I,getIpInfoAndCheckCloudProvider:_,getOrCreateVisitorId:P,createVisitorActivity:j,updateVisitorExternalId:N,executeMonthlyIdentityWaterfall:F,executeLiveIntent:M,processLiveIntentData:A,runExperimentalFeatures:R,rejectCloudProviders:k,editConsent:T,attachFormListeners:U,getExperimentalFeatures:V,setExperimentalFeatures:K,determineExperimentalFeatures:q,executeCerebro:G,getVectorParams:function(){var t=new URLSearchParams(window.location.search),e={};return t.forEach((function(t,r){(r.startsWith("v_e")||r.startsWith("v_t_"))&&(e[r]=t)})),e},attachHubspotTrackingListener:J,attachDriftTrackingListener:Y,getUserAgent:function(){try{var t;return(null===(t=window)||void 0===t||null===(t=t.navigator)||void 0===t?void 0:t.userAgent)||"Unknown"}catch(t){return console.warn("Could not access user agent:",t),"Unknown"}}}},273:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(){"use strict";r=function(){return n};var t,n={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),c=new A(n||[]);return a(i,"_invoke",{value:S(t,r,c)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=p;var v="suspendedStart",d="suspendedYield",y="executing",m="completed",g={};function w(){}function b(){}function x(){}var I={};f(I,u,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(T([])));_&&_!==o&&i.call(_,u)&&(I=_);var E=x.prototype=w.prototype=Object.create(I);function O(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,r){function n(o,a,c,u){var s=h(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==e(f)&&i.call(f,"__await")?r.resolve(f.__await).then((function(t){n("next",t,c,u)}),(function(t){n("throw",t,c,u)})):r.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return n("throw",t,c,u)}))}u(s.arg)}var o;a(this,"_invoke",{value:function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}})}function S(e,r,n){var o=v;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=h(e,r,n);if("normal"===s.type){if(o=n.done?m:d,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(r){if(r||""===r){var n=r[u];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(i.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(e(r)+" is not iterable")}return b.prototype=x,a(E,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},n.awrap=function(t){return{__await:t}},O(L.prototype),f(L.prototype,s,(function(){return this})),n.AsyncIterator=L,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new L(p(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),f(E,l,"Generator"),f(E,u,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},n}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e,r){return(e=u(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function u(t){var r=function(t){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:r+""}var s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.baseURL=e},e=[{key:"request",value:(n=r().mark((function t(e){var n,i,a,c,u,s=arguments;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:null,i=s.length>3&&void 0!==s[3]?s[3]:{},a={method:s.length>1&&void 0!==s[1]?s[1]:"GET",headers:o({"Content-Type":"application/json","X-Request-URL":window.location.href},i)},n&&(a.body=JSON.stringify(n)),t.prev=5,t.next=8,fetch("".concat(this.baseURL).concat(e),a);case 8:if((c=t.sent).ok){t.next=14;break}return t.next=12,c.json();case 12:throw u=t.sent,new Error(u.message||"Something went wrong");case 14:return t.abrupt("return",c.json());case 17:throw t.prev=17,t.t0=t.catch(5),"Domain not allowed"!==t.t0.message&&console.error("Fetch error:",t.t0),t.t0;case 21:case"end":return t.stop()}}),t,this,[[5,17]])})),i=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function c(t){a(i,r,o,c,u,"next",t)}function u(t){a(i,r,o,c,u,"throw",t)}c(void 0)}))},function(t){return i.apply(this,arguments)})},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request(t,"GET",null,e)}},{key:"post",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(t,"POST",e,r)}},{key:"put",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(t,"PUT",e,r)}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request(t,"DELETE",null,e)}}],e&&c(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,i}();t.exports=s},203:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){"use strict";o=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),c=new A(n||[]);return a(i,"_invoke",{value:S(t,r,c)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var v="suspendedStart",d="suspendedYield",y="executing",m="completed",g={};function w(){}function b(){}function x(){}var I={};f(I,u,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(T([])));_&&_!==r&&i.call(_,u)&&(I=_);var E=x.prototype=w.prototype=Object.create(I);function O(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,c,u){var s=h(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&i.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,u)}))}u(s.arg)}var o;a(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}})}function S(e,r,n){var o=v;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=h(e,r,n);if("normal"===s.type){if(o=n.done?m:d,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=x,a(E,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(L.prototype),f(L.prototype,s,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(p(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),f(E,l,"Generator"),f(E,u,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var a={hspt:"hubspot_tracking",drft:"drift_tracking"},c=function(){var t,e=(t=o().mark((function t(e,n,i){var c,u,s,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("ENABLING EXPERIMENTAL VECTORFEATURES"),e){t.next=4;break}return console.warn("No features to enable"),t.abrupt("return");case 4:console.log("enabling feature",e),t.prev=5,t.t0=e,t.next=t.t0===a.hspt?9:t.t0===a.drft?14:19;break;case 9:return t.next=11,Promise.resolve().then(r.t.bind(r,851,23));case 11:return c=t.sent,u=c.attachHubspotTrackingListener,t.abrupt("return",u(n,i));case 14:return t.next=16,Promise.resolve().then(r.t.bind(r,851,23));case 16:return s=t.sent,l=s.attachDriftTrackingListener,t.abrupt("return",l(n,i));case 19:console.warn("Unknown experimental feature: ".concat(e));case 20:t.next=26;break;case 22:throw t.prev=22,t.t1=t.catch(5),console.error("Error executing experimental feature:",t.t1),t.t1;case 26:case"end":return t.stop()}}),t,null,[[5,22]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)}))});return function(t,r,n){return e.apply(this,arguments)}}();t.exports={EXPERIMENTAL_FEATURES:a,executeFeature:c}},374:t=>{t.exports={getFieldData:function(t){var e,r=t.value;switch(t.type){case"checkbox":r=t.checked;break;case"radio":r=t.checked?t.value:null;break;case"select-multiple":r=Array.from(t.selectedOptions).map((function(t){return t.value}));break;case"select":case"textarea":case"number":case"email":case"tel":case"search":case"url":case"color":r=t.value}return{value:r,type:t.type||t.tagName.toLowerCase(),label:(null===(e=t.labels)||void 0===e||null===(e=e[0])||void 0===e||null===(e=e.textContent)||void 0===e?void 0:e.trim())||null}}}},389:t=>{function e(t,e,r){return(e=a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var e=function(t){if("object"!=r(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:e+""}var c="vector_";function u(){var t="".concat(c,"cookie_test");document.cookie="".concat(t,"=").concat("1","; path=/");var e=document.cookie.split("; ").some((function(e){return e.startsWith("".concat(t,"="))}));return document.cookie="".concat(t,"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"),e}var s=function(){return i((function t(){n(this,t),this._data={}}),[{key:"getItem",value:function(t){return this._data.hasOwnProperty(t)?this._data[t]:null}},{key:"setItem",value:function(t,e){return this._data[t]=String(e)}},{key:"removeItem",value:function(t){return delete this._data[t]}},{key:"clear",value:function(){return this._data={}}}])}(),l=function(){function t(){n(this,t)}return i(t,[{key:"getItem",value:function(t){var e=document.cookie.split("; ").find((function(e){return e.startsWith("".concat(t,"="))}));return e?decodeURIComponent(e.split("=")[1]):null}},{key:"setItem",value:function(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=t.getOneYearExpiry(),i="".concat(e,"=").concat(encodeURIComponent(r),"; path=/; expires=").concat(o);n&&(i+="; Secure"),document.cookie=i}},{key:"removeItem",value:function(t){document.cookie="".concat(t,"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT")}},{key:"clear",value:function(){document.cookie.split(";").forEach((function(t){var e=t.indexOf("="),r=e>-1?t.substring(0,e).trim():t.trim();r.startsWith(c)&&(document.cookie="".concat(r,"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"))}))}}],[{key:"getOneYearExpiry",value:function(){var t=new Date;return t.setFullYear(t.getFullYear()+1),t.toUTCString()}}])}(),f=new(function(){return i((function t(){n(this,t),e(this,"storage",window.localStorage),e(this,"namespace",""),function(){try{var t="".concat(c,"test");return localStorage.setItem(t,"test"),localStorage.removeItem(t),!0}catch(t){return!1}}()?this.storage=window.localStorage:function(){try{var t="".concat(c,"test");return sessionStorage.setItem(t,"test"),sessionStorage.removeItem(t),!0}catch(t){return!1}}()?this.storage=window.sessionStorage:u()?this.storage=new l:this.storage=new s}),[{key:"setItem",value:function(t,e){this.storage.setItem(this.prefixedKey(t),e)}},{key:"getItem",value:function(t){return this.storage.getItem(this.prefixedKey(t))}},{key:"removeItem",value:function(t){this.storage.removeItem(this.prefixedKey(t))}},{key:"isCookieStorageAvailable",value:function(){return u()}},{key:"setNamespace",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.namespace;return this.namespace=t?"".concat(t,"_"):"",e}},{key:"prefixedKey",value:function(t){return"".concat(c).concat(this.namespace).concat(t)}},{key:"clear",value:function(){this.storage.clear()}}])}());t.exports=f}},n={};function o(t){var e=n[t];if(void 0!==e)return e.exports;var i=n[t]={exports:{}};return r[t](i,i.exports,o),i.exports}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return u(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e,r){return(e=g(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(){"use strict";p=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof w?e:w,a=Object.create(i.prototype),c=new A(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var v="suspendedStart",d="suspendedYield",y="executing",m="completed",g={};function w(){}function b(){}function x(){}var I={};l(I,c,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(T([])));_&&_!==r&&n.call(_,c)&&(I=_);var E=x.prototype=w.prototype=Object.create(I);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,c,u){var s=h(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==i(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function S(e,r,n){var o=v;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=h(e,r,n);if("normal"===s.type){if(o=n.done?m:d,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(i(e)+" is not iterable")}return b.prototype=x,o(E,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=l(x,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,l(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(L.prototype),l(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),l(E,s,"Generator"),l(E,c,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function h(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function v(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){h(i,n,o,a,c,"next",t)}function c(t){h(i,n,o,a,c,"throw",t)}a(void 0)}))}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function m(t,e,r){return e&&y(t.prototype,e),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,o.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var i=Object.create(null);o.r(i);var a={};t=t||[null,e({}),e([]),e(e)];for(var c=2&n&&r;"object"==typeof c&&!~t.indexOf(c);c=e(c))Object.getOwnPropertyNames(c).forEach((t=>a[t]=()=>r[t]));return a.default=()=>r,o.d(i,a),i},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};try{var w=o(851),b=o(389);!function(t,e,r){var n=Array.isArray(null===(e=t.vector)||void 0===e?void 0:e.q)?t.vector.q:[],o=(null===(r=t.vector)||void 0===r?void 0:r.partnerId)||null,i=function(t){return(t||"").toString().replace(/[^a-z0-9_-]/gi,"_").toLowerCase()},u=function(){return m((function t(e,r){d(this,t),this.manager=e,this.instanceKey=r,this.pixelId=null,this.visitorId=null,this.externalId=null,this.partnerId=o,this.loadPromise=null,this.hasInitialized=!1,this.forceIdentityWaterfall=!1,this.forceIdentityWaterfallExpiry=null,this.useCerebroWaterfall=!1,this.formListeningState="us_only",this.pixelMode="original",this.userAgent=w.getUserAgent(),this.lastIdentifyTimestamp=null,this.storageNamespace=i(r)}),[{key:"getStorageNamespace",value:function(){return this.pixelId&&(this.storageNamespace=i("pixel_".concat(this.pixelId))),this.storageNamespace}},{key:"load",value:(u=v(p().mark((function e(r){var n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pixelId=r,e.abrupt("return",this.manager.runFor(this,v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.hasInitialized){e.next=2;break}return e.abrupt("return",n.loadPromise);case 2:if(!n.isVisitorBlocked()){e.next=4;break}return e.abrupt("return",null);case 4:return b.setNamespace(n.getStorageNamespace()),n.hasInitialized=!0,n.loadPromise=v(p().mark((function e(){var o,i,a,c,u,s,l,f,h;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.getIpInfoAndCheckCloudProvider();case 3:if(i=e.sent,a=i.ipInfo,!i.isCloudProvider){e.next=8;break}return e.abrupt("return",null);case 8:return e.next=10,w.getOrCreateVisitorId(r,a);case 10:if(c=e.sent){e.next=14;break}return console.error("No visitor ID available. Load may have failed."),e.abrupt("return");case 14:if(u="string"==typeof c?c:c.visitorId,s="string"==typeof c?null:c.settings,l="string"!=typeof c&&null!==(o=c.wasNewlyCreated)&&void 0!==o&&o,n.visitorId=u,s?(n.useCerebroWaterfall=s.useCerebroWaterfall,n.forceIdentityWaterfall=s.forceIdentityWaterfall,n.formListeningState=s.formListeningState,n.pixelMode=s.pixelMode,s.pixelMode&&(n.manager.mode=s.pixelMode)):(n.useCerebroWaterfall=t.vector.useCerebroWaterfall,n.forceIdentityWaterfall=t.vector.forceIdentityWaterfall,n.formListeningState=t.vector.formListeningState,n.pixelMode=t.vector.pixelMode||"original"),f=w.getVectorParams(),u){e.next=23;break}return console.error("No visitor ID available. Load may have failed."),e.abrupt("return");case 23:if("multi"===n.pixelMode&&l){e.next=26;break}return e.next=26,w.createVisitorActivity(r,u,a,n.userAgent);case 26:if("US"!==a.countryCode){e.next=40;break}if(w.runExperimentalFeatures(r,u),"on"!==n.formListeningState&&"us_only"!==n.formListeningState||w.attachFormListeners(u,r),h=Object.keys(f||{}).filter((function(t){return t.startsWith("v_t_")})).reduce((function(t,e){return t[e.replace("v_t_","")]=f[e],t}),{}),!f.v_e){e.next=37;break}return e.next=34,w.executeCerebro(r,u,f.v_e,h);case 34:b.setItem("synced_at",(new Date).getTime().toString()),e.next=40;break;case 37:return b.setNamespace(n.getStorageNamespace()),e.next=40,w.executeMonthlyIdentityWaterfall(r,u,n.forceIdentityWaterfall);case 40:return t.vector.emit("pixel.loaded",{pixelId:r,visitorId:u,instanceKey:n.instanceKey}),t.vector_loaded=!0,e.abrupt("return",u);case 45:throw e.prev=45,e.t0=e.catch(0),"Domain not allowed"!==e.t0.message&&console.error("load error:",e.t0),e.t0;case 49:case"end":return e.stop()}}),e,null,[[0,45]])})))(),e.abrupt("return",n.loadPromise);case 8:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)}))),function(t){return u.apply(this,arguments)})},{key:"identify",value:(c=v(p().mark((function e(r){var n,o,i,a=this,c=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=c.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=c[i];return e.abrupt("return",this.manager.runFor(this,v(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,b.getItem("last_identified_id")!==r||t.vector.forceIdentityWaterfall){e.next=4;break}return e.abrupt("return");case 4:if(n=Date.now(),!(a.lastIdentifyTimestamp&&n-a.lastIdentifyTimestamp<3e5)){e.next=8;break}return console.warn("Vector identify rate limit exceeded (fallback)"),e.abrupt("return");case 8:if(!a.loadPromise){e.next=13;break}return e.next=11,a.loadPromise;case 11:e.next=15;break;case 13:return console.warn("load() was not called before identify()"),e.abrupt("return");case 15:if(a.visitorId){e.next=17;break}throw new Error("No visitor ID available. Load may have failed.");case 17:return a.externalId=r,e.next=20,w.executeCerebro(a.pixelId,a.visitorId,r,o[0]);case 20:try{b.setItem("last_identified_id",r)}catch(t){a.lastIdentifyTimestamp=n}t.vector.emit("user.identified",l(l({externalId:r},o[0]),{},{instanceKey:a.instanceKey,pixelId:a.pixelId})),e.next=28;break;case 24:throw e.prev=24,e.t0=e.catch(0),"Domain not allowed"!==e.t0.message&&console.error("identify error:",e.t0),e.t0;case 28:case"end":return e.stop()}}),e,null,[[0,24]])})))));case 2:case"end":return e.stop()}}),e,this)}))),function(t){return c.apply(this,arguments)})},{key:"__cerebro",value:(a=v(p().mark((function e(r){var n,o,i,a=this,c=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=c.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=c[i];return e.abrupt("return",this.manager.runFor(this,v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.executeCerebro(a.pixelId,a.visitorId,r,o[0]);case 2:t.vector.emit("user.cerebro",l(l({externalId:r},o[0]),{},{instanceKey:a.instanceKey,pixelId:a.pixelId}));case 3:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)}))),function(t){return a.apply(this,arguments)})},{key:"block",value:(n=v(p().mark((function e(){var r=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.manager.runFor(this,v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.editConsent(r.pixelId,r.visitorId,{action:"revoked",scope:"global"});case 3:t.vector.emit("user.consent.revoked.global",{instanceKey:r.instanceKey,pixelId:r.pixelId}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),"Domain not allowed"!==e.t0.message&&console.error("block error:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"removeVisitor",value:(r=v(p().mark((function e(){var r=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.manager.runFor(this,v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r.clearVisitorData(),r.setLocalBlock(),r.visitorId=null,r.externalId=null,r.hasInitialized=!1,r.loadPromise=null,t.vector.emit("visitor.removed",{instanceKey:r.instanceKey,pixelId:r.pixelId}),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),console.error("removeVisitor error:",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))));case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"clearVisitorData",value:function(){try{b.removeItem("visitor_id"),b.removeItem("visitor_uuid"),b.removeItem("synced_at"),b.removeItem("last_identified_id"),b.removeItem("visitor_blocked"),b.removeItem("force_rewaterfalled_".concat(this.pixelId));var e=t.location.hostname.split("."),r=e.length>2?e.slice(-2).join("."):t.location.hostname;document.cookie="vector_visitor_id=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.".concat(r,"; SameSite=None; Secure"),document.cookie.split(";").forEach((function(t){var e=t.indexOf("="),n=e>-1?t.substring(0,e).trim():t.trim();n.startsWith("vector_")&&(document.cookie="".concat(n,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.").concat(r,"; SameSite=None; Secure"))}))}catch(t){console.error("Error clearing visitor data:",t)}}},{key:"setLocalBlock",value:function(){try{var t={blocked:!0,timestamp:Date.now(),reason:"user_requested_removal"};b.setItem("visitor_blocked",JSON.stringify(t));try{localStorage.setItem("vector_visitor_blocked",JSON.stringify(t))}catch(t){}try{sessionStorage.setItem("vector_visitor_blocked",JSON.stringify(t))}catch(t){}}catch(t){console.error("Error setting local block:",t)}}},{key:"isVisitorBlocked",value:function(){try{var t=b.getItem("visitor_blocked");if(t)return!0===JSON.parse(t).blocked;try{var e=localStorage.getItem("vector_visitor_blocked");if(e)return!0===JSON.parse(e).blocked}catch(t){}try{var r=sessionStorage.getItem("vector_visitor_blocked");if(r)return!0===JSON.parse(r).blocked}catch(t){}return!1}catch(t){return console.error("Error checking visitor block status:",t),!1}}},{key:"page",value:(e=v(p().mark((function t(){var e=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.manager.runFor(this,v(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.pixelId){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.load(e.pixelId);case 5:t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),"Domain not allowed"!==t.t0.message&&console.error("page error:",t.t0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))));case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]);var e,r,n,a,c,u}(),s=function(){return m((function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;d(this,t),this.instances=new Map,this.instancesByPixel=new Map,this.activeInstance=null,this.eventHandlers={},this._queue=Array.isArray(r)?a(r):[],this.q=r,this.mode="unknown",this._partnerId=n,this._defineInstanceProperty("forceIdentityWaterfall",!1),this._defineInstanceProperty("useCerebroWaterfall",!1),this._defineInstanceProperty("formListeningState","us_only"),this._defineInstanceProperty("pixelMode","original",(function(t){t&&(e.mode=t)})),this._defineInstanceProperty("userAgent","Unknown"),Object.defineProperty(this,"partnerId",{configurable:!0,enumerable:!0,get:function(){return e._partnerId},set:function(t){e._partnerId=t,e.instances.forEach((function(e){e.partnerId=t}))}})}),[{key:"_defineInstanceProperty",value:function(t,e,r){var n=this;Object.defineProperty(this,t,{configurable:!0,enumerable:!0,get:function(){var r=n.activeInstance||n._getDefaultInstance();return r&&void 0!==r[t]?r[t]:e},set:function(e){var o=n.activeInstance||n._getDefaultInstance();o&&(o[t]=e),"function"==typeof r&&r(e,o)}})}},{key:"_getDefaultInstance",value:function(){var t=this.instances.values().next();return t.done?null:t.value}},{key:"runFor",value:(i=v(p().mark((function t(e,r){var n,o;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.activeInstance,o=b.setNamespace(e.getStorageNamespace()),this.activeInstance=e,t.prev=3,t.next=6,r();case 6:return t.abrupt("return",t.sent);case 7:return t.prev=7,this.activeInstance=n,b.setNamespace(o),t.finish(7);case 11:case"end":return t.stop()}}),t,this,[[3,,7,11]])}))),function(t,e){return i.apply(this,arguments)})},{key:"_registerInstance",value:function(t,e,r){var n=this.instancesByPixel.get(t)||new Set;n.add(e),this.instancesByPixel.set(t,n),r.partnerId=this.partnerId}},{key:"_generateInstanceKey",value:function(t){return"".concat(t,"_").concat(Date.now(),"_").concat(Math.floor(1e3*Math.random()))}},{key:"_getLatestInstance",value:function(t){var e=this.instancesByPixel.get(t);if(!e||0===e.size)return null;var r=Array.from(e),n=r[r.length-1];return this.instances.get(n)||null}},{key:"_ensureInstanceForLoad",value:function(t){var e=this._getLatestInstance(t);if(e)return e;var r="multi"===this.mode?this._generateInstanceKey(t):t,n=new u(this,r);return this.instances.set(r,n),this._registerInstance(t,r,n),n}},{key:"load",value:function(t){return this._ensureInstanceForLoad(t).load(t)}},{key:"identify",value:(o=v(p().mark((function t(e){var r,n,o,i,a=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=a.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=a[o];return i=Array.from(this.instances.values()).map((function(t){return t.identify.apply(t,[e].concat(n))})),t.abrupt("return",Promise.all(i));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"__cerebro",value:(n=v(p().mark((function t(e){var r,n,o,i,a=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=a.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=a[o];return i=Array.from(this.instances.values()).map((function(t){return t.__cerebro.apply(t,[e].concat(n))})),t.abrupt("return",Promise.all(i));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"block",value:(r=v(p().mark((function t(){var e;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Array.from(this.instances.values()).map((function(t){return t.block()})),t.abrupt("return",Promise.all(e));case 2:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"removeVisitor",value:(e=v(p().mark((function t(){var e;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Array.from(this.instances.values()).map((function(t){return t.removeVisitor()})),t.abrupt("return",Promise.all(e));case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"page",value:(t=v(p().mark((function t(){var e;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Array.from(this.instances.values()).map((function(t){return t.page()})),t.abrupt("return",Promise.all(e));case 2:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"debug",value:function(){var t,e=this;if(console.group(" Vector Instance Debug Info"),console.log("Mode:",this.mode),console.log("Total Instances:",this.instances.size),console.log("Active Instance:",(null===(t=this.activeInstance)||void 0===t?void 0:t.instanceKey)||"none"),console.log("Partner ID:",this.partnerId||"none"),console.log(""),0===this.instances.size)return console.log("No instances found."),void console.groupEnd();var r=new Map;this.instances.forEach((function(t,e){var n=t.pixelId||"not loaded";r.has(n)||r.set(n,[]),r.get(n).push({instanceKey:e,instance:t})})),r.forEach((function(t,r){console.group("Pixel ID: ".concat(r," (").concat(t.length," instance").concat(t.length>1?"s":"",")")),t.forEach((function(t){var r=t.instanceKey,n=t.instance,o=n===e.activeInstance;console.group("".concat(o?" ":"","Instance: ").concat(r));var i={instanceKey:n.instanceKey,pixelId:n.pixelId||"not set",visitorId:n.visitorId||"not set",externalId:n.externalId||"not set",partnerId:n.partnerId||"not set",hasInitialized:n.hasInitialized,storageNamespace:n.getStorageNamespace(),pixelMode:n.pixelMode||"not set",formListeningState:n.formListeningState||"not set",useCerebroWaterfall:n.useCerebroWaterfall,forceIdentityWaterfall:n.forceIdentityWaterfall,loadPromise:n.loadPromise?"pending/resolved":"none",lastIdentifyTimestamp:n.lastIdentifyTimestamp||"never"};console.table(i),console.groupEnd()})),console.groupEnd()})),console.group("Instance Registry"),console.log("Instances by Pixel ID:"),this.instancesByPixel.forEach((function(t,e){console.log("  ".concat(e,":"),Array.from(t))})),console.groupEnd(),console.groupEnd()}},{key:"on",value:function(t,e){this.eventHandlers[t]||(this.eventHandlers[t]=[]),this.eventHandlers[t].push(e),this.emit("event.handler.added",{eventName:t})}},{key:"emit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.eventHandlers[t];if(r&&0!==r.length){var n=this.activeInstance||this._getDefaultInstance(),o=l(l({},e),{},{pixelId:e.pixelId||(null==n?void 0:n.pixelId)||null,instanceKey:e.instanceKey||(null==n?void 0:n.instanceKey)||null});r.forEach((function(t){try{t(o)}catch(t){console.error("Error executing event handler:",t)}}))}}},{key:"_executeQueueItem",value:function(t){if(Array.isArray(t)&&!(t.length<2)){var e=(i=2,function(t){if(Array.isArray(t))return t}(o=t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(o,i)||c(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=e[0],n=e[1];"function"==typeof this[r]?this[r].apply(this,a(n||[])):"setPartnerId"===r&&null!=n&&n.length?this.partnerId=n[0]:Object.prototype.hasOwnProperty.call(this,r)&&(this[r]=null==n?void 0:n[0])}var o,i}},{key:"processQueue",value:function(){try{for(;this._queue.length>0;){var t=this._queue.shift();this._executeQueueItem(t)}this.q&&delete this.q}catch(t){console.error(t)}}}]);var t,e,r,n,o,i}();if(t.__vector_manager){var f,h=t.__vector_manager;return Array.isArray(n)&&n.length&&(f=h._queue).push.apply(f,a(n)),t.Vector=t.vector=h,void h.processQueue()}var y=new s(n,o);t.__vector_manager=y,t.Vector=t.vector=y,y.processQueue(),t.vectorPixelId&&t.vector.load(t.vectorPixelId)}(window)}catch(t){console.error("Error loading Vector:",t)}})();