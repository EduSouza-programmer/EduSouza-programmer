!function(){window.liQd=window.liQd||[];window.liQd.push({"globalVarName":"liQd_did_008f","distributorId":"did-008f","defaultEventDelay":1000,"identityResolutionConfig":{"source":"did-008f"},"identifiersToResolve":"_sharedid,dsq__s,trc_cookie_storage,gup_anonid,_li_uuid,hid,_parrable_id,tmguid,ajs_user_id,globalTI_SID,muuid,dsq__u,dtm_token,_shopify_y,_pubcid,IXWRAPPERLiveIntentIp,s_vi,_fbp,_aalyticsuid,s_ecid","contextSelectors":"","contextElementsLength":5000,"sync":true,"euns":true})}();!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var r=function(e){try{return!!e()}catch(e){return!0}},n=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),o=n,i=Function.prototype,s=i.call,a=o&&i.bind.bind(s,s),l=o?a:function(e){return function(){return s.apply(e,arguments)}},c=function(e){return null==e},u=c,d=TypeError,p=function(e){if(u(e))throw new d("Can't call method on "+e);return e},f=p,h=Object,g=function(e){return h(f(e))},v=g,y=l({}.hasOwnProperty),m=Object.ownProp||function(e,t){return y(v(e),t)},w=l,b=w({}.toString),S=w("".slice),E=function(e){return S(b(e),8,-1)},C=E,x=Array.isArray||function(e){return"Array"===C(e)},P="object"==typeof document&&document.all,k=void 0===P&&void 0!==P?function(e){return"function"==typeof e||e===P}:function(e){return"function"==typeof e},R=r,O=k,I=/#|\.prototype\./,_=function(e,t){var r=A[U(e)];return r===T||r!==j&&(O(t)?R(t):!!t)},U=_.normalize=function(e){return String(e).replace(I,".").toLowerCase()},A=_.data={},j=_.NATIVE="N",T=_.POLYFILL="P",D=_,L={exports:{}},F=!0,H=function(e){return e&&e.Math===Math&&e},$=H("object"==typeof globalThis&&globalThis)||H("object"==typeof window&&window)||H("object"==typeof self&&self)||H("object"==typeof e&&e)||H("object"==typeof e&&e)||function(){return this}()||Function("return this")(),N=$,M=Object.defineProperty,q=$,B=function(e,t){try{M(N,e,{value:t,configurable:!0,writable:!0})}catch(r){N[e]=t}return t},Q="__core-js_shared__",V=L.exports=q[Q]||B(Q,{});(V.versions||(V.versions=[])).push({version:"3.42.0",mode:"pure",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"});var z=L.exports,G=m,J=x,W=D,X=z,K=W.data,Z=W.normalize,Y="USE_FUNCTION_CONSTRUCTOR",ee="AsyncIteratorPrototype",te=function(e,t){if(J(e))for(var r=0;r<e.length;r++)K[Z(e[r])]=t},re=function(e){"object"==typeof e&&(te(e.useNative,W.NATIVE),te(e.usePolyfill,W.POLYFILL),te(e.useFeatureDetection,null),G(e,Y)&&(X[Y]=!!e[Y]),G(e,ee)&&(X[ee]=e[ee]))};t(re)({usePolyfill:["Date.now"]});var ne=n,oe=Function.prototype,ie=oe.apply,se=oe.call,ae="object"==typeof Reflect&&Reflect.apply||(ne?se.bind(ie):function(){return se.apply(ie,arguments)}),le=E,ce=l,ue=function(e){if("Function"===le(e))return ce(e)},de={},pe=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),fe=n,he=Function.prototype.call,ge=fe?he.bind(he):function(){return he.apply(he,arguments)},ve={},ye={}.propertyIsEnumerable,me=Object.getOwnPropertyDescriptor,we=me&&!ye.call({1:2},1);ve.f=we?function(e){var t=me(this,e);return!!t&&t.enumerable}:ye;var be,Se,Ee=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Ce=r,xe=E,Pe=Object,ke=l("".split),Re=Ce((function(){return!Pe("z").propertyIsEnumerable(0)}))?function(e){return"String"===xe(e)?ke(e,""):Pe(e)}:Pe,Oe=Re,Ie=p,_e=function(e){return Oe(Ie(e))},Ue=k,Ae=function(e){return"object"==typeof e?null!==e:Ue(e)},je={},Te=je,De=$,Le=k,Fe=function(e){return Le(e)?e:void 0},He=function(e,t){return arguments.length<2?Fe(Te[e])||Fe(De[e]):Te[e]&&Te[e][t]||De[e]&&De[e][t]},$e=l({}.isPrototypeOf),Ne=$.navigator,Me=Ne&&Ne.userAgent,qe=Me?String(Me):"",Be=$,Qe=qe,Ve=Be.process,ze=Be.Deno,Ge=Ve&&Ve.versions||ze&&ze.version,Je=Ge&&Ge.v8;Je&&(Se=(be=Je.split("."))[0]>0&&be[0]<4?1:+(be[0]+be[1])),!Se&&Qe&&(!(be=Qe.match(/Edge\/(\d+)/))||be[1]>=74)&&(be=Qe.match(/Chrome\/(\d+)/))&&(Se=+be[1]);var We=Se,Xe=We,Ke=r,Ze=$.String,Ye=!!Object.getOwnPropertySymbols&&!Ke((function(){var e=Symbol("symbol detection");return!Ze(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Xe&&Xe<41})),et=Ye&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,tt=He,rt=k,nt=$e,ot=Object,it=et?function(e){return"symbol"==typeof e}:function(e){var t=tt("Symbol");return rt(t)&&nt(t.prototype,ot(e))},st=String,at=function(e){try{return st(e)}catch(e){return"Object"}},lt=k,ct=at,ut=TypeError,dt=function(e){if(lt(e))return e;throw new ut(ct(e)+" is not a function")},pt=dt,ft=c,ht=function(e,t){var r=e[t];return ft(r)?void 0:pt(r)},gt=ge,vt=k,yt=Ae,mt=TypeError,wt=z,bt=function(e,t){return wt[e]||(wt[e]=t||{})},St=l,Et=0,Ct=Math.random(),xt=St(1..toString),Pt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+xt(++Et+Ct,36)},kt=bt,Rt=m,Ot=Pt,It=Ye,_t=et,Ut=$.Symbol,At=kt("wks"),jt=_t?Ut.for||Ut:Ut&&Ut.withoutSetter||Ot,Tt=function(e){return Rt(At,e)||(At[e]=It&&Rt(Ut,e)?Ut[e]:jt("Symbol."+e)),At[e]},Dt=ge,Lt=Ae,Ft=it,Ht=ht,$t=function(e,t){var r,n;if("string"===t&&vt(r=e.toString)&&!yt(n=gt(r,e)))return n;if(vt(r=e.valueOf)&&!yt(n=gt(r,e)))return n;if("string"!==t&&vt(r=e.toString)&&!yt(n=gt(r,e)))return n;throw new mt("Can't convert object to primitive value")},Nt=TypeError,Mt=Tt("toPrimitive"),qt=function(e,t){if(!Lt(e)||Ft(e))return e;var r,n=Ht(e,Mt);if(n){if(void 0===t&&(t="default"),r=Dt(n,e,t),!Lt(r)||Ft(r))return r;throw new Nt("Can't convert object to primitive value")}return void 0===t&&(t="number"),$t(e,t)},Bt=it,Qt=function(e){var t=qt(e,"string");return Bt(t)?t:t+""},Vt=Ae,zt=$.document,Gt=Vt(zt)&&Vt(zt.createElement),Jt=function(e){return Gt?zt.createElement(e):{}},Wt=Jt,Xt=!pe&&!r((function(){return 7!==Object.defineProperty(Wt("div"),"a",{get:function(){return 7}}).a})),Kt=pe,Zt=ge,Yt=ve,er=Ee,tr=_e,rr=Qt,nr=m,or=Xt,ir=Object.getOwnPropertyDescriptor;de.f=Kt?ir:function(e,t){if(e=tr(e),t=rr(t),or)try{return ir(e,t)}catch(e){}if(nr(e,t))return er(!Zt(Yt.f,e,t),e[t])};var sr=dt,ar=n,lr=ue(ue.bind),cr=function(e,t){return sr(e),void 0===t?e:ar?lr(e,t):function(){return e.apply(t,arguments)}},ur={},dr=pe&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),pr=Ae,fr=String,hr=TypeError,gr=function(e){if(pr(e))return e;throw new hr(fr(e)+" is not an object")},vr=pe,yr=Xt,mr=dr,wr=gr,br=Qt,Sr=TypeError,Er=Object.defineProperty,Cr=Object.getOwnPropertyDescriptor,xr="enumerable",Pr="configurable",kr="writable";ur.f=vr?mr?function(e,t,r){if(wr(e),t=br(t),wr(r),"function"==typeof e&&"prototype"===t&&"value"in r&&kr in r&&!r[kr]){var n=Cr(e,t);n&&n[kr]&&(e[t]=r.value,r={configurable:Pr in r?r[Pr]:n[Pr],enumerable:xr in r?r[xr]:n[xr],writable:!1})}return Er(e,t,r)}:Er:function(e,t,r){if(wr(e),t=br(t),wr(r),yr)try{return Er(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new Sr("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var Rr=ur,Or=Ee,Ir=pe?function(e,t,r){return Rr.f(e,t,Or(1,r))}:function(e,t,r){return e[t]=r,e},_r=$,Ur=ae,Ar=ue,jr=k,Tr=de.f,Dr=D,Lr=je,Fr=cr,Hr=Ir,$r=m,Nr=function(e){var t=function(r,n,o){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,n)}return new e(r,n,o)}return Ur(e,this,arguments)};return t.prototype=e.prototype,t},Mr=function(e,t){var r,n,o,i,s,a,l,c,u,d=e.target,p=e.global,f=e.stat,h=e.proto,g=p?_r:f?_r[d]:_r[d]&&_r[d].prototype,v=p?Lr:Lr[d]||Hr(Lr,d,{})[d],y=v.prototype;for(i in t)n=!(r=Dr(p?i:d+(f?".":"#")+i,e.forced))&&g&&$r(g,i),a=v[i],n&&(l=e.dontCallGetSet?(u=Tr(g,i))&&u.value:g[i]),s=n&&l?l:t[i],(r||h||typeof a!=typeof s)&&(c=e.bind&&n?Fr(s,_r):e.wrap&&n?Nr(s):h&&jr(s)?Ar(s):s,(e.sham||s&&s.sham||a&&a.sham)&&Hr(c,"sham",!0),Hr(v,i,c),h&&($r(Lr,o=d+"Prototype")||Hr(Lr,o,{}),Hr(Lr[o],i,s),e.real&&y&&(r||!y[i])&&Hr(y,i,s)))},qr={},Br=Math.ceil,Qr=Math.floor,Vr=Math.trunc||function(e){var t=+e;return(t>0?Qr:Br)(t)},zr=Vr,Gr=function(e){var t=+e;return t!=t||0===t?0:zr(t)},Jr=Gr,Wr=Math.max,Xr=Math.min,Kr=function(e,t){var r=Jr(e);return r<0?Wr(r+t,0):Xr(r,t)},Zr=Gr,Yr=Math.min,en=function(e){var t=Zr(e);return t>0?Yr(t,9007199254740991):0},tn=function(e){return en(e.length)},rn=_e,nn=Kr,on=tn,sn=function(e){return function(t,r,n){var o=rn(t),i=on(o);if(0===i)return!e&&-1;var s,a=nn(n,i);if(e&&r!=r){for(;i>a;)if((s=o[a++])!=s)return!0}else for(;i>a;a++)if((e||a in o)&&o[a]===r)return e||a||0;return!e&&-1}},an={includes:sn(!0),indexOf:sn(!1)},ln={},cn=m,un=_e,dn=an.indexOf,pn=ln,fn=l([].push),hn=function(e,t){var r,n=un(e),o=0,i=[];for(r in n)!cn(pn,r)&&cn(n,r)&&fn(i,r);for(;t.length>o;)cn(n,r=t[o++])&&(~dn(i,r)||fn(i,r));return i},gn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],vn=hn,yn=gn.concat("length","prototype");qr.f=Object.getOwnPropertyNames||function(e){return vn(e,yn)};var mn={};mn.f=Object.getOwnPropertySymbols;var wn=He,bn=qr,Sn=mn,En=gr,Cn=l([].concat),xn=wn("Reflect","ownKeys")||function(e){var t=bn.f(En(e)),r=Sn.f;return r?Cn(t,r(e)):t},Pn=pe,kn=ur,Rn=Ee,On=function(e,t,r){Pn?kn.f(e,t,Rn(0,r)):e[t]=r},In=xn,_n=_e,Un=de,An=On;Mr({target:"Object",stat:!0,sham:!pe},{getOwnPropertyDescriptors:function(e){for(var t,r,n=_n(e),o=Un.f,i=In(n),s={},a=0;i.length>a;)void 0!==(r=o(n,t=i[a++]))&&An(s,t,r);return s}});var jn=t(je.Object.getOwnPropertyDescriptors),Tn=pe,Dn=x,Ln=TypeError,Fn=Object.getOwnPropertyDescriptor,Hn=Tn&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}()?function(e,t){if(Dn(e)&&!Fn(e,"length").writable)throw new Ln("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},$n=TypeError,Nn=function(e){if(e>9007199254740991)throw $n("Maximum allowed index exceeded");return e},Mn=g,qn=tn,Bn=Hn,Qn=Nn;Mr({target:"Array",proto:!0,arity:1,forced:r((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var t=Mn(this),r=qn(t),n=arguments.length;Qn(r+n);for(var o=0;o<n;o++)t[r]=arguments[o],r++;return Bn(t,r),r}});var Vn,zn,Gn,Jn=$,Wn=je,Xn=function(e,t){var r=Wn[e+"Prototype"],n=r&&r[t];if(n)return n;var o=Jn[e],i=o&&o.prototype;return i&&i[t]},Kn=Xn("Array","push"),Zn=$e,Yn=Kn,eo=Array.prototype,to=t((function(e){var t=e.push;return e===eo||Zn(eo,e)&&t===eo.push?Yn:t})),ro={},no=k,oo=$.WeakMap,io=no(oo)&&/native code/.test(String(oo)),so=Pt,ao=bt("keys"),lo=function(e){return ao[e]||(ao[e]=so(e))},co=io,uo=$,po=Ae,fo=Ir,ho=m,go=z,vo=lo,yo=ln,mo="Object already initialized",wo=uo.TypeError,bo=uo.WeakMap;if(co||go.state){var So=go.state||(go.state=new bo);So.get=So.get,So.has=So.has,So.set=So.set,Vn=function(e,t){if(So.has(e))throw new wo(mo);return t.facade=e,So.set(e,t),t},zn=function(e){return So.get(e)||{}},Gn=function(e){return So.has(e)}}else{var Eo=vo("state");yo[Eo]=!0,Vn=function(e,t){if(ho(e,Eo))throw new wo(mo);return t.facade=e,fo(e,Eo,t),t},zn=function(e){return ho(e,Eo)?e[Eo]:{}},Gn=function(e){return ho(e,Eo)}}var Co={set:Vn,get:zn,has:Gn,enforce:function(e){return Gn(e)?zn(e):Vn(e,{})},getterFor:function(e){return function(t){var r;if(!po(t)||(r=zn(t)).type!==e)throw new wo("Incompatible receiver, "+e+" required");return r}}},xo=pe,Po=m,ko=Function.prototype,Ro=xo&&Object.getOwnPropertyDescriptor,Oo=Po(ko,"name"),Io={EXISTS:Oo,PROPER:Oo&&"something"===function(){}.name,CONFIGURABLE:Oo&&(!xo||xo&&Ro(ko,"name").configurable)},_o={},Uo=hn,Ao=gn,jo=Object.keys||function(e){return Uo(e,Ao)},To=pe,Do=dr,Lo=ur,Fo=gr,Ho=_e,$o=jo;_o.f=To&&!Do?Object.defineProperties:function(e,t){Fo(e);for(var r,n=Ho(t),o=$o(t),i=o.length,s=0;i>s;)Lo.f(e,r=o[s++],n[r]);return e};var No,Mo=He("document","documentElement"),qo=gr,Bo=_o,Qo=gn,Vo=ln,zo=Mo,Go=Jt,Jo="prototype",Wo="script",Xo=lo("IE_PROTO"),Ko=function(){},Zo=function(e){return"<"+Wo+">"+e+"</"+Wo+">"},Yo=function(e){e.write(Zo("")),e.close();var t=e.parentWindow.Object;return e=null,t},ei=function(){try{No=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;ei="undefined"!=typeof document?document.domain&&No?Yo(No):(t=Go("iframe"),r="java"+Wo+":",t.style.display="none",zo.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(Zo("document.F=Object")),e.close(),e.F):Yo(No);for(var n=Qo.length;n--;)delete ei[Jo][Qo[n]];return ei()};Vo[Xo]=!0;var ti,ri,ni,oi=Object.create||function(e,t){var r;return null!==e?(Ko[Jo]=qo(e),r=new Ko,Ko[Jo]=null,r[Xo]=e):r=ei(),void 0===t?r:Bo.f(r,t)},ii=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),si=m,ai=k,li=g,ci=ii,ui=lo("IE_PROTO"),di=Object,pi=di.prototype,fi=ci?di.getPrototypeOf:function(e){var t=li(e);if(si(t,ui))return t[ui];var r=t.constructor;return ai(r)&&t instanceof r?r.prototype:t instanceof di?pi:null},hi=Ir,gi=function(e,t,r,n){return n&&n.enumerable?e[t]=r:hi(e,t,r),e},vi=r,yi=k,mi=Ae,wi=oi,bi=fi,Si=gi,Ei=Tt("iterator"),Ci=!1;[].keys&&("next"in(ni=[].keys())?(ri=bi(bi(ni)))!==Object.prototype&&(ti=ri):Ci=!0);var xi=!mi(ti)||vi((function(){var e={};return ti[Ei].call(e)!==e}));yi((ti=xi?{}:wi(ti))[Ei])||Si(ti,Ei,(function(){return this}));var Pi={IteratorPrototype:ti,BUGGY_SAFARI_ITERATORS:Ci},ki={};ki[Tt("toStringTag")]="z";var Ri="[object z]"===String(ki),Oi=Ri,Ii=k,_i=E,Ui=Tt("toStringTag"),Ai=Object,ji="Arguments"===_i(function(){return arguments}()),Ti=Oi?_i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Ai(e),Ui))?r:ji?_i(t):"Object"===(n=_i(t))&&Ii(t.callee)?"Arguments":n},Di=Ti,Li=Ri?{}.toString:function(){return"[object "+Di(this)+"]"},Fi=Ri,Hi=ur.f,$i=Ir,Ni=m,Mi=Li,qi=Tt("toStringTag"),Bi=function(e,t,r,n){var o=r?e:e&&e.prototype;o&&(Ni(o,qi)||Hi(o,qi,{configurable:!0,value:t}),n&&!Fi&&$i(o,"toString",Mi))},Qi=Pi.IteratorPrototype,Vi=oi,zi=Ee,Gi=Bi,Ji=ro,Wi=function(){return this},Xi=function(e,t,r,n){var o=t+" Iterator";return e.prototype=Vi(Qi,{next:zi(+!n,r)}),Gi(e,o,!1,!0),Ji[o]=Wi,e},Ki=l,Zi=dt,Yi=Ae,es=function(e){return Yi(e)||null===e},ts=String,rs=TypeError,ns=function(e,t,r){try{return Ki(Zi(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}},os=Ae,is=p,ss=function(e){if(es(e))return e;throw new rs("Can't set "+ts(e)+" as a prototype")},as=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=ns(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return is(r),ss(n),os(r)?(t?e(r,n):r.__proto__=n,r):r}}():void 0),ls=Mr,cs=ge,us=Io,ds=Xi,ps=fi,fs=Bi,hs=gi,gs=ro,vs=Pi,ys=us.PROPER,ms=vs.BUGGY_SAFARI_ITERATORS,ws=Tt("iterator"),bs="keys",Ss="values",Es="entries",Cs=function(){return this},xs=function(e,t,r,n,o,i,s){ds(r,t,n);var a,l,c,u=function(e){if(e===o&&g)return g;if(!ms&&e&&e in f)return f[e];switch(e){case bs:case Ss:case Es:return function(){return new r(this,e)}}return function(){return new r(this)}},d=t+" Iterator",p=!1,f=e.prototype,h=f[ws]||f["@@iterator"]||o&&f[o],g=!ms&&h||u(o),v="Array"===t&&f.entries||h;if(v&&(a=ps(v.call(new e)))!==Object.prototype&&a.next&&(fs(a,d,!0,!0),gs[d]=Cs),ys&&o===Ss&&h&&h.name!==Ss&&(p=!0,g=function(){return cs(h,this)}),o)if(l={values:u(Ss),keys:i?g:u(bs),entries:u(Es)},s)for(c in l)(ms||p||!(c in f))&&hs(f,c,l[c]);else ls({target:t,proto:!0,forced:ms||p},l);return s&&f[ws]!==g&&hs(f,ws,g,{name:o}),gs[t]=g,l},Ps=function(e,t){return{value:e,done:t}},ks=_e,Rs=ro,Os=Co;ur.f;var Is=xs,_s=Ps,Us="Array Iterator",As=Os.set,js=Os.getterFor(Us);Is(Array,"Array",(function(e,t){As(this,{type:Us,target:ks(e),index:0,kind:t})}),(function(){var e=js(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,_s(void 0,!0);switch(e.kind){case"keys":return _s(r,!1);case"values":return _s(t[r],!1)}return _s([r,t[r]],!1)}),"values"),Rs.Arguments=Rs.Array;var Ts=Mr,Ds=l,Ls=Kr,Fs=RangeError,Hs=String.fromCharCode,$s=String.fromCodePoint,Ns=Ds([].join);Ts({target:"String",stat:!0,arity:1,forced:!!$s&&1!==$s.length},{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,o=0;n>o;){if(t=+arguments[o++],Ls(t,1114111)!==t)throw new Fs(t+" is not a valid code point");r[o]=t<65536?Hs(t):Hs(55296+((t-=65536)>>10),t%1024+56320)}return Ns(r,"")}});var Ms=$,qs=pe,Bs=Object.getOwnPropertyDescriptor,Qs=function(e){if(!qs)return Ms[e];var t=Bs(Ms,e);return t&&t.value},Vs=r,zs=F,Gs=Tt("iterator"),Js=!Vs((function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),r.delete("a",2),r.delete("b",void 0),!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b")||!t.size&&zs||!t.sort||"https://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Gs]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://тест").host||"#%D0%B1"!==new URL("https://a#б").hash||"a1c3"!==n||"x"!==new URL("https://x",void 0).host})),Ws=ur,Xs=function(e,t,r){return Ws.f(e,t,r)},Ks=gi,Zs=$e,Ys=TypeError,ea=function(e,t){if(Zs(t,e))return e;throw new Ys("Incorrect invocation")},ta=Ti,ra=String,na=function(e){if("Symbol"===ta(e))throw new TypeError("Cannot convert a Symbol value to a string");return ra(e)},oa=Ti,ia=ht,sa=c,aa=ro,la=Tt("iterator"),ca=function(e){if(!sa(e))return ia(e,la)||ia(e,"@@iterator")||aa[oa(e)]},ua=ge,da=dt,pa=gr,fa=at,ha=ca,ga=TypeError,va=function(e,t){var r=arguments.length<2?ha(e):t;if(da(r))return pa(ua(r,e));throw new ga(fa(e)+" is not iterable")},ya=TypeError,ma=function(e,t){if(e<t)throw new ya("Not enough arguments");return e},wa=l([].slice),ba=wa,Sa=Math.floor,Ea=function(e,t){var r=e.length;if(r<8)for(var n,o,i=1;i<r;){for(o=i,n=e[i];o&&t(e[o-1],n)>0;)e[o]=e[--o];o!==i++&&(e[o]=n)}else for(var s=Sa(r/2),a=Ea(ba(e,0,s),t),l=Ea(ba(e,s),t),c=a.length,u=l.length,d=0,p=0;d<c||p<u;)e[d+p]=d<c&&p<u?t(a[d],l[p])<=0?a[d++]:l[p++]:d<c?a[d++]:l[p++];return e},Ca=Mr,xa=$,Pa=Qs,ka=He,Ra=ge,Oa=l,Ia=pe,_a=Js,Ua=gi,Aa=Xs,ja=function(e,t,r){for(var n in t)r&&r.unsafe&&e[n]?e[n]=t[n]:Ks(e,n,t[n],r);return e},Ta=Bi,Da=Xi,La=Co,Fa=ea,Ha=k,$a=m,Na=cr,Ma=Ti,qa=gr,Ba=Ae,Qa=na,Va=oi,za=Ee,Ga=va,Ja=ca,Wa=Ps,Xa=ma,Ka=Ea,Za=Tt("iterator"),Ya="URLSearchParams",el=Ya+"Iterator",tl=La.set,rl=La.getterFor(Ya),nl=La.getterFor(el),ol=Pa("fetch"),il=Pa("Request"),sl=Pa("Headers"),al=il&&il.prototype,ll=sl&&sl.prototype,cl=xa.TypeError,ul=xa.encodeURIComponent,dl=String.fromCharCode,pl=ka("String","fromCodePoint"),fl=parseInt,hl=Oa("".charAt),gl=Oa([].join),vl=Oa([].push),yl=Oa("".replace),ml=Oa([].shift),wl=Oa([].splice),bl=Oa("".split),Sl=Oa("".slice),El=Oa(/./.exec),Cl=/\+/g,xl=/^[0-9a-f]+$/i,Pl=function(e,t){var r=Sl(e,t,t+2);return El(xl,r)?fl(r,16):NaN},kl=function(e){for(var t=0,r=128;r>0&&e&r;r>>=1)t++;return t},Rl=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(31&e[0])<<6|63&e[1];break;case 3:t=(15&e[0])<<12|(63&e[1])<<6|63&e[2];break;case 4:t=(7&e[0])<<18|(63&e[1])<<12|(63&e[2])<<6|63&e[3]}return t>1114111?null:t},Ol=function(e){for(var t=(e=yl(e,Cl," ")).length,r="",n=0;n<t;){var o=hl(e,n);if("%"===o){if("%"===hl(e,n+1)||n+3>t){r+="%",n++;continue}var i=Pl(e,n+1);if(i!=i){r+=o,n++;continue}n+=2;var s=kl(i);if(0===s)o=dl(i);else{if(1===s||s>4){r+="�",n++;continue}for(var a=[i],l=1;l<s&&!(++n+3>t||"%"!==hl(e,n));){var c=Pl(e,n+1);if(c!=c){n+=3;break}if(c>191||c<128)break;vl(a,c),n+=2,l++}if(a.length!==s){r+="�";continue}var u=Rl(a);null===u?r+="�":o=pl(u)}}r+=o,n++}return r},Il=/[!'()~]|%20/g,_l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Ul=function(e){return _l[e]},Al=function(e){return yl(ul(e),Il,Ul)},jl=Da((function(e,t){tl(this,{type:el,target:rl(e).entries,index:0,kind:t})}),Ya,(function(){var e=nl(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,Wa(void 0,!0);var n=t[r];switch(e.kind){case"keys":return Wa(n.key,!1);case"values":return Wa(n.value,!1)}return Wa([n.key,n.value],!1)}),!0),Tl=function(e){this.entries=[],this.url=null,void 0!==e&&(Ba(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===hl(e,0)?Sl(e,1):e:Qa(e)))};Tl.prototype={type:Ya,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,o,i,s,a,l=this.entries,c=Ja(e);if(c)for(r=(t=Ga(e,c)).next;!(n=Ra(r,t)).done;){if(i=(o=Ga(qa(n.value))).next,(s=Ra(i,o)).done||(a=Ra(i,o)).done||!Ra(i,o).done)throw new cl("Expected sequence with length 2");vl(l,{key:Qa(s.value),value:Qa(a.value)})}else for(var u in e)$a(e,u)&&vl(l,{key:u,value:Qa(e[u])})},parseQuery:function(e){if(e)for(var t,r,n=this.entries,o=bl(e,"&"),i=0;i<o.length;)(t=o[i++]).length&&(r=bl(t,"="),vl(n,{key:Ol(ml(r)),value:Ol(gl(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],n=0;n<t.length;)e=t[n++],vl(r,Al(e.key)+"="+Al(e.value));return gl(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Dl=function(){Fa(this,Ll);var e=tl(this,new Tl(arguments.length>0?arguments[0]:void 0));Ia||(this.size=e.entries.length)},Ll=Dl.prototype;if(ja(Ll,{append:function(e,t){var r=rl(this);Xa(arguments.length,2),vl(r.entries,{key:Qa(e),value:Qa(t)}),Ia||this.length++,r.updateURL()},delete:function(e){for(var t=rl(this),r=Xa(arguments.length,1),n=t.entries,o=Qa(e),i=r<2?void 0:arguments[1],s=void 0===i?i:Qa(i),a=0;a<n.length;){var l=n[a];if(l.key!==o||void 0!==s&&l.value!==s)a++;else if(wl(n,a,1),void 0!==s)break}Ia||(this.size=n.length),t.updateURL()},get:function(e){var t=rl(this).entries;Xa(arguments.length,1);for(var r=Qa(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){var t=rl(this).entries;Xa(arguments.length,1);for(var r=Qa(e),n=[],o=0;o<t.length;o++)t[o].key===r&&vl(n,t[o].value);return n},has:function(e){for(var t=rl(this).entries,r=Xa(arguments.length,1),n=Qa(e),o=r<2?void 0:arguments[1],i=void 0===o?o:Qa(o),s=0;s<t.length;){var a=t[s++];if(a.key===n&&(void 0===i||a.value===i))return!0}return!1},set:function(e,t){var r=rl(this);Xa(arguments.length,1);for(var n,o=r.entries,i=!1,s=Qa(e),a=Qa(t),l=0;l<o.length;l++)(n=o[l]).key===s&&(i?wl(o,l--,1):(i=!0,n.value=a));i||vl(o,{key:s,value:a}),Ia||(this.size=o.length),r.updateURL()},sort:function(){var e=rl(this);Ka(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,r=rl(this).entries,n=Na(e,arguments.length>1?arguments[1]:void 0),o=0;o<r.length;)n((t=r[o++]).value,t.key,this)},keys:function(){return new jl(this,"keys")},values:function(){return new jl(this,"values")},entries:function(){return new jl(this,"entries")}},{enumerable:!0}),Ua(Ll,Za,Ll.entries,{name:"entries"}),Ua(Ll,"toString",(function(){return rl(this).serialize()}),{enumerable:!0}),Ia&&Aa(Ll,"size",{get:function(){return rl(this).entries.length},configurable:!0,enumerable:!0}),Ta(Dl,Ya),Ca({global:!0,constructor:!0,forced:!_a},{URLSearchParams:Dl}),!_a&&Ha(sl)){var Fl=Oa(ll.has),Hl=Oa(ll.set),$l=function(e){if(Ba(e)){var t,r=e.body;if(Ma(r)===Ya)return t=e.headers?new sl(e.headers):new sl,Fl(t,"content-type")||Hl(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Va(e,{body:za(0,Qa(r)),headers:za(0,t)})}return e};if(Ha(ol)&&Ca({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return ol(e,arguments.length>1?$l(arguments[1]):{})}}),Ha(il)){var Nl=function(e){return Fa(this,al),new il(e,arguments.length>1?$l(arguments[1]):{})};al.constructor=Nl,Nl.prototype=al,Ca({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Nl})}}var Ml={URLSearchParams:Dl,getState:rl},ql=l,Bl=Gr,Ql=na,Vl=p,zl=ql("".charAt),Gl=ql("".charCodeAt),Jl=ql("".slice),Wl=function(e){return function(t,r){var n,o,i=Ql(Vl(t)),s=Bl(r),a=i.length;return s<0||s>=a?e?"":void 0:(n=Gl(i,s))<55296||n>56319||s+1===a||(o=Gl(i,s+1))<56320||o>57343?e?zl(i,s):n:e?Jl(i,s,s+2):o-56320+(n-55296<<10)+65536}},Xl={codeAt:Wl(!1),charAt:Wl(!0)},Kl=Xl.charAt,Zl=na,Yl=Co,ec=xs,tc=Ps,rc="String Iterator",nc=Yl.set,oc=Yl.getterFor(rc);ec(String,"String",(function(e){nc(this,{type:rc,string:Zl(e),index:0})}),(function(){var e,t=oc(this),r=t.string,n=t.index;return n>=r.length?tc(void 0,!0):(e=Kl(r,n),t.index+=e.length,tc(e,!1))}));var ic=pe,sc=l,ac=ge,lc=r,cc=jo,uc=mn,dc=ve,pc=g,fc=Re,hc=Object.assign,gc=Object.defineProperty,vc=sc([].concat),yc=!hc||lc((function(){if(ic&&1!==hc({b:1},hc(gc({},"a",{enumerable:!0,get:function(){gc(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol("assign detection"),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!==hc({},e)[r]||cc(hc({},t)).join("")!==n}))?function(e,t){for(var r=pc(e),n=arguments.length,o=1,i=uc.f,s=dc.f;n>o;)for(var a,l=fc(arguments[o++]),c=i?vc(cc(l),i(l)):cc(l),u=c.length,d=0;u>d;)a=c[d++],ic&&!ac(s,l,a)||(r[a]=l[a]);return r}:hc,mc=ge,wc=gr,bc=ht,Sc=function(e,t,r){var n,o;wc(e);try{if(!(n=bc(e,"return"))){if("throw"===t)throw r;return r}n=mc(n,e)}catch(e){o=!0,n=e}if("throw"===t)throw r;if(o)throw n;return wc(n),r},Ec=gr,Cc=Sc,xc=ro,Pc=Tt("iterator"),kc=Array.prototype,Rc=function(e){return void 0!==e&&(xc.Array===e||kc[Pc]===e)},Oc=k,Ic=z,_c=l(Function.toString);Oc(Ic.inspectSource)||(Ic.inspectSource=function(e){return _c(e)});var Uc=Ic.inspectSource,Ac=l,jc=r,Tc=k,Dc=Ti,Lc=Uc,Fc=function(){},Hc=He("Reflect","construct"),$c=/^\s*(?:class|function)\b/,Nc=Ac($c.exec),Mc=!$c.test(Fc),qc=function(e){if(!Tc(e))return!1;try{return Hc(Fc,[],e),!0}catch(e){return!1}},Bc=function(e){if(!Tc(e))return!1;switch(Dc(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Mc||!!Nc($c,Lc(e))}catch(e){return!0}};Bc.sham=!0;var Qc,Vc=!Hc||jc((function(){var e;return qc(qc.call)||!qc(Object)||!qc((function(){e=!0}))||e}))?Bc:qc,zc=cr,Gc=ge,Jc=g,Wc=function(e,t,r,n){try{return n?t(Ec(r)[0],r[1]):t(r)}catch(t){Cc(e,"throw",t)}},Xc=Rc,Kc=Vc,Zc=tn,Yc=On,eu=va,tu=ca,ru=Array,nu=l,ou=2147483647,iu=/[^\0-\u007E]/,su=/[.\u3002\uFF0E\uFF61]/g,au="Overflow: input needs wider integers to process",lu=RangeError,cu=nu(su.exec),uu=Math.floor,du=String.fromCharCode,pu=nu("".charCodeAt),fu=nu([].join),hu=nu([].push),gu=nu("".replace),vu=nu("".split),yu=nu("".toLowerCase),mu=function(e){return e+22+75*(e<26)},wu=function(e,t,r){var n=0;for(e=r?uu(e/700):e>>1,e+=uu(e/t);e>455;)e=uu(e/35),n+=36;return uu(n+36*e/(e+38))},bu=function(e){var t=[];e=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=pu(e,r++);if(o>=55296&&o<=56319&&r<n){var i=pu(e,r++);56320==(64512&i)?hu(t,((1023&o)<<10)+(1023&i)+65536):(hu(t,o),r--)}else hu(t,o)}return t}(e);var r,n,o=e.length,i=128,s=0,a=72;for(r=0;r<e.length;r++)(n=e[r])<128&&hu(t,du(n));var l=t.length,c=l;for(l&&hu(t,"-");c<o;){var u=ou;for(r=0;r<e.length;r++)(n=e[r])>=i&&n<u&&(u=n);var d=c+1;if(u-i>uu((ou-s)/d))throw new lu(au);for(s+=(u-i)*d,i=u,r=0;r<e.length;r++){if((n=e[r])<i&&++s>ou)throw new lu(au);if(n===i){for(var p=s,f=36;;){var h=f<=a?1:f>=a+26?26:f-a;if(p<h)break;var g=p-h,v=36-h;hu(t,du(mu(h+g%v))),p=uu(g/v),f+=36}hu(t,du(mu(p))),a=wu(s,d,c===l),s=0,c++}}s++,i++}return fu(t,"")},Su=Mr,Eu=pe,Cu=Js,xu=$,Pu=cr,ku=l,Ru=gi,Ou=Xs,Iu=ea,_u=m,Uu=yc,Au=function(e){var t=Jc(e),r=Kc(this),n=arguments.length,o=n>1?arguments[1]:void 0,i=void 0!==o;i&&(o=zc(o,n>2?arguments[2]:void 0));var s,a,l,c,u,d,p=tu(t),f=0;if(!p||this===ru&&Xc(p))for(s=Zc(t),a=r?new this(s):ru(s);s>f;f++)d=i?o(t[f],f):t[f],Yc(a,f,d);else for(a=r?new this:[],u=(c=eu(t,p)).next;!(l=Gc(u,c)).done;f++)d=i?Wc(c,o,[l.value,f],!0):l.value,Yc(a,f,d);return a.length=f,a},ju=wa,Tu=Xl.codeAt,Du=function(e){var t,r,n=[],o=vu(gu(yu(e),su,"."),".");for(t=0;t<o.length;t++)r=o[t],hu(n,cu(iu,r)?"xn--"+bu(r):r);return fu(n,".")},Lu=na,Fu=Bi,Hu=ma,$u=Ml,Nu=Co,Mu=Nu.set,qu=Nu.getterFor("URL"),Bu=$u.URLSearchParams,Qu=$u.getState,Vu=xu.URL,zu=xu.TypeError,Gu=xu.parseInt,Ju=Math.floor,Wu=Math.pow,Xu=ku("".charAt),Ku=ku(/./.exec),Zu=ku([].join),Yu=ku(1..toString),ed=ku([].pop),td=ku([].push),rd=ku("".replace),nd=ku([].shift),od=ku("".split),id=ku("".slice),sd=ku("".toLowerCase),ad=ku([].unshift),ld="Invalid scheme",cd="Invalid host",ud="Invalid port",dd=/[a-z]/i,pd=/[\d+-.a-z]/i,fd=/\d/,hd=/^0x/i,gd=/^[0-7]+$/,vd=/^\d+$/,yd=/^[\da-f]+$/i,md=/[\0\t\n\r #%/:<>?@[\\\]^|]/,wd=/[\0\t\n\r #/:<>?@[\\\]^|]/,bd=/^[\u0000-\u0020]+/,Sd=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Ed=/[\t\n\r]/g,Cd=function(e){var t,r,n,o;if("number"==typeof e){for(t=[],r=0;r<4;r++)ad(t,e%256),e=Ju(e/256);return Zu(t,".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,r=1,n=null,o=0,i=0;i<8;i++)0!==e[i]?(o>r&&(t=n,r=o),n=null,o=0):(null===n&&(n=i),++o);return o>r?n:t}(e),r=0;r<8;r++)o&&0===e[r]||(o&&(o=!1),n===r?(t+=r?":":"::",o=!0):(t+=Yu(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},xd={},Pd=Uu({},xd,{" ":1,'"':1,"<":1,">":1,"`":1}),kd=Uu({},Pd,{"#":1,"?":1,"{":1,"}":1}),Rd=Uu({},kd,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Od=function(e,t){var r=Tu(e,0);return r>32&&r<127&&!_u(t,e)?e:encodeURIComponent(e)},Id={ftp:21,file:null,http:80,https:443,ws:80,wss:443},_d=function(e,t){var r;return 2===e.length&&Ku(dd,Xu(e,0))&&(":"===(r=Xu(e,1))||!t&&"|"===r)},Ud=function(e){var t;return e.length>1&&_d(id(e,0,2))&&(2===e.length||"/"===(t=Xu(e,2))||"\\"===t||"?"===t||"#"===t)},Ad=function(e){return"."===e||"%2e"===sd(e)},jd={},Td={},Dd={},Ld={},Fd={},Hd={},$d={},Nd={},Md={},qd={},Bd={},Qd={},Vd={},zd={},Gd={},Jd={},Wd={},Xd={},Kd={},Zd={},Yd={},ep=function(e,t,r){var n,o,i,s=Lu(e);if(t){if(o=this.parse(s))throw new zu(o);this.searchParams=null}else{if(void 0!==r&&(n=new ep(r,!0)),o=this.parse(s,null,n))throw new zu(o);(i=Qu(new Bu)).bindURL(this),this.searchParams=i}};ep.prototype={type:"URL",parse:function(e,t,r){var n,o,i,s,a,l=this,c=t||jd,u=0,d="",p=!1,f=!1,h=!1;for(e=Lu(e),t||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,e=rd(e,bd,""),e=rd(e,Sd,"$1")),e=rd(e,Ed,""),n=Au(e);u<=n.length;){switch(o=n[u],c){case jd:if(!o||!Ku(dd,o)){if(t)return ld;c=Dd;continue}d+=sd(o),c=Td;break;case Td:if(o&&(Ku(pd,o)||"+"===o||"-"===o||"."===o))d+=sd(o);else{if(":"!==o){if(t)return ld;d="",c=Dd,u=0;continue}if(t&&(l.isSpecial()!==_u(Id,d)||"file"===d&&(l.includesCredentials()||null!==l.port)||"file"===l.scheme&&!l.host))return;if(l.scheme=d,t)return void(l.isSpecial()&&Id[l.scheme]===l.port&&(l.port=null));d="","file"===l.scheme?c=zd:l.isSpecial()&&r&&r.scheme===l.scheme?c=Ld:l.isSpecial()?c=Nd:"/"===n[u+1]?(c=Fd,u++):(l.cannotBeABaseURL=!0,td(l.path,""),c=Kd)}break;case Dd:if(!r||r.cannotBeABaseURL&&"#"!==o)return ld;if(r.cannotBeABaseURL&&"#"===o){l.scheme=r.scheme,l.path=ju(r.path),l.query=r.query,l.fragment="",l.cannotBeABaseURL=!0,c=Yd;break}c="file"===r.scheme?zd:Hd;continue;case Ld:if("/"!==o||"/"!==n[u+1]){c=Hd;continue}c=Md,u++;break;case Fd:if("/"===o){c=qd;break}c=Xd;continue;case Hd:if(l.scheme=r.scheme,o===Qc)l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=ju(r.path),l.query=r.query;else if("/"===o||"\\"===o&&l.isSpecial())c=$d;else if("?"===o)l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=ju(r.path),l.query="",c=Zd;else{if("#"!==o){l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=ju(r.path),l.path.length--,c=Xd;continue}l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=ju(r.path),l.query=r.query,l.fragment="",c=Yd}break;case $d:if(!l.isSpecial()||"/"!==o&&"\\"!==o){if("/"!==o){l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,c=Xd;continue}c=qd}else c=Md;break;case Nd:if(c=Md,"/"!==o||"/"!==Xu(d,u+1))continue;u++;break;case Md:if("/"!==o&&"\\"!==o){c=qd;continue}break;case qd:if("@"===o){p&&(d="%40"+d),p=!0,i=Au(d);for(var g=0;g<i.length;g++){var v=i[g];if(":"!==v||h){var y=Od(v,Rd);h?l.password+=y:l.username+=y}else h=!0}d=""}else if(o===Qc||"/"===o||"?"===o||"#"===o||"\\"===o&&l.isSpecial()){if(p&&""===d)return"Invalid authority";u-=Au(d).length+1,d="",c=Bd}else d+=o;break;case Bd:case Qd:if(t&&"file"===l.scheme){c=Jd;continue}if(":"!==o||f){if(o===Qc||"/"===o||"?"===o||"#"===o||"\\"===o&&l.isSpecial()){if(l.isSpecial()&&""===d)return cd;if(t&&""===d&&(l.includesCredentials()||null!==l.port))return;if(s=l.parseHost(d))return s;if(d="",c=Wd,t)return;continue}"["===o?f=!0:"]"===o&&(f=!1),d+=o}else{if(""===d)return cd;if(s=l.parseHost(d))return s;if(d="",c=Vd,t===Qd)return}break;case Vd:if(!Ku(fd,o)){if(o===Qc||"/"===o||"?"===o||"#"===o||"\\"===o&&l.isSpecial()||t){if(""!==d){var m=Gu(d,10);if(m>65535)return ud;l.port=l.isSpecial()&&m===Id[l.scheme]?null:m,d=""}if(t)return;c=Wd;continue}return ud}d+=o;break;case zd:if(l.scheme="file","/"===o||"\\"===o)c=Gd;else{if(!r||"file"!==r.scheme){c=Xd;continue}switch(o){case Qc:l.host=r.host,l.path=ju(r.path),l.query=r.query;break;case"?":l.host=r.host,l.path=ju(r.path),l.query="",c=Zd;break;case"#":l.host=r.host,l.path=ju(r.path),l.query=r.query,l.fragment="",c=Yd;break;default:Ud(Zu(ju(n,u),""))||(l.host=r.host,l.path=ju(r.path),l.shortenPath()),c=Xd;continue}}break;case Gd:if("/"===o||"\\"===o){c=Jd;break}r&&"file"===r.scheme&&!Ud(Zu(ju(n,u),""))&&(_d(r.path[0],!0)?td(l.path,r.path[0]):l.host=r.host),c=Xd;continue;case Jd:if(o===Qc||"/"===o||"\\"===o||"?"===o||"#"===o){if(!t&&_d(d))c=Xd;else if(""===d){if(l.host="",t)return;c=Wd}else{if(s=l.parseHost(d))return s;if("localhost"===l.host&&(l.host=""),t)return;d="",c=Wd}continue}d+=o;break;case Wd:if(l.isSpecial()){if(c=Xd,"/"!==o&&"\\"!==o)continue}else if(t||"?"!==o)if(t||"#"!==o){if(o!==Qc&&(c=Xd,"/"!==o))continue}else l.fragment="",c=Yd;else l.query="",c=Zd;break;case Xd:if(o===Qc||"/"===o||"\\"===o&&l.isSpecial()||!t&&("?"===o||"#"===o)){if(".."===(a=sd(a=d))||"%2e."===a||".%2e"===a||"%2e%2e"===a?(l.shortenPath(),"/"===o||"\\"===o&&l.isSpecial()||td(l.path,"")):Ad(d)?"/"===o||"\\"===o&&l.isSpecial()||td(l.path,""):("file"===l.scheme&&!l.path.length&&_d(d)&&(l.host&&(l.host=""),d=Xu(d,0)+":"),td(l.path,d)),d="","file"===l.scheme&&(o===Qc||"?"===o||"#"===o))for(;l.path.length>1&&""===l.path[0];)nd(l.path);"?"===o?(l.query="",c=Zd):"#"===o&&(l.fragment="",c=Yd)}else d+=Od(o,kd);break;case Kd:"?"===o?(l.query="",c=Zd):"#"===o?(l.fragment="",c=Yd):o!==Qc&&(l.path[0]+=Od(o,xd));break;case Zd:t||"#"!==o?o!==Qc&&("'"===o&&l.isSpecial()?l.query+="%27":l.query+="#"===o?"%23":Od(o,xd)):(l.fragment="",c=Yd);break;case Yd:o!==Qc&&(l.fragment+=Od(o,Pd))}u++}},parseHost:function(e){var t,r,n;if("["===Xu(e,0)){if("]"!==Xu(e,e.length-1))return cd;if(t=function(e){var t,r,n,o,i,s,a,l=[0,0,0,0,0,0,0,0],c=0,u=null,d=0,p=function(){return Xu(e,d)};if(":"===p()){if(":"!==Xu(e,1))return;d+=2,u=++c}for(;p();){if(8===c)return;if(":"!==p()){for(t=r=0;r<4&&Ku(yd,p());)t=16*t+Gu(p(),16),d++,r++;if("."===p()){if(0===r)return;if(d-=r,c>6)return;for(n=0;p();){if(o=null,n>0){if(!("."===p()&&n<4))return;d++}if(!Ku(fd,p()))return;for(;Ku(fd,p());){if(i=Gu(p(),10),null===o)o=i;else{if(0===o)return;o=10*o+i}if(o>255)return;d++}l[c]=256*l[c]+o,2!=++n&&4!==n||c++}if(4!==n)return;break}if(":"===p()){if(d++,!p())return}else if(p())return;l[c++]=t}else{if(null!==u)return;d++,u=++c}}if(null!==u)for(s=c-u,c=7;0!==c&&s>0;)a=l[c],l[c--]=l[u+s-1],l[u+--s]=a;else if(8!==c)return;return l}(id(e,1,-1)),!t)return cd;this.host=t}else if(this.isSpecial()){if(e=Du(e),Ku(md,e))return cd;if(t=function(e){var t,r,n,o,i,s,a,l=od(e,".");if(l.length&&""===l[l.length-1]&&l.length--,(t=l.length)>4)return e;for(r=[],n=0;n<t;n++){if(""===(o=l[n]))return e;if(i=10,o.length>1&&"0"===Xu(o,0)&&(i=Ku(hd,o)?16:8,o=id(o,8===i?1:2)),""===o)s=0;else{if(!Ku(10===i?vd:8===i?gd:yd,o))return e;s=Gu(o,i)}td(r,s)}for(n=0;n<t;n++)if(s=r[n],n===t-1){if(s>=Wu(256,5-t))return null}else if(s>255)return null;for(a=ed(r),n=0;n<r.length;n++)a+=r[n]*Wu(256,3-n);return a}(e),null===t)return cd;this.host=t}else{if(Ku(wd,e))return cd;for(t="",r=Au(e),n=0;n<r.length;n++)t+=Od(r[n],xd);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return _u(Id,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"===this.scheme&&1===t&&_d(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,o=e.host,i=e.port,s=e.path,a=e.query,l=e.fragment,c=t+":";return null!==o?(c+="//",e.includesCredentials()&&(c+=r+(n?":"+n:"")+"@"),c+=Cd(o),null!==i&&(c+=":"+i)):"file"===t&&(c+="//"),c+=e.cannotBeABaseURL?s[0]:s.length?"/"+Zu(s,"/"):"",null!==a&&(c+="?"+a),null!==l&&(c+="#"+l),c},setHref:function(e){var t=this.parse(e);if(t)throw new zu(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new tp(e.path[0]).origin}catch(e){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+Cd(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Lu(e)+":",jd)},getUsername:function(){return this.username},setUsername:function(e){var t=Au(Lu(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=Od(t[r],Rd)}},getPassword:function(){return this.password},setPassword:function(e){var t=Au(Lu(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=Od(t[r],Rd)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?Cd(e):Cd(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Bd)},getHostname:function(){var e=this.host;return null===e?"":Cd(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Qd)},getPort:function(){var e=this.port;return null===e?"":Lu(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""===(e=Lu(e))?this.port=null:this.parse(e,Vd))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+Zu(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Wd))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""===(e=Lu(e))?this.query=null:("?"===Xu(e,0)&&(e=id(e,1)),this.query="",this.parse(e,Zd)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!==(e=Lu(e))?("#"===Xu(e,0)&&(e=id(e,1)),this.fragment="",this.parse(e,Yd)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var tp=function(e){var t=Iu(this,rp),r=Hu(arguments.length,1)>1?arguments[1]:void 0,n=Mu(t,new ep(e,!1,r));Eu||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},rp=tp.prototype,np=function(e,t){return{get:function(){return qu(this)[e]()},set:t&&function(e){return qu(this)[t](e)},configurable:!0,enumerable:!0}};if(Eu&&(Ou(rp,"href",np("serialize","setHref")),Ou(rp,"origin",np("getOrigin")),Ou(rp,"protocol",np("getProtocol","setProtocol")),Ou(rp,"username",np("getUsername","setUsername")),Ou(rp,"password",np("getPassword","setPassword")),Ou(rp,"host",np("getHost","setHost")),Ou(rp,"hostname",np("getHostname","setHostname")),Ou(rp,"port",np("getPort","setPort")),Ou(rp,"pathname",np("getPathname","setPathname")),Ou(rp,"search",np("getSearch","setSearch")),Ou(rp,"searchParams",np("getSearchParams")),Ou(rp,"hash",np("getHash","setHash"))),Ru(rp,"toJSON",(function(){return qu(this).serialize()}),{enumerable:!0}),Ru(rp,"toString",(function(){return qu(this).serialize()}),{enumerable:!0}),Vu){var op=Vu.createObjectURL,ip=Vu.revokeObjectURL;op&&Ru(tp,"createObjectURL",Pu(op,Vu)),ip&&Ru(tp,"revokeObjectURL",Pu(ip,Vu))}Fu(tp,"URL"),Su({global:!0,constructor:!0,forced:!Cu,sham:!Eu},{URL:tp});var sp=Mr,ap=r,lp=ma,cp=na,up=Js,dp=He("URL"),pp=up&&ap((function(){dp.canParse()})),fp=ap((function(){return 1!==dp.canParse.length}));sp({target:"URL",stat:!0,forced:!pp||fp},{canParse:function(e){var t=lp(arguments.length,1),r=cp(e),n=t<2||void 0===arguments[1]?void 0:cp(arguments[1]);try{return!!new dp(r,n)}catch(e){return!1}}});var hp=Mr,gp=ma,vp=na,yp=Js,mp=He("URL");hp({target:"URL",stat:!0,forced:!yp},{parse:function(e){var t=gp(arguments.length,1),r=vp(e),n=t<2||void 0===arguments[1]?void 0:vp(arguments[1]);try{return new mp(r,n)}catch(e){return null}}});var wp=t(je.URL),bp=at,Sp=TypeError,Ep=g,Cp=tn,xp=Hn,Pp=function(e,t){if(!delete e[t])throw new Sp("Cannot delete property "+bp(t)+" of "+bp(e))},kp=Nn;Mr({target:"Array",proto:!0,arity:1,forced:1!==[].unshift(0)||!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}()},{unshift:function(e){var t=Ep(this),r=Cp(t),n=arguments.length;if(n){kp(r+n);for(var o=r;o--;){var i=o+n;o in t?t[i]=t[o]:Pp(t,i)}for(var s=0;s<n;s++)t[s]=arguments[s]}return xp(t,r+n)}});var Rp=Xn("Array","unshift"),Op=$e,Ip=Rp,_p=Array.prototype,Up=t((function(e){var t=e.unshift;return e===_p||Op(_p,e)&&t===_p.unshift?Ip:t})),Ap=an.includes;Mr({target:"Array",proto:!0,forced:r((function(){return!Array(1).includes()}))},{includes:function(e){return Ap(this,e,arguments.length>1?arguments[1]:void 0)}});var jp=Xn("Array","includes"),Tp=Ae,Dp=E,Lp=Tt("match"),Fp=function(e){var t;return Tp(e)&&(void 0!==(t=e[Lp])?!!t:"RegExp"===Dp(e))},Hp=TypeError,$p=Tt("match"),Np=Mr,Mp=function(e){if(Fp(e))throw new Hp("The method doesn't accept regular expressions");return e},qp=p,Bp=na,Qp=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[$p]=!1,"/./"[e](t)}catch(e){}}return!1},Vp=l("".indexOf);Np({target:"String",proto:!0,forced:!Qp("includes")},{includes:function(e){return!!~Vp(Bp(qp(this)),Bp(Mp(e)),arguments.length>1?arguments[1]:void 0)}});var zp=Xn("String","includes"),Gp=$e,Jp=jp,Wp=zp,Xp=Array.prototype,Kp=String.prototype,Zp=t((function(e){var t=e.includes;return e===Xp||Gp(Xp,e)&&t===Xp.includes?Jp:"string"==typeof e||e===Kp||Gp(Kp,e)&&t===Kp.includes?Wp:t})),Yp=Mr,ef=Date,tf=l(ef.prototype.getTime);Yp({target:"Date",stat:!0},{now:function(){return tf(new ef)}});var rf=t(je.Date.now),nf=pe,of=r,sf=l,af=fi,lf=jo,cf=_e,uf=sf(ve.f),df=sf([].push),pf=nf&&of((function(){var e=Object.create(null);return e[2]=2,!uf(e,2)})),ff=function(e){return function(t){for(var r,n=cf(t),o=lf(n),i=pf&&null===af(n),s=o.length,a=0,l=[];s>a;)r=o[a++],nf&&!(i?r in n:uf(n,r))||df(l,e?[r,n[r]]:n[r]);return l}},hf={entries:ff(!0),values:ff(!1)}.entries;Mr({target:"Object",stat:!0},{entries:function(e){return hf(e)}});var gf=t(je.Object.entries),vf=m,yf=xn,mf=de,wf=ur,bf=Ae,Sf=Ir,Ef=Error,Cf=l("".replace),xf=String(new Ef("zxcasd").stack),Pf=/\n\s*at [^:]*:[^\n]*/,kf=Pf.test(xf),Rf=Ee,Of=!r((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",Rf(1,7)),7!==e.stack)})),If=Ir,_f=function(e,t){if(kf&&"string"==typeof e&&!Ef.prepareStackTrace)for(;t--;)e=Cf(e,Pf,"");return e},Uf=Of,Af=Error.captureStackTrace,jf=cr,Tf=ge,Df=gr,Lf=at,Ff=Rc,Hf=tn,$f=$e,Nf=va,Mf=ca,qf=Sc,Bf=TypeError,Qf=function(e,t){this.stopped=e,this.result=t},Vf=Qf.prototype,zf=function(e,t,r){var n,o,i,s,a,l,c,u=r&&r.that,d=!(!r||!r.AS_ENTRIES),p=!(!r||!r.IS_RECORD),f=!(!r||!r.IS_ITERATOR),h=!(!r||!r.INTERRUPTED),g=jf(t,u),v=function(e){return n&&qf(n,"normal",e),new Qf(!0,e)},y=function(e){return d?(Df(e),h?g(e[0],e[1],v):g(e[0],e[1])):h?g(e,v):g(e)};if(p)n=e.iterator;else if(f)n=e;else{if(!(o=Mf(e)))throw new Bf(Lf(e)+" is not iterable");if(Ff(o)){for(i=0,s=Hf(e);s>i;i++)if((a=y(e[i]))&&$f(Vf,a))return a;return new Qf(!1)}n=Nf(e,o)}for(l=p?e.next:n.next;!(c=Tf(l,n)).done;){try{a=y(c.value)}catch(e){qf(n,"throw",e)}if("object"==typeof a&&a&&$f(Vf,a))return a}return new Qf(!1)},Gf=na,Jf=Mr,Wf=$e,Xf=fi,Kf=as,Zf=function(e,t,r){for(var n=yf(t),o=wf.f,i=mf.f,s=0;s<n.length;s++){var a=n[s];vf(e,a)||r&&vf(r,a)||o(e,a,i(t,a))}},Yf=oi,eh=Ir,th=Ee,rh=function(e,t){bf(t)&&"cause"in t&&Sf(e,"cause",t.cause)},nh=function(e,t,r,n){Uf&&(Af?Af(e,t):If(e,"stack",_f(r,n)))},oh=zf,ih=function(e,t){return void 0===e?arguments.length<2?"":t:Gf(e)},sh=Tt("toStringTag"),ah=Error,lh=[].push,ch=function(e,t){var r,n=Wf(uh,this);Kf?r=Kf(new ah,n?Xf(this):uh):(r=n?this:Yf(uh),eh(r,sh,"Error")),void 0!==t&&eh(r,"message",ih(t)),nh(r,ch,r.stack,1),arguments.length>2&&rh(r,arguments[2]);var o=[];return oh(e,lh,{that:o}),eh(r,"errors",o),r};Kf?Kf(ch,ah):Zf(ch,ah,{name:!0});var uh=ch.prototype=Yf(ah.prototype,{constructor:th(1,ch),message:th(1,""),name:th(1,"AggregateError")});Jf({global:!0,constructor:!0,arity:2},{AggregateError:ch});var dh,ph,fh,hh,gh=$,vh=qe,yh=E,mh=function(e){return vh.slice(0,e.length)===e},wh=mh("Bun/")?"BUN":mh("Cloudflare-Workers")?"CLOUDFLARE":mh("Deno/")?"DENO":mh("Node.js/")?"NODE":gh.Bun&&"string"==typeof Bun.version?"BUN":gh.Deno&&"object"==typeof Deno.version?"DENO":"process"===yh(gh.process)?"NODE":gh.window&&gh.document?"BROWSER":"REST",bh="NODE"===wh,Sh=He,Eh=Xs,Ch=pe,xh=Tt("species"),Ph=Vc,kh=at,Rh=TypeError,Oh=gr,Ih=function(e){if(Ph(e))return e;throw new Rh(kh(e)+" is not a constructor")},_h=c,Uh=Tt("species"),Ah=function(e,t){var r,n=Oh(e).constructor;return void 0===n||_h(r=Oh(n)[Uh])?t:Ih(r)},jh=/(?:ipad|iphone|ipod).*applewebkit/i.test(qe),Th=$,Dh=ae,Lh=cr,Fh=k,Hh=m,$h=r,Nh=Mo,Mh=wa,qh=Jt,Bh=ma,Qh=jh,Vh=bh,zh=Th.setImmediate,Gh=Th.clearImmediate,Jh=Th.process,Wh=Th.Dispatch,Xh=Th.Function,Kh=Th.MessageChannel,Zh=Th.String,Yh=0,eg={},tg="onreadystatechange";$h((function(){dh=Th.location}));var rg=function(e){if(Hh(eg,e)){var t=eg[e];delete eg[e],t()}},ng=function(e){return function(){rg(e)}},og=function(e){rg(e.data)},ig=function(e){Th.postMessage(Zh(e),dh.protocol+"//"+dh.host)};zh&&Gh||(zh=function(e){Bh(arguments.length,1);var t=Fh(e)?e:Xh(e),r=Mh(arguments,1);return eg[++Yh]=function(){Dh(t,void 0,r)},ph(Yh),Yh},Gh=function(e){delete eg[e]},Vh?ph=function(e){Jh.nextTick(ng(e))}:Wh&&Wh.now?ph=function(e){Wh.now(ng(e))}:Kh&&!Qh?(hh=(fh=new Kh).port2,fh.port1.onmessage=og,ph=Lh(hh.postMessage,hh)):Th.addEventListener&&Fh(Th.postMessage)&&!Th.importScripts&&dh&&"file:"!==dh.protocol&&!$h(ig)?(ph=ig,Th.addEventListener("message",og,!1)):ph=tg in qh("script")?function(e){Nh.appendChild(qh("script"))[tg]=function(){Nh.removeChild(this),rg(e)}}:function(e){setTimeout(ng(e),0)});var sg={set:zh,clear:Gh},ag=function(){this.head=null,this.tail=null};ag.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var lg,cg,ug,dg,pg,fg=ag,hg=/ipad|iphone|ipod/i.test(qe)&&"undefined"!=typeof Pebble,gg=/web0s(?!.*chrome)/i.test(qe),vg=$,yg=Qs,mg=cr,wg=sg.set,bg=fg,Sg=jh,Eg=hg,Cg=gg,xg=bh,Pg=vg.MutationObserver||vg.WebKitMutationObserver,kg=vg.document,Rg=vg.process,Og=vg.Promise,Ig=yg("queueMicrotask");if(!Ig){var _g=new bg,Ug=function(){var e,t;for(xg&&(e=Rg.domain)&&e.exit();t=_g.get();)try{t()}catch(e){throw _g.head&&lg(),e}e&&e.enter()};Sg||xg||Cg||!Pg||!kg?!Eg&&Og&&Og.resolve?((dg=Og.resolve(void 0)).constructor=Og,pg=mg(dg.then,dg),lg=function(){pg(Ug)}):xg?lg=function(){Rg.nextTick(Ug)}:(wg=mg(wg,vg),lg=function(){wg(Ug)}):(cg=!0,ug=kg.createTextNode(""),new Pg(Ug).observe(ug,{characterData:!0}),lg=function(){ug.data=cg=!cg}),Ig=function(e){_g.head||lg(),_g.add(e)}}var Ag=Ig,jg=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Tg=$.Promise,Dg=$,Lg=Tg,Fg=k,Hg=D,$g=Uc,Ng=Tt,Mg=wh,qg=We,Bg=Lg&&Lg.prototype,Qg=Ng("species"),Vg=!1,zg=Fg(Dg.PromiseRejectionEvent),Gg=Hg("Promise",(function(){var e=$g(Lg),t=e!==String(Lg);if(!t&&66===qg)return!0;if(!Bg.catch||!Bg.finally)return!0;if(!qg||qg<51||!/native code/.test(e)){var r=new Lg((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};if((r.constructor={})[Qg]=n,!(Vg=r.then((function(){}))instanceof n))return!0}return!(t||"BROWSER"!==Mg&&"DENO"!==Mg||zg)})),Jg={CONSTRUCTOR:Gg,REJECTION_EVENT:zg,SUBCLASSING:Vg},Wg={},Xg=dt,Kg=TypeError,Zg=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw new Kg("Bad Promise constructor");t=e,r=n})),this.resolve=Xg(t),this.reject=Xg(r)};Wg.f=function(e){return new Zg(e)};var Yg,ev,tv=Mr,rv=bh,nv=$,ov=ge,iv=gi,sv=Bi,av=function(e){var t=Sh(e);Ch&&t&&!t[xh]&&Eh(t,xh,{configurable:!0,get:function(){return this}})},lv=dt,cv=k,uv=Ae,dv=ea,pv=Ah,fv=sg.set,hv=Ag,gv=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(e){}},vv=jg,yv=fg,mv=Co,wv=Tg,bv=Jg,Sv=Wg,Ev="Promise",Cv=bv.CONSTRUCTOR,xv=bv.REJECTION_EVENT,Pv=mv.getterFor(Ev),kv=mv.set,Rv=wv&&wv.prototype,Ov=wv,Iv=Rv,_v=nv.TypeError,Uv=nv.document,Av=nv.process,jv=Sv.f,Tv=jv,Dv=!!(Uv&&Uv.createEvent&&nv.dispatchEvent),Lv="unhandledrejection",Fv=function(e){var t;return!(!uv(e)||!cv(t=e.then))&&t},Hv=function(e,t){var r,n,o,i=t.value,s=1===t.state,a=s?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{a?(s||(2===t.rejection&&Bv(t),t.rejection=1),!0===a?r=i:(u&&u.enter(),r=a(i),u&&(u.exit(),o=!0)),r===e.promise?c(new _v("Promise-chain cycle")):(n=Fv(r))?ov(n,r,l,c):l(r)):c(i)}catch(e){u&&!o&&u.exit(),c(e)}},$v=function(e,t){e.notified||(e.notified=!0,hv((function(){for(var r,n=e.reactions;r=n.get();)Hv(r,e);e.notified=!1,t&&!e.rejection&&Mv(e)})))},Nv=function(e,t,r){var n,o;Dv?((n=Uv.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),nv.dispatchEvent(n)):n={promise:t,reason:r},!xv&&(o=nv["on"+e])?o(n):e===Lv&&gv("Unhandled promise rejection",r)},Mv=function(e){ov(fv,nv,(function(){var t,r=e.facade,n=e.value;if(qv(e)&&(t=vv((function(){rv?Av.emit("unhandledRejection",n,r):Nv(Lv,r,n)})),e.rejection=rv||qv(e)?2:1,t.error))throw t.value}))},qv=function(e){return 1!==e.rejection&&!e.parent},Bv=function(e){ov(fv,nv,(function(){var t=e.facade;rv?Av.emit("rejectionHandled",t):Nv("rejectionhandled",t,e.value)}))},Qv=function(e,t,r){return function(n){e(t,n,r)}},Vv=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,$v(e,!0))},zv=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new _v("Promise can't be resolved itself");var n=Fv(t);n?hv((function(){var r={done:!1};try{ov(n,t,Qv(zv,r,e),Qv(Vv,r,e))}catch(t){Vv(r,t,e)}})):(e.value=t,e.state=1,$v(e,!1))}catch(t){Vv({done:!1},t,e)}}};Cv&&(Iv=(Ov=function(e){dv(this,Iv),lv(e),ov(Yg,this);var t=Pv(this);try{e(Qv(zv,t),Qv(Vv,t))}catch(e){Vv(t,e)}}).prototype,(Yg=function(e){kv(this,{type:Ev,done:!1,notified:!1,parent:!1,reactions:new yv,rejection:!1,state:0,value:null})}).prototype=iv(Iv,"then",(function(e,t){var r=Pv(this),n=jv(pv(this,Ov));return r.parent=!0,n.ok=!cv(e)||e,n.fail=cv(t)&&t,n.domain=rv?Av.domain:void 0,0===r.state?r.reactions.add(n):hv((function(){Hv(n,r)})),n.promise})),ev=function(){var e=new Yg,t=Pv(e);this.promise=e,this.resolve=Qv(zv,t),this.reject=Qv(Vv,t)},Sv.f=jv=function(e){return e===Ov||undefined===e?new ev(e):Tv(e)}),tv({global:!0,constructor:!0,wrap:!0,forced:Cv},{Promise:Ov}),sv(Ov,Ev,!1,!0),av(Ev);var Gv=Tt("iterator"),Jv=!1;try{var Wv=0,Xv={next:function(){return{done:!!Wv++}},return:function(){Jv=!0}};Xv[Gv]=function(){return this},Array.from(Xv,(function(){throw 2}))}catch(e){}var Kv=Tg,Zv=function(e,t){try{if(!t&&!Jv)return!1}catch(e){return!1}var r=!1;try{var n={};n[Gv]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(e){}return r},Yv=Jg.CONSTRUCTOR||!Zv((function(e){Kv.all(e).then(void 0,(function(){}))})),ey=ge,ty=dt,ry=Wg,ny=jg,oy=zf;Mr({target:"Promise",stat:!0,forced:Yv},{all:function(e){var t=this,r=ry.f(t),n=r.resolve,o=r.reject,i=ny((function(){var r=ty(t.resolve),i=[],s=0,a=1;oy(e,(function(e){var l=s++,c=!1;a++,ey(r,t,e).then((function(e){c||(c=!0,i[l]=e,--a||n(i))}),o)})),--a||n(i)}));return i.error&&o(i.value),r.promise}});var iy=Mr,sy=Jg.CONSTRUCTOR;Tg&&Tg.prototype,iy({target:"Promise",proto:!0,forced:sy,real:!0},{catch:function(e){return this.then(void 0,e)}});var ay=ge,ly=dt,cy=Wg,uy=jg,dy=zf;Mr({target:"Promise",stat:!0,forced:Yv},{race:function(e){var t=this,r=cy.f(t),n=r.reject,o=uy((function(){var o=ly(t.resolve);dy(e,(function(e){ay(o,t,e).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}});var py=Wg;Mr({target:"Promise",stat:!0,forced:Jg.CONSTRUCTOR},{reject:function(e){var t=py.f(this);return(0,t.reject)(e),t.promise}});var fy=gr,hy=Ae,gy=Wg,vy=function(e,t){if(fy(e),hy(t)&&t.constructor===e)return t;var r=gy.f(e);return(0,r.resolve)(t),r.promise},yy=Mr,my=Tg,wy=Jg.CONSTRUCTOR,by=vy,Sy=He("Promise"),Ey=!wy;yy({target:"Promise",stat:!0,forced:true},{resolve:function(e){return by(Ey&&this===Sy?my:this,e)}});var Cy=ge,xy=dt,Py=Wg,ky=jg,Ry=zf;Mr({target:"Promise",stat:!0,forced:Yv},{allSettled:function(e){var t=this,r=Py.f(t),n=r.resolve,o=r.reject,i=ky((function(){var r=xy(t.resolve),o=[],i=0,s=1;Ry(e,(function(e){var a=i++,l=!1;s++,Cy(r,t,e).then((function(e){l||(l=!0,o[a]={status:"fulfilled",value:e},--s||n(o))}),(function(e){l||(l=!0,o[a]={status:"rejected",reason:e},--s||n(o))}))})),--s||n(o)}));return i.error&&o(i.value),r.promise}});var Oy=ge,Iy=dt,_y=He,Uy=Wg,Ay=jg,jy=zf,Ty="No one promise resolved";Mr({target:"Promise",stat:!0,forced:Yv},{any:function(e){var t=this,r=_y("AggregateError"),n=Uy.f(t),o=n.resolve,i=n.reject,s=Ay((function(){var n=Iy(t.resolve),s=[],a=0,l=1,c=!1;jy(e,(function(e){var u=a++,d=!1;l++,Oy(n,t,e).then((function(e){d||c||(c=!0,o(e))}),(function(e){d||c||(d=!0,s[u]=e,--l||i(new r(s,Ty)))}))})),--l||i(new r(s,Ty))}));return s.error&&i(s.value),n.promise}});var Dy=Mr,Ly=ae,Fy=wa,Hy=Wg,$y=dt,Ny=jg,My=$.Promise,qy=!1;Dy({target:"Promise",stat:!0,forced:!My||!My.try||Ny((function(){My.try((function(e){qy=8===e}),8)})).error||!qy},{try:function(e){var t=arguments.length>1?Fy(arguments,1):[],r=Hy.f(this),n=Ny((function(){return Ly($y(e),void 0,t)}));return(n.error?r.reject:r.resolve)(n.value),r.promise}});var By=Wg;Mr({target:"Promise",stat:!0},{withResolvers:function(){var e=By.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var Qy=Mr,Vy=Tg,zy=r,Gy=He,Jy=k,Wy=Ah,Xy=vy,Ky=Vy&&Vy.prototype;Qy({target:"Promise",proto:!0,real:!0,forced:!!Vy&&zy((function(){Ky.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=Wy(this,Gy("Promise")),r=Jy(e);return this.then(r?function(r){return Xy(t,e()).then((function(){return r}))}:e,r?function(r){return Xy(t,e()).then((function(){throw r}))}:e)}});var Zy=je.Promise,Yy={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},em=$,tm=Bi,rm=ro;for(var nm in Yy)tm(em[nm],nm),rm[nm]=rm.Array;var om=t(Zy),im=Xn("Array","values"),sm=Ti,am=m,lm=$e,cm=im,um=Array.prototype,dm={DOMTokenList:!0,NodeList:!0},pm=t((function(e){var t=e.values;return e===um||lm(um,e)&&t===um.values||am(dm,sm(e))?cm:t}));Mr({target:"Object",stat:!0},{ownProp:m});var fm=t(je.Object.ownProp),hm="\t\n\v\f\r                　\u2028\u2029\ufeff",gm=p,vm=na,ym=hm,mm=l("".replace),wm=RegExp("^["+ym+"]+"),bm=RegExp("(^|[^"+ym+"])["+ym+"]+$"),Sm=function(e){return function(t){var r=vm(gm(t));return 1&e&&(r=mm(r,wm,"")),2&e&&(r=mm(r,bm,"$1")),r}},Em={start:Sm(1),end:Sm(2),trim:Sm(3)},Cm=Io.PROPER,xm=r,Pm=hm,km=Em.trim;Mr({target:"String",proto:!0,forced:function(e){return xm((function(){return!!Pm[e]()||"​᠎"!=="​᠎"[e]()||Cm&&Pm[e].name!==e}))}("trim")},{trim:function(){return km(this)}});var Rm=Xn("String","trim"),Om=$e,Im=Rm,_m=String.prototype,Um=t((function(e){var t=e.trim;return"string"==typeof e||e===_m||Om(_m,e)&&t===_m.trim?Im:t})),Am=g,jm=jo;Mr({target:"Object",stat:!0,forced:r((function(){jm(1)}))},{keys:function(e){return jm(Am(e))}});var Tm=l,Dm=m,Lm=SyntaxError,Fm=parseInt,Hm=String.fromCharCode,$m=Tm("".charAt),Nm=Tm("".slice),Mm=Tm(/./.exec),qm={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t"},Bm=/^[\da-f]{4}$/i,Qm=/^[\u0000-\u001F]$/,Vm=Mr,zm=pe,Gm=$,Jm=He,Wm=l,Xm=ge,Km=k,Zm=Ae,Ym=x,ew=m,tw=na,rw=tn,nw=On,ow=r,iw=function(e,t){for(var r=!0,n="";t<e.length;){var o=$m(e,t);if("\\"===o){var i=Nm(e,t,t+2);if(Dm(qm,i))n+=qm[i],t+=2;else{if("\\u"!==i)throw new Lm('Unknown escape sequence: "'+i+'"');var s=Nm(e,t+=2,t+4);if(!Mm(Bm,s))throw new Lm("Bad Unicode escape at: "+t);n+=Hm(Fm(s,16)),t+=4}}else{if('"'===o){r=!1,t++;break}if(Mm(Qm,o))throw new Lm("Bad control character in string literal at: "+t);n+=o,t++}}if(r)throw new Lm("Unterminated string at: "+t);return{value:n,end:t}},sw=Ye,aw=Gm.JSON,lw=Gm.Number,cw=Gm.SyntaxError,uw=aw&&aw.parse,dw=Jm("Object","keys"),pw=Object.getOwnPropertyDescriptor,fw=Wm("".charAt),hw=Wm("".slice),gw=Wm(/./.exec),vw=Wm([].push),yw=/^\d$/,mw=/^[1-9]$/,ww=/^[\d-]$/,bw=/^[\t\n\r ]$/,Sw=function(e,t,r,n){var o,i,s,a,l,c=e[t],u=n&&c===n.value,d=u&&"string"==typeof n.source?{source:n.source}:{};if(Zm(c)){var p=Ym(c),f=u?n.nodes:p?[]:{};if(p)for(o=f.length,s=rw(c),a=0;a<s;a++)Ew(c,a,Sw(c,""+a,r,a<o?f[a]:void 0));else for(i=dw(c),s=rw(i),a=0;a<s;a++)l=i[a],Ew(c,l,Sw(c,l,r,ew(f,l)?f[l]:void 0))}return Xm(r,e,t,c,d)},Ew=function(e,t,r){if(zm){var n=pw(e,t);if(n&&!n.configurable)return}void 0===r?delete e[t]:nw(e,t,r)},Cw=function(e,t,r,n){this.value=e,this.end=t,this.source=r,this.nodes=n},xw=function(e,t){this.source=e,this.index=t};xw.prototype={fork:function(e){return new xw(this.source,e)},parse:function(){var e=this.source,t=this.skip(bw,this.index),r=this.fork(t),n=fw(e,t);if(gw(ww,n))return r.number();switch(n){case"{":return r.object();case"[":return r.array();case'"':return r.string();case"t":return r.keyword(!0);case"f":return r.keyword(!1);case"n":return r.keyword(null)}throw new cw('Unexpected character: "'+n+'" at: '+t)},node:function(e,t,r,n,o){return new Cw(t,n,e?null:hw(this.source,r,n),o)},object:function(){for(var e=this.source,t=this.index+1,r=!1,n={},o={};t<e.length;){if(t=this.until(['"',"}"],t),"}"===fw(e,t)&&!r){t++;break}var i=this.fork(t).string(),s=i.value;t=i.end,t=this.until([":"],t)+1,t=this.skip(bw,t),i=this.fork(t).parse(),nw(o,s,i),nw(n,s,i.value),t=this.until([",","}"],i.end);var a=fw(e,t);if(","===a)r=!0,t++;else if("}"===a){t++;break}}return this.node(1,n,this.index,t,o)},array:function(){for(var e=this.source,t=this.index+1,r=!1,n=[],o=[];t<e.length;){if(t=this.skip(bw,t),"]"===fw(e,t)&&!r){t++;break}var i=this.fork(t).parse();if(vw(o,i),vw(n,i.value),t=this.until([",","]"],i.end),","===fw(e,t))r=!0,t++;else if("]"===fw(e,t)){t++;break}}return this.node(1,n,this.index,t,o)},string:function(){var e=this.index,t=iw(this.source,this.index+1);return this.node(0,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,r=t;if("-"===fw(e,r)&&r++,"0"===fw(e,r))r++;else{if(!gw(mw,fw(e,r)))throw new cw("Failed to parse number at: "+r);r=this.skip(yw,r+1)}if(("."===fw(e,r)&&(r=this.skip(yw,r+1)),"e"===fw(e,r)||"E"===fw(e,r))&&(r++,"+"!==fw(e,r)&&"-"!==fw(e,r)||r++,r===(r=this.skip(yw,r))))throw new cw("Failed to parse number's exponent value at: "+r);return this.node(0,lw(hw(e,t,r)),t,r)},keyword:function(e){var t=""+e,r=this.index,n=r+t.length;if(hw(this.source,r,n)!==t)throw new cw("Failed to parse value at: "+r);return this.node(0,e,r,n)},skip:function(e,t){for(var r=this.source;t<r.length&&gw(e,fw(r,t));t++);return t},until:function(e,t){t=this.skip(bw,t);for(var r=fw(this.source,t),n=0;n<e.length;n++)if(e[n]===r)return t;throw new cw('Unexpected character: "'+r+'" at: '+t)}};var Pw=ow((function(){var e,t="9007199254740993";return uw(t,(function(t,r,n){e=n.source})),e!==t})),kw=sw&&!ow((function(){return 1/uw("-0 \t")!=-1/0}));Vm({target:"JSON",stat:!0,forced:Pw},{parse:function(e,t){return kw&&!Km(t)?uw(e):function(e,t){e=tw(e);var r=new xw(e,0),n=r.parse(),o=n.value,i=r.skip(bw,n.end);if(i<e.length)throw new cw('Unexpected extra character: "'+fw(e,i)+'" after the parsed data at: '+i);return Km(t)?Sw({"":o},"",t,n):o}(e,t)}});var Rw,Ow=t(je.JSON.parse);const Iw=["type"];function _w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),to(r).apply(r,n)}return r}function Uw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_w(Object(r),!0).forEach((function(t){Tw(e,t,r[t])})):jn?Object.defineProperties(e,jn(r)):_w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Aw(e,t,r,n,o,i,s){try{var a=e[i](s),l=a.value}catch(e){return void r(e)}a.done?t(l):om.resolve(l).then(n,o)}function jw(e){return function(){var t=this,r=arguments;return new om((function(n,o){var i=e.apply(t,r);function s(e){Aw(i,n,o,s,a,"next",e)}function a(e){Aw(i,n,o,s,a,"throw",e)}s(void 0)}))}}function Tw(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Dw=()=>({pageUrl:Lw(),referrer:Fw()}),Lw=()=>{const e=Hw((()=>window.location.ancestorOrigins))||[],t=[];let r,n=window;for(;n!==top;)to(t).call(t,n),n=n.parent;to(t).call(t,n);for(let n=t.length-1;n>=0&&!r;n--)r=Hw((()=>t[n].location.href)),0!==n&&(r||(r=Hw((()=>t[n-1].document.referrer))),r||(r=e[n-1]));return null!=r?new wp(r):void 0},Fw=()=>Hw((()=>{var e;return null===(e=window.top)||void 0===e?void 0:e.document.referrer})),Hw=e=>{try{return e()}catch(e){return}},$w=e=>{const t=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(parseInt("0x"+t,16))));return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")};for(var Nw=[],Mw=0;Mw<64;)Nw[Mw]=0|4294967296*Math.sin(++Mw%Math.PI);function qw(e){var t,r,n,o=[t=1732584193,r=4023233417,~t,~r],i=[],s=unescape(encodeURI(e))+"",a=s.length;for(e=--a/4+2|15,i[--e]=8*a;~a;)i[a>>2]|=s.charCodeAt(a)<<8*a--;for(Mw=s=0;Mw<e;Mw+=16){for(a=o;s<64;a=[n=a[3],t+((n=a[0]+[t&r|~t&n,n&t|~n&r,t^r^n,r^(t|~n)][a=s>>4]+Nw[s]+~~i[Mw|15&[s,5*s+1,3*s+5,7*s][a]])<<(a=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*a+s++%4])|n>>>-a),t,r])t=0|a[1],r=a[2];for(s=4;s;)o[--s]+=a[s]}for(e="";s<32;)e+=(o[s>>3]>>4*(1^s++)&15).toString(16);return e}function Bw(e){var t,r,n,o,i,s=[],a=[r=1732584193,n=4023233417,~r,~n,3285377520],l=[],c=unescape(encodeURI(e))+"",u=c.length;for(l[e=--u/4+2|15]=8*u;~u;)l[u>>2]|=c.charCodeAt(u)<<8*~u--;for(t=u=0;t<e;t+=16){for(r=a;u<80;r=[r[4]+(s[u]=u<16?~~l[t+u]:2*c|c<0)+1518500249+[n&o|~n&i,c=341275144+(n^o^i),882459459+(n&o|n&i|o&i),c+1535694389][u++/5>>2]+((c=r[0])<<5|c>>>27),c,n<<30|n>>>2,o,i])c=s[u-3]^s[u-8]^s[u-14]^s[u-16],n=r[1],o=r[2],i=r[3];for(u=5;u;)a[--u]+=r[u]}for(c="";u<40;)c+=(a[u>>3]>>4*(7-u++)&15).toString(16);return c}for(var Qw,Vw=18,zw=[],Gw=[];Vw>1;Vw--)for(Qw=Vw;Qw<320;)zw[Qw+=Vw]=1;function Jw(e,t){return 4294967296*Math.pow(e,1/t)|0}for(Qw=0;Qw<64;)zw[++Vw]||(Gw[Qw]=Jw(Vw,2),zw[Qw++]=Jw(Vw,3));function Ww(e,t){return e>>>t|e<<-t}function Xw(e){var t=Gw.slice(Vw=Qw=0,8),r=[],n=unescape(encodeURI(e))+"",o=n.length;for(r[e=--o/4+2|15]=8*o;~o;)r[o>>2]|=n.charCodeAt(o)<<8*~o--;for(o=[];Vw<e;Vw+=16){for(Jw=t.slice();Qw<64;Up(Jw).call(Jw,n+(Ww(n=Jw[0],2)^Ww(n,13)^Ww(n,22))+(n&Jw[1]^Jw[1]&Jw[2]^Jw[2]&n)))Jw[3]+=n=0|(o[Qw]=Qw<16?~~r[Qw+Vw]:(Ww(n=o[Qw-2],17)^Ww(n,19)^n>>>10)+o[Qw-7]+(Ww(n=o[Qw-15],7)^Ww(n,18)^n>>>3)+o[Qw-16])+Jw.pop()+(Ww(n=Jw[4],6)^Ww(n,11)^Ww(n,25))+(n&Jw[5]^~n&Jw[6])+zw[Qw++];for(Qw=8;Qw;)t[--Qw]+=Jw[Qw]}for(n="";Qw<64;)n+=(t[Qw>>3]>>4*(7-Qw++)&15).toString(16);return n}const Kw="[\\s'\"]",Zw=e=>`(?:${(e=>`(?:${e?`^${Kw}*`:"\\b"}([A-Z0-9._%+\\-]+@[A-Z0-9.\\-]+\\.[A-Z]{2,})${e?`${Kw}*$`:"\\b"})`)(e)}|${(e=>`(?:${e?`^${Kw}*`:"\\b"}((?:[A-Z0-9._\\-]|%25|%2B)+%40[A-Z0-9.\\-]+\\.[A-Z]{2,})${e?`${Kw}*$`:"\\b"})`)(e)})`,Yw=e=>`(?:${(e=>`(?:${e?`^${Kw}*`:"\\b"}([A-F0-9]{32,64})${e?`${Kw}*$`:"\\b"})`)(e)}|${Zw(e)})`,eb=new RegExp(Zw(!1),"gi"),tb=new RegExp(Yw(!0),"i"),rb=new RegExp(Yw(!1),"gi"),nb=new Map([[32,"md5"],[40,"sha1"],[64,"sha256"]]),ob=(e,t,r,n)=>e.substring(0,t)+n+e.substring(r),ib=e=>{try{const t=[];let r=e,n=eb.exec(e),o=0;for(;n;){let i;i=n[1]?sb(n[1]):sb(decodeURIComponent(n[2])),to(t).call(t,i),r=ob(r,o+n.index,o+n.index+n[0].length,i.md5),o+=i.md5.length-n[0].length,n=eb.exec(e)}return{stringWithoutRawEmails:r,hashesFromOriginalString:t}}finally{eb.lastIndex=0}},sb=e=>{const t=e.toLowerCase();return{md5:qw(t),sha1:Bw(t),sha256:Xw(t)}},ab=(e,t)=>"string"==typeof t?t.replace(eb,"*********"):t,lb=e=>{if(null!=e[1]){const r=(t=e[1],nb.get(t.length));if(null!=r)return{type:"hashed",value:{type:r,value:e[1]}}}else{if(null!=e[2])return{type:"raw",value:e[2]};if(null!=e[3])return{type:"raw",value:decodeURIComponent(e[3])}}var t},cb=e=>{const t=tb.exec(e);if(t)return lb(t)},ub=new RegExp(Zw(!0),"iu");class db{constructor(e=[]){Tw(this,"tuples",void 0),this.tuples=e}static empty(){return new db}add(e,t,r={}){const{stripEmpty:n=!0,prepend:o=!1,base64UrlEncode:i=!1}=r;if(""===e)return this;if(n&&""===t)return this;const s="string"==typeof t&&ub.test(t)?sb(t).md5:t,a=ub.test(e)?sb(e).md5:e,l=i?$w(s.toString()):s;var c,u;return o?(Up(c=this.tuples).call(c,[a,l]),this):(to(u=this.tuples).call(u,[a,l]),this)}addArray(e,t,r={}){return t.forEach((t=>this.add(e,t,r))),this}valuesFor(e){return this.tuples.filter((([t])=>t===e)).map((([,e])=>e))}addOptional(e,t,r={}){return null!=t?this.add(e,t,r):this}addParamsMap(e){for(const t in e){const r=e[t];Array.isArray(r)?r.forEach((e=>this.add(t,e))):this.add(t,r)}return this}copy(){return new db(this.tuples.slice())}build(){let e="";return this.tuples.forEach((([t,r])=>{const n=0===e.length?"?":"&";e=`${e}${n}${encodeURIComponent(t)}=${encodeURIComponent(r)}`})),e}}class pb extends Error{constructor(e,t,r){super(t,r),Tw(this,"cause",void 0),this.name=e,r&&r.cause&&(this.cause=r.cause)}}class fb extends pb{constructor(){super("BlockedByConsentError","Blocked by consent settings")}}const hb=e=>e instanceof fb||e instanceof Error&&null!=e.cause&&hb(e.cause);class gb{constructor(e){var t;Tw(this,"callHandler",void 0),Tw(this,"baseQuery",void 0),Tw(this,"pixelBaseUrl",void 0),Tw(this,"sampleRate",void 0),this.callHandler=e.callHandler;const r=Dw();let n;null!=r.pageUrl&&(n=new wp(r.pageUrl),n.search=""),this.baseQuery=db.empty().add("tv",e.version).addOptional("refr",r.referrer).addOptional("pu",null===(t=n)||void 0===t?void 0:t.toString()),this.pixelBaseUrl=e.pixelBaseUrl,this.sampleRate=e.sampleRate}handleEvent(e){var t=this;return jw((function*(){if("error"===e.level&&!hb(e.error)&&t.isSampled()){const r=vb(e.error);for(const n of r)try{yield t.sendError(n,e.context)}catch(e){}}}))()}isSampled(){return Math.random()<=this.sampleRate}sendError(e,t){const r=null!=t&&"appId"in t&&"string"==typeof t.appId?t.appId:void 0,n=null!=t&&"distributorId"in t&&"string"==typeof t.distributorId?t.distributorId:void 0,o=null!=t&&"wrapperName"in t&&"string"==typeof t.wrapperName?t.wrapperName:void 0,i=this.baseQuery.copy().addOptional("aid",r).addOptional("did",n).addOptional("wpn",o).add("ae",JSON.stringify(e),{base64UrlEncode:!0}).build(),s=`${this.pixelBaseUrl}/p${i}`;return this.callHandler.pixelGet(s)}}const vb=e=>{const t=[];let r=e;for(;null!=r&&"object"==typeof r&&r instanceof Error;)to(t).call(t,{name:r.name.substring(0,120),message:r.message.substring(0,120),stackTrace:yb(r).substring(0,1e3)}),r=r.cause;return t},yb=e=>{let t=e;const r=[];for(;null!=t&&"object"==typeof t&&t instanceof Error;){const e=(n=t.message,o=120,null!=n?n.substring(0,o):void 0);to(r).call(r,null!=e?e:"No message available"),t=t.cause}var n,o;return r.join("\ncaused by: ")},mb=e=>{let t=window,r=null;for(;!r;){try{e in t.frames&&(r=t)}catch(e){}if(t===window.top||!t.parent)break;t=t.parent}return r},wb=e=>{var t,r,n,o,i;return e.forcedPrivacyMode||null!==(t=null===(r=e.gdpr)||void 0===r?void 0:r.gdprApplies)&&void 0!==t&&t||null!==(n=null===(o=e.gpp)||void 0===o?void 0:Zp(i=o.applicableSections).call(i,2))&&void 0!==n&&n};class bb{fromConsent(e,t){return wb(e)?(t.info("Using blocked call handler due to privacy mode"),new Sb):new Cb(t)}}class Sb{ajaxGet(){return jw((function*(){throw new fb}))()}pixelGet(){return jw((function*(){throw new fb}))()}}const Eb=null!=window.XMLHttpRequest?(e,t,r,n,o)=>(r,i)=>{const s=new XMLHttpRequest,a=rf();if(s.onreadystatechange=()=>{4===s.readyState&&(s.status>=200&&s.status<300||304===s.status?r({getBodyAsText:()=>s.responseText,expiresAt:n(s)}):i(new kb(`Error during XHR call: ${s.status}, url: ${e}`)))},s.ontimeout=()=>{const r=rf()-a;i(new kb(`Timeout after ${r} (${t}), url: ${e}`))},s.open("GET",e,!0),s.timeout=t,s.withCredentials=!0,null!=o)for(const[e,t]of gf(o))null!=t&&s.setRequestHeader(e,t);s.send()}:null!=window.XDomainRequest?(e,t,r,n,o)=>(n,i)=>{const s=new window.XDomainRequest,a=rf();s.onprogress=()=>{},s.onload=()=>n({getBodyAsText:()=>s.responseText}),s.onerror=()=>i(new Rb(`Error during XDR call: ${s.responseText}, url: ${e}`)),s.ontimeout=()=>{const r=rf()-a;i(new Rb(`Timeout after ${r} (${t}), url: ${e}`))},s.open("GET",e),s.timeout=t,null!=o&&r.error(new Ib),s.send()}:(e,t,r,n,o)=>(e,t)=>t(new Pb("No supported request api found"));class Cb{constructor(e){Tw(this,"logger",void 0),this.logger=e}ajaxGet(e){var t=this;return jw((function*(){const{url:r,responseHandler:n,headers:o}=e,i=e.timeout||5e3,s=Eb(r,i,t.logger,t.responseExpires.bind(t),o),a=yield new om(s).catch((e=>{throw new Pb(`Failed sending request to url ${r}`,e)}));return{data:n.apply(a),expiresAt:a.expiresAt}}))()}pixelGet(e){const t=new Image,r=new om(((r,n)=>{t.onload=()=>r(),t.onerror=()=>n(new xb(`Failed loading pixel: ${e}`))}));return t.src=e,r}responseExpires(e){const t=e.getResponseHeader("expires");if(t)try{return new Date(t)}catch(e){return void this.logger.error(new Ob(t))}}}class xb extends pb{constructor(e){super("PixelError",e)}}class Pb extends pb{constructor(e,t){super("RequestError",e,{cause:t})}}class kb extends pb{constructor(e){super("XhrRequestError",e)}}class Rb extends pb{constructor(e){super("XdrRequestError",e)}}class Ob extends pb{constructor(e){super("ExpiresHeaderParsingError","Failed parsing expires header"),Tw(this,"expiresHeader",void 0),this.expiresHeader=e}}class Ib extends pb{constructor(){super("CustomHeadersUnsupportedError","Tried to send custom headers via XDR")}}const _b="1.1",Ub=e=>{let t;return"function"==typeof window.__gpp?(e=>{const t={};return new om(((r,n)=>{const o=e("addEventListener",((e,o)=>jb({evt:e,success:o,resolve:r,reject:n,state:t})),void 0,_b);o&&jb({evt:o,success:!0,resolve:r,reject:n,state:t})})).finally((()=>{t.listenerId&&e("removeEventListener",(()=>{}),t.listenerId,_b)}))})(window.__gpp):(t=mb("__gppLocator"))?(e=>{const t=`li_gpp_call_${Math.random()}`;let r;const n={};return new om(((o,i)=>{r=e=>{var r;const s=null==e||null===(r=e.data)||void 0===r?void 0:r.__gppReturn;(null==s?void 0:s.callId)===t&&jb({evt:s.returnValue,success:s.success,resolve:o,reject:i,state:n})},window.addEventListener("message",r,!1);const s={__gppCall:{command:"addEventListener",version:_b,callId:t}};e.postMessage(s,"*")})).finally((()=>{if(window.removeEventListener("message",r,!1),n.listenerId){const r={__gppCall:{command:"removeEventListener",version:_b,callId:t,parameter:n.listenerId}};e.postMessage(r,"*")}}))})(t):(e.info("GPP API not found"),new om((e=>e(void 0))))},Ab=(e,t)=>{"ready"===e.signalStatus&&t({consentString:e.gppString,applicableSections:e.applicableSections})},jb=({evt:e,success:t,resolve:r,reject:n,state:o})=>{if("number"==typeof(null==e?void 0:e.listenerId)&&(o.listenerId=e.listenerId),null==t||t||n(Error("Failed registering GPP event listener")),e.pingData)if(e.pingData.gppVersion){const t=e.pingData,o=t.gppVersion.toString();o!==_b&&"1.0"!==o?n(Error(`unsupported GPP version ${t.gppVersion}`)):"ready"===t.signalStatus&&Ab(e.pingData,r)}else try{Ab(e.pingData,r)}catch(e){n(Error("Failed to handle GPP event",{cause:e}))}},Tb=()=>`li_tcf_call_${Math.random()}`,Db=function(){var e=jw((function*(e){let t;return"function"==typeof window.__tcfapi?Lb(window.__tcfapi):(t=mb("__tcfapiLocator"))?Fb(t):void e.info("TCF API not found")}));return function(t){return e.apply(this,arguments)}}(),Lb=function(){var e=jw((function*(e){const t={};return new om(((r,n)=>{e("addEventListener",2,((e,o)=>Hb(e,o,r,n,t)))})).finally((()=>{t.listenerId&&e("removeEventListener",2,(()=>{}),t.listenerId)}))}));return function(t){return e.apply(this,arguments)}}(),Fb=function(){var e=jw((function*(e){const t=Tb();let r;const n={};return new om(((o,i)=>{r=e=>{var r;const s=null==e||null===(r=e.data)||void 0===r?void 0:r.__tcfapiReturn;null!=s&&s.success||i(Error("Failed to register TCF API event listener")),(null==s?void 0:s.callId)===t&&Hb(s.returnValue,s.success,o,i,n)},window.addEventListener("message",r,!1);const s={__tcfapiCall:{command:"addEventListener",version:2,callId:t}};e.postMessage(s,"*")})).finally((()=>{if(window.removeEventListener("message",r,!1),n.listenerId){const t={__tcfapiCall:{command:"removeEventListener",version:2,callId:Tb(),parameter:n.listenerId}};e.postMessage(t,"*")}}))}));return function(t){return e.apply(this,arguments)}}(),Hb=(e,t,r,n,o)=>{"number"==typeof(null==e?void 0:e.listenerId)&&(o.listenerId=e.listenerId),t?"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||r({gdprApplies:null==e.gdprApplies?void 0:!!e.gdprApplies,consentString:e.tcString}):n(Error("Failed to register TCF API event listener"))},$b=function(){var e=jw((function*(e){let t;return"function"==typeof window.__uspapi?Nb(window.__uspapi):(t=mb("__uspapiLocator"))?Mb(t):void e.info("USP API not found")}));return function(t){return e.apply(this,arguments)}}(),Nb=function(){var e=jw((function*(e){return new om(((t,r)=>{e("getUSPData",1,((e,n)=>qb(e,n,t,r)))}))}));return function(t){return e.apply(this,arguments)}}(),Mb=function(){var e=jw((function*(e){const t=`li_uspapi_call_${Math.random()}`;let r;return new om(((n,o)=>{r=e=>{var r;const i=null==e||null===(r=e.data)||void 0===r?void 0:r.__uspapiReturn;(null==i?void 0:i.callId)===t&&qb(i.returnValue,i.success,n,o)},window.addEventListener("message",r,!1);const i={__uspapiCall:{command:"getUSPData",version:1,callId:t}};e.postMessage(i,"*")})).finally((()=>{window.removeEventListener("message",r,!1)}))}));return function(t){return e.apply(this,arguments)}}(),qb=(e,t,r,n)=>{t&&"string"==typeof e.uspString?r({consentString:e.uspString}):n(Error("Response from USP API frame was not successful"))},Bb=(e,t)=>{let r;return om.race([e,new om((e=>{r=setTimeout((()=>e(void 0)),t)}))]).finally((()=>clearTimeout(r)))};class Qb{constructor(e){Tw(this,"logger",void 0),Tw(this,"cachedConsent",void 0),this.logger=e}loadConsent(){var e=this;return jw((function*(){return e.cachedConsent||(e.cachedConsent=e.loadConsentUncached()),yield e.cachedConsent}))()}loadConsentUncached(){var e=this;return jw((function*(){return{forcedPrivacyMode:!1,gdpr:yield Bb(Db(e.logger).catch((()=>{})),100),gpp:yield Bb(Ub(e.logger).catch((()=>{})),100),usPrivacy:yield Bb($b(e.logger).catch((()=>{})),100)}}))()}}
/*! js-cookie v3.0.5 | MIT */function Vb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var zb=function e(t,r){function n(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=Vb({},r,o)).expires&&(o.expires=new Date(rf()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in o)o[s]&&(i+="; "+s,!0!==o[s]&&(i+="="+o[s].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+i}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},o=0;o<r.length;o++){var i=r[o].split("="),s=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(n[a]=t.read(s,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",Vb({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,Vb({},this.attributes,t))},withConverter:function(t){return e(Vb({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class Gb{unrestricted(e){return new Wb(e)}fromConsent(e,t){return wb(e)?(t.info("Using blocked storage handler due to privacy mode"),new Jb):new Wb(t)}}class Jb{getCookie(){throw new fb}setCookie(){throw new fb}deleteCookie(){throw new fb}findSimilarCookies(){throw new fb}localStorageIsEnabled(){throw new fb}getDataFromLocalStorage(){throw new fb}setDataInLocalStorage(){throw new fb}removeDataFromLocalStorage(){throw new fb}compatibleWithConsent(){return!0}}class Wb{constructor(e){Tw(this,"logger",void 0),Tw(this,"cachedLocalStorageIsEnabled",void 0),this.logger=e}getCookie(e){try{return zb.get(e)}catch(e){this.logger.error(new Xb("Failed fetching from cookie jar",e))}}setCookie(e,t,r){try{zb.set(e,t,r||{})}catch(e){this.logger.error(new Xb("Failed setting cookie",e))}}deleteCookie(e,t){try{zb.remove(e,{domain:t})}catch(e){this.logger.error(new Xb("Failed removing from cookie jar",e))}}findSimilarCookies(e){try{const t=zb.get();return Object.keys(t).filter((r=>r.indexOf(e)>=0&&null!==t[r])).map((e=>t[e]))}catch(e){return this.logger.error(new Xb("Failed fetching from cookie jar",e)),[]}}localStorageIsEnabled(){return null==this.cachedLocalStorageIsEnabled&&(this.cachedLocalStorageIsEnabled=this.checkLocalStorage()),this.cachedLocalStorageIsEnabled}getDataFromLocalStorage(e){if(this.localStorageIsEnabled())try{var t;return null!==(t=window.localStorage.getItem(e))&&void 0!==t?t:void 0}catch(e){this.logger.error(new Kb("Failed fetching from local storage",{cause:e}))}}setDataInLocalStorage(e,t){if(this.localStorageIsEnabled())try{window.localStorage.setItem(e,t)}catch(e){this.logger.error(new Kb("Failed saving to local storage",{cause:e}))}}removeDataFromLocalStorage(e){if(this.localStorageIsEnabled())try{window.localStorage.removeItem(e)}catch(e){this.logger.error(new Kb("Failed removing from local storage",{cause:e}))}}checkLocalStorage(){let e=!1;try{if(window&&window.localStorage){const t=Math.random().toString();window.localStorage.setItem(t,t),e=window.localStorage.getItem(t)===t,window.localStorage.removeItem(t)}}catch(e){this.logger.error(new Kb("Failed checking local storage",{cause:e}))}return e}}class Xb extends pb{constructor(e,t){super("CookieJarError",e,{cause:t})}}class Kb extends pb{constructor(e,t){super("LocalStorageError",e,t)}}class Zb{constructor(e){Tw(this,"size",void 0),Tw(this,"buffer",[]),Tw(this,"pointer",0),Tw(this,"full",!1),this.size=e}push(e){var t;this.full?this.buffer[this.pointer]=e:(to(t=this.buffer).call(t,e),this.pointer===this.size-1&&(this.full=!0));this.pointer=(this.pointer+1)%this.size}getLast(e){if(e>=this.size)throw new Yb("index out of bounds");const t=(this.pointer+this.size-e)%this.size;return this.buffer[t]}values(){if(!this.full)return this.buffer;const e=[];for(let t=this.pointer;t<this.size;t++)to(e).call(e,this.buffer[t]);for(let t=0;t<this.pointer;t++)to(e).call(e,this.buffer[t]);return e}length(){return this.full?this.size:this.pointer}}class Yb extends pb{constructor(e){super("RingBufferError",e)}}class eS{withContext(e){return new rS(this,e)}static make(e=1e3,t=[]){return new tS(e,t)}}class tS extends eS{constructor(e=1e3,t=[]){super(),Tw(this,"eventHandlers",void 0),Tw(this,"events",void 0),this.eventHandlers=t,this.events=new Zb(e)}debug(e,t){this.pushAndNotify({level:"debug",message:e,context:t,timestamp:new Date})}info(e,t){this.pushAndNotify({level:"info",message:e,context:t,timestamp:new Date})}warn(e,t){this.pushAndNotify({level:"warn",message:e,context:t,timestamp:new Date})}error(e,t){this.pushAndNotify({level:"error",error:e,context:t,timestamp:new Date})}getEvents(){var e;return pm(e=this.events).call(e)}pushAndNotify(e){var t;to(t=this.events).call(t,e),this.eventHandlers.forEach(function(){var t=jw((function*(t){try{yield t.handleEvent(e)}catch(e){console.error("Failed to notify event handler",e)}}));return function(e){return t.apply(this,arguments)}}())}}class rS extends eS{constructor(e,t){super(),Tw(this,"underlying",void 0),Tw(this,"defaultContext",void 0),this.underlying=e,this.defaultContext=t}debug(e,t){this.underlying.debug(e,Uw(Uw({},this.defaultContext),t))}info(e,t){this.underlying.info(e,Uw(Uw({},this.defaultContext),t))}warn(e,t){this.underlying.warn(e,Uw(Uw({},this.defaultContext),t))}error(e,t){this.underlying.error(e,Uw(Uw({},this.defaultContext),t))}getEvents(){return this.underlying.getEvents()}withContext(e){return new rS(this.underlying,Uw(Uw({},this.defaultContext),e))}}const nS=.1,oS="https://idx.liadm.com/idex",iS="v3.13.2",sS=1e3,aS="https://rp.liadm.com",lS="https://rpr.liadm.com",cS=1e3,uS="https://i.liadm.com/sync-container",dS=250,pS=250;function fS(e){const t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?null!==(r=e&&(null===(n=Object.getPrototypeOf(e))||void 0===n||null===(n=n.constructor)||void 0===n?void 0:n.name))&&void 0!==r?r:"null":t;var r,n}function hS(e,t,r,n,o){var i,s,a,l,c,u,d,p;const f=o&&"input"in o?o.input:r.value,h=null!==(i=null!==(s=null==o?void 0:o.expected)&&void 0!==s?s:e.expects)&&void 0!==i?i:null,g=null!==(a=null==o?void 0:o.received)&&void 0!==a?a:fS(f),v={kind:e.kind,type:e.type,input:f,expected:h,received:g,message:`Invalid ${t}: ${h?`Expected ${h} but r`:"R"}eceived ${g}`,requirement:e.requirement,path:null==o?void 0:o.path,issues:null==o?void 0:o.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},y="schema"===e.kind,m=null!==(l=null!==(c=null!==(u=null!==(d=null!==(p=null==o?void 0:o.message)&&void 0!==p?p:e.message)&&void 0!==d?d:(e.reference,void v.lang))&&void 0!==u?u:y?void v.lang:null)&&void 0!==c?c:n.message)&&void 0!==l?l:void v.lang;var w;(m&&(v.message="function"==typeof m?m(v):m),y&&(r.typed=!1),r.issues)?to(w=r.issues).call(w,v):r.issues=[v]}function gS(e,t){return fm(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}function vS(e,t){var r;const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:null!==(r=n[0])&&void 0!==r?r:"never"}function yS(e,t){return{kind:"schema",type:"array",reference:yS,expects:"Array",async:!1,item:e,message:t,_run(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let s=0;s<r.length;s++){var n;const a=r[s],l=this.item._run({typed:!1,value:a},t);if(l.issues){const n={type:"array",origin:"value",input:r,key:s,value:a};for(const t of l.issues){var o,i;if(t.path)Up(i=t.path).call(i,n);else t.path=[n];null===(o=e.issues)||void 0===o||to(o).call(o,t)}if(e.issues||(e.issues=l.issues),t.abortEarly){e.typed=!1;break}}l.typed||(e.typed=!1),to(n=e.value).call(n,l.value)}}else hS(this,"type",e,t);return e}}}function mS(e){return{kind:"schema",type:"boolean",reference:mS,expects:"boolean",async:!1,message:e,_run(e,t){return"boolean"==typeof e.value?e.typed=!0:hS(this,"type",e,t),e}}}function wS(e,t){return{kind:"schema",type:"custom",reference:wS,expects:"unknown",async:!1,check:e,message:t,_run(e,t){return this.check(e.value)?e.typed=!0:hS(this,"type",e,t),e}}}function bS(e){return{kind:"schema",type:"lazy",reference:bS,expects:"unknown",async:!1,getter:e,_run(e,t){return this.getter(e.value)._run(e,t)}}}function SS(e,t){return{kind:"schema",type:"literal",reference:SS,expects:fS(e),async:!1,literal:e,message:t,_run(e,t){return e.value===this.literal?e.typed=!0:hS(this,"type",e,t),e}}}function ES(e,t){return{kind:"schema",type:"loose_object",reference:ES,expects:"Object",async:!1,entries:e,message:t,_run(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const i in this.entries){const s=r[i],a=this.entries[i]._run({typed:!1,value:s},t);if(a.issues){const l={type:"object",origin:"value",input:r,key:i,value:s};for(const t of a.issues){var n,o;if(t.path)Up(o=t.path).call(o,l);else t.path=[l];null===(n=e.issues)||void 0===n||to(n).call(n,t)}if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),(void 0!==a.value||i in r)&&(e.value[i]=a.value)}if(!e.issues||!t.abortEarly)for(const t in r)gS(r,t)&&!(t in this.entries)&&(e.value[t]=r[t])}else hS(this,"type",e,t);return e}}}function CS(e){return{kind:"schema",type:"number",reference:CS,expects:"number",async:!1,message:e,_run(e,t){return"number"!=typeof e.value||isNaN(e.value)?hS(this,"type",e,t):e.typed=!0,e}}}function xS(e,t){return{kind:"schema",type:"object",reference:xS,expects:"Object",async:!1,entries:e,message:t,_run(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const i in this.entries){const s=r[i],a=this.entries[i]._run({typed:!1,value:s},t);if(a.issues){const l={type:"object",origin:"value",input:r,key:i,value:s};for(const t of a.issues){var n,o;if(t.path)Up(o=t.path).call(o,l);else t.path=[l];null===(n=e.issues)||void 0===n||to(n).call(n,t)}if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),(void 0!==a.value||i in r)&&(e.value[i]=a.value)}}else hS(this,"type",e,t);return e}}}function PS(e,...t){const r={kind:"schema",type:"optional",reference:PS,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=function(e,t,r){return"function"==typeof e.default?e.default(t,r):e.default}(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function kS(e,t,r){return{kind:"schema",type:"record",reference:kS,expects:"Object",async:!1,key:e,value:t,message:r,_run(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const s in r)if(gS(r,s)){const a=r[s],l=this.key._run({typed:!1,value:s},t);if(l.issues){const o={type:"object",origin:"key",input:r,key:s,value:a};for(const t of l.issues){var n;t.path=[o],null===(n=e.issues)||void 0===n||to(n).call(n,t)}if(e.issues||(e.issues=l.issues),t.abortEarly){e.typed=!1;break}}const c=this.value._run({typed:!1,value:a},t);if(c.issues){const n={type:"object",origin:"value",input:r,key:s,value:a};for(const t of c.issues){var o,i;if(t.path)Up(i=t.path).call(i,n);else t.path=[n];null===(o=e.issues)||void 0===o||to(o).call(o,t)}if(e.issues||(e.issues=c.issues),t.abortEarly){e.typed=!1;break}}l.typed&&c.typed||(e.typed=!1),l.typed&&(e.value[l.value]=c.value)}}else hS(this,"type",e,t);return e}}}function RS(e){return{kind:"schema",type:"string",reference:RS,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:hS(this,"type",e,t),e}}}function OS(e){let t;if(e)for(const r of e)t?to(t).call(t,...r.issues):t=r.issues;return t}function IS(e,t){return{kind:"schema",type:"union",reference:IS,expects:vS(e.map((e=>e.expects)),"|"),async:!1,options:e,message:t,_run(e,t){var r;let n,o,i;for(const r of this.options){const s=r._run({typed:!1,value:e.value},t);if(s.typed){if(!s.issues){n=s;break}o?to(o).call(o,s):o=[s]}else i?to(i).call(i,s):i=[s]}if(n)return n;if(o){if(1===o.length)return o[0];hS(this,"type",e,t,{issues:OS(o)}),e.typed=!0}else{if(1===(null===(r=i)||void 0===r?void 0:r.length))return i[0];hS(this,"type",e,t,{issues:OS(i)})}return e}}}function _S(){return{kind:"schema",type:"unknown",reference:_S,expects:"unknown",async:!1,_run:e=>(e.typed=!0,e)}}function US(e,t,r){return{kind:"schema",type:"variant",reference:US,expects:"Object",async:!1,key:e,options:t,message:r,_run(e,t){const r=e.value;if(r&&"object"==typeof r){let n,o=0,i=this.key,s=[];const a=(e,l)=>{for(const c of e.options){if("variant"===c.type)a(c,new Set(l).add(c.key));else{let e=!0,a=0;for(const n of l){if(c.entries[n]._run({typed:!1,value:r[n]},t).issues){e=!1,i!==n&&(o<a||o===a&&n in r&&!(i in r))&&(o=a,i=n,s=[]),i===n&&to(s).call(s,c.entries[n].expects);break}a++}if(e){const e=c._run({typed:!1,value:r},t);(!n||!n.typed&&e.typed)&&(n=e)}}if(n&&!n.issues)break}};if(a(this,new Set([this.key])),n)return n;hS(this,"type",e,t,{input:r[i],expected:vS(s,"|"),path:[{type:"object",origin:"value",input:r,key:i,value:r[i]}]})}else hS(this,"type",e,t);return e}}}function AS(...e){return Uw(Uw({},e[0]),{},{pipe:e,_run(t,r){for(const n of e)if("metadata"!==n.kind){if(t.issues&&("schema"===n.kind||"transformation"===n.kind)){t.typed=!1;break}t.issues&&(r.abortEarly||r.abortPipeEarly)||(t=n._run(t,r))}return t}})}function jS(e,t,r){const n=e._run({typed:!1,value:t},function(e){var t,r,n;return{lang:null!==(t=null==e?void 0:e.lang)&&void 0!==t?t:void 0,message:null==e?void 0:e.message,abortEarly:null!==(r=null==e?void 0:e.abortEarly)&&void 0!==r?r:void 0,abortPipeEarly:null!==(n=null==e?void 0:e.abortPipeEarly)&&void 0!==n?n:void 0}}(r));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}const TS=({pageDetails:e,urlCollectionSettings:t,logger:r})=>{if(null==e.pageUrl)return{isPathRemoved:!1,blockedQueryParams:[]};if(FS(t))return{url:e.pageUrl,isPathRemoved:!1,blockedQueryParams:[]};const n=new wp(e.pageUrl);return{url:n,isPathRemoved:DS(n,t),blockedQueryParams:LS(n,t,r)}},DS=(e,t)=>"no_path"===t.mode&&"/"!==e.pathname&&(e.pathname="",!0),LS=(e,t,r)=>{if(null==t.queryParametersFilter||""===t.queryParametersFilter)return[];try{const r=new RegExp(t.queryParametersFilter),n=new Set;return e.searchParams.forEach(((e,t)=>{r.test(t)&&n.add(t)})),n.forEach((t=>e.searchParams.delete(t))),Array.from(n)}catch(e){return r.error(new HS(e)),[]}},FS=e=>"full"===e.mode&&""===e.queryParametersFilter;class HS extends pb{constructor(e){super("FailedToStripQueryParameterError","Failed to strip query parameters",{cause:e})}}const $S=(e,t)=>{const r=window.document.querySelectorAll(e);let n="";return r.forEach((e=>{const r=ib(e.outerHTML).stringWithoutRawEmails,o=n+r;if(NS(o)>t)return o;n=o})),n},NS=e=>Math.ceil(4*new Blob([e]).size/3),MS=e=>{throw new Error(`Pattern not exhaustive. Encountered unknown value ${e}`)},qS=e=>((e,t)=>new Date((new Date).getTime()+e*t))(e,864e5),BS="lidids.",QS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/,VS=(e,t,r)=>r.indexOf(e)===t,zS=e=>"string"==typeof e&&QS.test(e);class GS extends pb{constructor(e,t){super("LoadAndStoreDecisionsError",e,{cause:t})}}const JS=e=>[...e].map((e=>Um(e).call(e))),WS=(e,t)=>{const r=[],n=[];return e.forEach((e=>{const o=t.getCookie(e)||t.getDataFromLocalStorage(e);if(o){const{stringWithoutRawEmails:t,hashesFromOriginalString:i}=ib(o);to(r).call(r,{name:e,value:t}),to(n).call(n,...i)}})),{retrieved:r,extractedHashes:XS(n)}},XS=e=>{const t=new Set,r=[];return e.forEach((e=>{t.has(e.md5)||(to(r).call(r,e),t.add(e.md5))})),r};class KS extends pb{constructor(e,t){super("ResolvePartnerCookiesError",e,{cause:t})}}const ZS="0123456789ABCDEFGHJKMNPQRSTVWXYZ",YS=Math.pow(2,48)-1,eE=(()=>{const e="undefined"!=typeof window?window:null,t=e&&(e.crypto||e.msCrypto);return t?()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]/255}:()=>Math.random()})(),tE=()=>{let e=Math.floor(32*eE());return 32===e&&(e=31),ZS.charAt(e)},rE=()=>((e,t)=>{if(e>YS)throw new nE("cannot encode time greater than "+YS);let r,n="";for(;t>0;t--)r=e%32,n=ZS.charAt(r)+n,e=(e-r)/32;return n})(rf(),10)+(e=>{let t="";for(;e>0;e--)t=tE()+t;return t})(16);class nE extends pb{constructor(e){super("UlidError",e)}}const oE="_lc2_fpi",iE="_lc2_fpi_js",sE="_li_duid",aE=(e,t=12)=>Bw(e.replace(/^\./,"")).substring(0,t),lE=(e,t,r)=>{let n;try{n=e.getCookie(oE)}catch(e){r.error(new uE("Error while loading old FPC from cookie",e))}if(null==n)try{n=e.getCookie(iE)}catch(e){r.error(new uE("Error while loading old FPC from JS-only cookie",e))}if(null==n)try{n=e.getDataFromLocalStorage(sE)}catch(e){r.error(new uE("Error while loading old FPC from local storage",e))}return null!=n?n:(e=>`${aE(e)}--${rE()}`.toLocaleLowerCase())(t)},cE=(e,t,r,n)=>{let o=!1;try{e.getCookie(oE)!==t&&e.setCookie(oE,t,{domain:r,expires:qS(730)}),o=!0}catch(e){n.error(new uE("Couldn't store FPC in cookie",e))}try{e.setCookie(iE,t,{domain:r}),o=!0}catch(e){n.error(new uE("Couldn't store FPC in JS-only cookie",e))}try{e.setDataInLocalStorage(sE,t),o=!0}catch(e){n.error(new uE("Couldn't store FPC in local storage",e))}return o};class uE extends pb{constructor(e,t){super("GenerateAndStoreLiveConnectIdsError",e,{cause:t})}}class dE extends pb{constructor(e){super("InvalidCollectedEmailError",e)}}const pE=["email","emailhash","hash","hashedemail"],fE=["items","itemids"];class hE{constructor(e){Tw(this,"value",void 0),this.value=e}}class gE extends pb{constructor(e,t){super("InvalidSourceEventPageUrlError",e,{cause:t})}}class vE{constructor(e){Tw(this,"apply",void 0),this.apply=e}map(e){return new vE((t=>e(this.apply(t))))}defaultOnEmpty(e){return new vE((t=>{const r=t.getBodyAsText();return""===r?e:this.apply({getBodyAsText:()=>r})}))}}!function(e){e.ignore=new e((()=>{})),e.constant=t=>new e((()=>t)),e.text=new e((e=>e.getBodyAsText())),e.parseJson=t=>new e((e=>{const r=e.getBodyAsText();let n;try{n=Ow(r)}catch(e){throw new yE(e)}const o=jS(t,n);if(o.success)return o.output;throw new mE(`Failed parsing response: ${JSON.stringify(n)}`)})),e.fail=new e((()=>{throw new wE}))}(vE||(vE={}));class yE extends pb{constructor(e){super("JsonParsingError","Failed parsing response to json",{cause:e})}}class mE extends pb{constructor(e){super("ResponseParsingError",`Failed parsing response: ${e}`)}}class wE extends pb{constructor(){super("UnexpectedResponseError","Unexpected response")}}const bE=e=>{const{callHandler:t,resolutionUrl:r,resolveSettings:n}=e,o=`${r.base}${r.query.build()}`;return t.ajaxGet({url:o,responseHandler:EE,timeout:n.timeout})},SE=e=>{var t,r,n,o,i;const{liveConnectFpc:s,pageDetails:a,domainDetails:l,consent:c,integration:u,requestedAttributes:d,identityPool:p}=e,f=db.empty();let h;null!=(null===(t=c.gdpr)||void 0===t?void 0:t.gdprApplies)&&(h=c.gdpr.gdprApplies?"1":"0"),f.addOptional("duid",s);let g="any";switch(u.type){case"application":u.publisherId&&(g=u.publisherId);break;case"distributor":f.add("did",u.distributorId);break;case"custom":u.publisherId&&(g=u.publisherId),f.addOptional("did",u.distributorId);break;default:MS(u)}return f.addOptional("cd",l.cookieDomain).addOptional("pu",a.pageUrl?CE(a.pageUrl).toString():void 0).addOptional("gdpr",h).addOptional("gdpr_consent",null===(r=c.gdpr)||void 0===r?void 0:r.consentString).addOptional("us_privacy",null===(n=c.usPrivacy)||void 0===n?void 0:n.consentString).addOptional("gpp_s",null===(o=c.gpp)||void 0===o?void 0:o.consentString).addOptional("gpp_as",null===(i=c.gpp)||void 0===i||null===(i=i.applicableSections)||void 0===i?void 0:i.join(",")),xE(f,p.getProvidedEmailHashes()),d.forEach((e=>{f.add("resolve",e)})),p.getRetrievedIdentifiers().forEach((e=>{f.add(e.name,e.value)})),f.addOptional("pip",e.identityPool.getIpv4(),{base64UrlEncode:!0}).addOptional("pip6",e.identityPool.getIpv6(),{base64UrlEncode:!0}),e.additionalResolveParameters&&f.addParamsMap(e.additionalResolveParameters),{base:`${e.idexEndpointUrl}/${encodeURIComponent(e.resolveSettings.identityPartner)}/${encodeURIComponent(g)}`,query:f}},EE=vE.parseJson(kS(RS(),RS())).defaultOnEmpty({}),CE=e=>{const t=new wp(e.toString());return t.pathname="",t.search="",t},xE=(e,t)=>{t.forEach((t=>{switch(t.type){case"md5":e.addOptional("m",t.value);break;case"sha1":e.addOptional("sh1",t.value);break;case"sha256":e.addOptional("sh2",t.value)}}))},PE=xS({bakers:PS(yS(RS()))}),kE=vE.parseJson(PE);function RE(){return RE=jw((function*(e){const{pixelUrls:t,callHandler:r,timestamp:n,collectSettings:o,logger:i,pixelBaseUrl:s,identityPool:a}=e,{retries:l,timeout:c}=o,u={"X-LI-Provided-User-Agent":a.getUserAgent()};for(let e=0;e<l+1;e++)try{const e=yield r.ajaxGet({url:t.makeJUrl(s),responseHandler:kE,headers:u,timeout:c});return void(yield IE({callHandler:r,response:e.data,timestamp:n,logger:i}))}catch(e){if(i.error(new _E("Failed to send pixel",e)),hb(e))return void i.info("Pixel call blocked by consent, not retrying")}return i.error(new UE(`Failed to send pixel after all ${l} retries`),{pixelUrls:t,collectSettings:o}),OE(e)})),RE.apply(this,arguments)}const OE=({callHandler:e,pixelUrls:t,pixelBaseUrl:r})=>e.pixelGet(t.makePUrl(r)).catch((()=>{})),IE=({callHandler:e,response:t,timestamp:r,logger:n})=>{var o;const i=null!==(o=t.bakers)&&void 0!==o?o:[];return om.all(i.map((t=>(n.info(`Calling baker ${t}`),e.pixelGet(`${t}?dtstmp=${r.getTime()}`).catch((()=>{})))))).then((()=>{}))};class _E extends pb{constructor(e,t){super("SendPixelError",e,{cause:t})}}class UE extends pb{constructor(e){super("SendPixelRetriesExhaustedError",e)}}const AE=({cssSelectors:e,logger:t})=>{const r=[];if(0===e.length)return r;try{const t=e.join(", ");document.querySelectorAll(t).forEach((e=>{if(e instanceof HTMLInputElement){const t=cb(e.value);t&&to(r).call(r,t)}else{const t=(e=>{const t=[];try{let r=rb.exec(e);for(;null!=r;){const n=lb(r);n&&to(t).call(t,n),r=rb.exec(e)}return t}finally{rb.lastIndex=0}})(e.outerHTML);to(r).call(r,...t)}}))}catch(r){t.error(new jE(`Failed to collect emails from css selectors ${e}`,r))}return r};class jE extends pb{constructor(e,t){super("CollectEmailsFromCssSelectorError",e,{cause:t})}}class TE extends pb{constructor(e,t){super("CollectEmailsFromQueryParamsError",e,{cause:t})}}class DE extends pb{constructor(e,t){super("CollectEmailsFromWindowPropertyError",e,{cause:t})}}class LE{constructor(e){Tw(this,"props",void 0);const{logger:t,consent:r,storageHandler:n,callHandler:o,clientDetails:i,integration:s,urlCollectionSettings:a,partnerCookiesToResolve:l,contextElementCollectionSettings:c,collectSettings:u,autoCollectSettings:d,resolveSettings:p,pixelSyncSettings:f,hubConfig:h,emailExtractionSettings:g,eventTriggeredCollectionSettings:v,sharedData:y,identityPool:m,id5CollectionSettings:w}=e,{pageDetails:b,domainDetails:S}=y,E=(({storageHandler:e,partnerCookiesToResolve:t,logger:r})=>{try{const r=JS(t);return WS(r,e)}catch(e){return r.error(new KS("Error while enriching identifiers",e)),{retrieved:[],extractedHashes:[]}}})({storageHandler:n,partnerCookiesToResolve:l,logger:t});m.addPartnerCookies(E);const C=TS({pageDetails:b,urlCollectionSettings:a,logger:t}),x=(({contextElementCollectionSettings:e})=>{if(!e.enabled)return{};const{contextSelectors:t,maxLength:r}=e;return""===t||r<=0?{}:{collectedElements:$S(t,r)}})({contextElementCollectionSettings:c}),P=(({storageHandler:e,domainDetails:t,logger:r})=>{const n=t.cookieDomain,o=lE(e,n,r);if(cE(e,o,n,r))return o})({domainDetails:S,storageHandler:n,logger:t}),k=(({pageDetails:e,domainDetails:t,storageHandler:r,logger:n})=>{var o;const i=((null===(o=e.pageUrl)||void 0===o?void 0:o.searchParams.getAll("li_did"))||[]).map((e=>Um(e).call(e))).filter((e=>e.length>0&&zS(e))).filter(VS);let s;try{s=r.findSimilarCookies(BS)}catch(e){n.error(new GS("Error while searching for decisions in cookies",e)),s=[]}const a=s.map((e=>Um(e).call(e))).filter((e=>e.length>0&&zS(e)));return i.forEach((e=>{try{r.setCookie(`${BS}${e}`,e,{expires:qS(30),sameSite:"lax",domain:t.cookieDomain})}catch(e){n.error(new GS("Error while storing decision in cookie",e))}})),{decisionIds:i.concat(a).filter(VS)}})({pageDetails:b,domainDetails:S,storageHandler:n,logger:t});let R=[];null!=b.pageUrl&&(R=(({pageUrl:e,queryParamRegexes:t,logger:r})=>{const n=[];if(0===t.length)return n;try{const r=e.searchParams,o=new RegExp(t.join("|"),"i");r.forEach(((e,t)=>{if(o.test(t)){const t=cb(e);t&&to(n).call(n,t)}}))}catch(e){r.error(new TE("Failed to collect emails from query params",e))}return n})({pageUrl:b.pageUrl,queryParamRegexes:g.queryParameterRegexes,logger:t})),this.props={logger:t,hubConfig:h,callHandler:o,storageHandler:n,consent:r,pageDetails:b,domainDetails:S,liveConnectFpc:P,decisions:k,collectedUrl:C,contextElements:x,clientDetails:i,integration:s,urlCollectionSettings:a,collectSettings:u,autoCollectSettings:d,resolveSettings:p,pixelSyncSettings:f,emailExtractionSettings:g,emailsFromQueryParams:R,eventTriggeredCollectionSettings:v,identityPool:m,id5CollectionSettings:w,pageViewId:y.pageViewId}}resolve(e){var t=this;return jw((function*(){var r;const{requestedAttributes:n,additionalResolveParameters:o,onSuccess:i,onFailure:s}=e,{logger:a,consent:l,callHandler:c,liveConnectFpc:u,pageDetails:d,domainDetails:p,resolveSettings:f,integration:h,hubConfig:g,storageHandler:v,identityPool:y}=t.props;try{const e=yield(e=>{const{callHandler:t,resolveSettings:r,identityPool:n}=e,o=SE(e);return bE({callHandler:t,resolutionUrl:o,resolveSettings:r,identityPool:n})})({consent:l,liveConnectFpc:u,pageDetails:d,domainDetails:p,callHandler:c,resolveSettings:f,integration:h,requestedAttributes:n,additionalResolveParameters:o,idexEndpointUrl:g.idexEndpointUrl,identityPool:y});for(const t of i)try{switch(t.type){case"write_to_local_storage":v.setDataInLocalStorage(t.targetKey,JSON.stringify(e.data));break;case"write_to_cookie":v.setCookie(t.targetKey,JSON.stringify(e.data),{expires:null!==(r=e.expiresAt)&&void 0!==r?r:qS(730),sameSite:t.sameSite,domain:t.domain});break;case"callback":t.callback(e.data);break;default:MS(t)}}catch(e){a.error(new FE("Failed to handle onResolveSuccess action",e))}}catch(e){if(a.error(new FE("Failed to resolve identity",e)),s)try{s(e)}catch(e){a.error(new FE("Failed to call onFailure callback",e))}}}))()}collect(e){var t=this;return jw((function*(){const{callHandler:r,pageDetails:n,collectedUrl:o,urlCollectionSettings:i,contextElements:s,integration:a,clientDetails:l,collectSettings:c,liveConnectFpc:u,decisions:d,consent:p,domainDetails:f,logger:h,hubConfig:g,identityPool:v,pageViewId:y}=t.props;try{const t=new Date,m=(({pageDetails:e,sourceEvent:t,logger:r})=>{if("pageUrl"in t&&"string"==typeof t.pageUrl)try{return{pageUrl:new wp(t.pageUrl),referrer:e.referrer}}catch(e){r.error(new gE("Cannot create pageUrl with invalid source",e))}})({pageDetails:n,sourceEvent:e,logger:h});let w=o,b=n;null!=m&&(w=TS({pageDetails:m,urlCollectionSettings:i,logger:h}),b=m);const S=((e,t)=>{const r=[];for(const n in e)if(Zp(pE).call(pE,n.toLowerCase())&&0===r.length){const o=e[n];if("string"==typeof o){const e=cb(o);switch(null==e?void 0:e.type){case"raw":{const t=sb(e.value);to(r).call(r,{type:"md5",value:t.md5},{type:"sha1",value:t.sha1},{type:"sha256",value:t.sha256});break}case"hashed":to(r).call(r,e.value);break;case void 0:t.error(new dE(`Invalid email format, key: ${n}`))}}else t.error(new dE(`Input with ${n} is not a string: ${typeof o}`))}const n=t=>{const r=e[t];if("string"==typeof r)return r};return{hashedEmails:r,ipv4:n("ipv4"),ipv6:n("ipv6"),userAgent:n("userAgent")}})(e,h);v.addSourceEventEmails(S),v.addIpv4(S),v.addIpv6(S),v.addUserAgent(S);const E=(({sourceEvent:e})=>{const t=Uw({},e);for(const r in e)if(Zp(fE).call(fE,r.toLowerCase())){const n=e[r];Array.isArray(n)&&n.length>10&&(t[r]=n.slice(0,10))}return new hE(t)})({sourceEvent:e}),C=(e=>{var t,r,n,o,i;const s=db.empty().add("dtstmp",e.timestamp.getTime());switch(e.integration.type){case"application":s.addOptional("aid",e.integration.appId);break;case"distributor":s.add("did",e.integration.distributorId);break;case"custom":s.addOptional("did",e.integration.distributorId);break;default:MS(e.integration)}let a;s.add("se",JSON.stringify(e.limitedSourceEvent.value,ab),{base64UrlEncode:!0}).addOptional("duid",e.liveConnectFpc).add("tv",e.hubVersion).addOptional("pu",e.collectedUrl.url?e.collectedUrl.url.toString():void 0).addOptional("pu_rp",e.collectedUrl.isPathRemoved?"1":void 0).addOptional("pu_rqp",e.collectedUrl.blockedQueryParams.length>0?e.collectedUrl.blockedQueryParams.join(","):void 0),e.identityPool.getRetrievedIdentifiers().forEach((e=>{s.add(`ext_${e.name}`,e.value)})),e.identityPool.getExtractedHashes().forEach((e=>{s.add("scre",`${e.md5},${e.sha1},${e.sha256}`)})),null!=(null===(t=e.consent.gdpr)||void 0===t?void 0:t.gdprApplies)&&(a=e.consent.gdpr.gdprApplies?"1":"0"),s.add("li_did",e.decisions.decisionIds.join(",")).addOptional("e",e.identityPool.getProvidedEmailHashes().map((e=>e.value)).join(",")).addOptional("us_privacy",null===(r=e.consent.usPrivacy)||void 0===r?void 0:r.consentString).add("wpn",e.clientDetails.name).add("wpv",e.clientDetails.version).addOptional("co",e.clientDetails.collaborator).addOptional("gdpr",a).addOptional("gdpr_consent",null===(n=e.consent.gdpr)||void 0===n?void 0:n.consentString).addOptional("refr",e.pageDetails.referrer).addOptional("gpp_s",null===(o=e.consent.gpp)||void 0===o?void 0:o.consentString).addOptional("gpp_as",null===(i=e.consent.gpp)||void 0===i?void 0:i.applicableSections.join(",")).addOptional("cd",e.domainDetails.cookieDomain).addOptional("c",e.contextElements.collectedElements,{base64UrlEncode:!0}).add("pv",e.pageViewId).addOptional("pip",e.identityPool.getIpv4(),{base64UrlEncode:!0}).addOptional("pip6",e.identityPool.getIpv6(),{base64UrlEncode:!0});const l=s.build();return{makeJUrl:e=>`${e}/j${l}`,makePUrl:e=>`${e}/p${l}`}})({integration:a,timestamp:t,limitedSourceEvent:E,contextElements:s,clientDetails:l,liveConnectFpc:u,decisions:d,domainDetails:f,consent:p,collectedUrl:w,pageDetails:b,hubVersion:g.hubVersion,identityPool:v,pageViewId:y});yield function(e){return RE.apply(this,arguments)}({pixelBaseUrl:g.pixelBaseUrl,pixelUrls:C,callHandler:r,collectSettings:c,timestamp:t,logger:h,identityPool:v})}catch(e){h.error(new HE(e))}}))()}tryCollectToSideChannel(){var e=this;return jw((function*(){const{logger:t,emailExtractionSettings:r,emailsFromQueryParams:n,liveConnectFpc:o,pageDetails:i,integration:s}=e.props,a=e.props.identityPool.getId5Data();try{const l=AE({cssSelectors:r.emailCssSelectors,logger:t}),c=(({logger:e,propertyPaths:t})=>{const r=[];return t.forEach((t=>{try{const e=t.split(".");let n=window;for(const t of e)n=n[t];if("string"==typeof n){const e=cb(n);e&&to(r).call(r,e)}}catch(r){e.error(new DE(`Failed to collect emails from window property ${t}`,r))}})),r})({propertyPaths:r.windowPropertyPaths,logger:t});if(0===l.length&&0===c.length&&0===n.length&&null==a)return void t.debug("No data to collect to side channel, skipping");let u;switch(s.type){case"application":u=s.appId;break;case"distributor":case"custom":u=s.distributorId;break;default:MS(s)}const d={fpc:o,page_url:i.pageUrl,customer_id:u,window_properties:c,css_selectors:l,query_parameters:n,id5_data:a,timestamp:(new Date).toISOString()},p=$w(JSON.stringify(d)),f=`${e.props.hubConfig.sideChannelCollectorUrl}?${p}`;t.info("Sending data to side channel",{eventToSend:d}),yield e.props.callHandler.pixelGet(f)}catch(e){t.error(new $E(e))}}))()}runStartupTasks(e,t){var r=this;return jw((function*(){e.scheduleAfterDelay(0,{type:"sync_container",consent:r.props.consent,domainDetails:r.props.domainDetails,liveConnectFpc:r.props.liveConnectFpc,pixelSyncSettings:r.props.pixelSyncSettings,logger:r.props.logger,identityPool:r.props.identityPool,integration:r.props.integration,storageHandler:r.props.storageHandler}),r.props.id5CollectionSettings.enabled&&e.scheduleId5Collection(r.props.id5CollectionSettings.pollingInterval),r.props.eventTriggeredCollectionSettings.pageEvents.length>0&&e.scheduleOnPageEvents(r.props.eventTriggeredCollectionSettings.pageEvents,{type:"collect_to_side_channel",clientRef:t}),(r.props.emailExtractionSettings.queryParameterRegexes.length>0||r.props.emailExtractionSettings.emailCssSelectors.length>0||r.props.emailExtractionSettings.windowPropertyPaths.length>0)&&e.scheduleAfterDelay(r.props.hubConfig.sideChannelRegisterCollectDelay,{type:"collect_to_side_channel",clientRef:t}),r.props.autoCollectSettings.enabled&&e.scheduleAfterDelay(r.props.autoCollectSettings.delay,{type:"attempt_auto_collect",clientRef:t})}))()}collectsOnId5Change(){return this.props.eventTriggeredCollectionSettings.onId5Change.enabled}}class FE extends pb{constructor(e,t){super("ResolveIdentityError",e,{cause:t})}}class HE extends pb{constructor(e){super("CollectError","Failed to collect",{cause:e})}}class $E extends pb{constructor(e){super("CollectToSideChannelError","Failed to collect to side channel",{cause:e})}}const NE=e=>gf(e).map((([e,t])=>[new RegExp(e),gf(t).map((([e,t])=>[new RegExp(e),t]))])),ME=e=>null==e.pageUrl?["",""]:[e.pageUrl.hostname,e.pageUrl.pathname];class qE extends pb{constructor(e,t){super("EvalPageSettingsError",e,{cause:t})}}const BE={empty:{emailCssSelectors:[],queryParameterRegexes:[],windowPropertyPaths:[]},combine:(e,t)=>({emailCssSelectors:e.emailCssSelectors.concat(t.emailCssSelectors),queryParameterRegexes:e.queryParameterRegexes.concat(t.queryParameterRegexes),windowPropertyPaths:e.windowPropertyPaths.concat(t.windowPropertyPaths)})},QE={empty:{pageEvents:[],onId5Change:{enabled:!1}},combine:(e,t)=>({pageEvents:e.pageEvents.concat(t.pageEvents),onId5Change:{enabled:e.onId5Change.enabled||t.onId5Change.enabled}})},VE={empty:{emailExtractionSettings:BE.empty,eventTriggeredCollectionSettings:QE.empty},combine:(e,t)=>({emailExtractionSettings:BE.combine(e.emailExtractionSettings,t.emailExtractionSettings),eventTriggeredCollectionSettings:QE.combine(e.eventTriggeredCollectionSettings,t.eventTriggeredCollectionSettings)})},zE=e=>{var t;const r=e.getEvents().find((e=>{var t;return"register_client"===(null==e||null===(t=e.context)||void 0===t||null===(t=t.command)||void 0===t?void 0:t.type)})),n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(null==r||null===(t=r.context)||void 0===t?void 0:t.command,Iw);return n||{}},GE=(e,t)=>{let r=!1;try{t.forEach((e=>{e.eventBus.once("pre_lips",(()=>{r=!0}))}))}catch(t){e.error(new WE("Error while checking if collect has been called globally",t))}return r};class JE{constructor(e){Tw(this,"config",void 0),Tw(this,"eventBus",{once:(e,t)=>{"pre_lips"===e&&t()}}),this.config=e}}class WE extends pb{constructor(e,t){super("LiQInstancesError",e,{cause:t})}}class XE{constructor(){Tw(this,"retrievedIdentifiersFromPartnerCookies",new Map),Tw(this,"extractedHashesFromPartnerCookies",new Map),Tw(this,"providedEmailHashes",[]),Tw(this,"ipv4",void 0),Tw(this,"ipv6",void 0),Tw(this,"userAgent",void 0),Tw(this,"id5",void 0)}addPartnerCookies(e){return e.retrieved.forEach((e=>{this.retrievedIdentifiersFromPartnerCookies.set(e.name,e.value)})),e.extractedHashes.forEach((e=>{this.extractedHashesFromPartnerCookies.set(e.md5,e)})),this}getRetrievedIdentifiers(){return Array.from(this.retrievedIdentifiersFromPartnerCookies,(([e,t])=>({name:e,value:t})))}getExtractedHashes(){return Array.from(this.extractedHashesFromPartnerCookies,(([e,t])=>t))}addSourceEventEmails(e){return e.hashedEmails.forEach((e=>{var t;to(t=this.providedEmailHashes).call(t,e)})),this}getProvidedEmailHashes(){return this.providedEmailHashes}addIpv4(e){return this.ipv4=e.ipv4,this}getIpv4(){return this.ipv4}addIpv6(e){return this.ipv6=e.ipv6,this}getIpv6(){return this.ipv6}addUserAgent(e){return this.userAgent=e.userAgent,this}getUserAgent(){return this.userAgent}addId5Data(e){return this.id5=e,this}getId5Data(){return this.id5}}const KE="_li_dcdm_c",ZE=(e,t)=>{const r=document.domain||document.location&&document.location.host||window&&window.location&&window.location.host||"localhost",n=r.split(".");for(let r=n.length;r>0;r--){const o=`.${n.slice(r-1,n.length).join(".")}`;if(YE(o,e,t),eC(e,t)===o)return o}return tC(r,e,t),`.${r}`},YE=(e,t,r)=>{try{t.setCookie(KE,e,{sameSite:"lax",domain:e})}catch(e){r.warn("Failed to set TLD cache",{error:e})}},eC=(e,t)=>{try{return e.getCookie(KE)}catch(e){t.warn("Failed to get TLD cache",{error:e})}},tC=(e,t,r)=>{try{t.deleteCookie(KE,e)}catch(e){r.warn("Failed to delete TLD cache",{error:e})}};let rC;const nC=new Uint8Array(16);function oC(){if(!rC&&(rC="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!rC))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rC(nC)}const iC=[];for(let e=0;e<256;++e)to(iC).call(iC,(e+256).toString(16).slice(1));var sC={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function aC(e,t,r){if(sC.randomUUID&&!t&&!e)return sC.randomUUID();const n=(e=e||{}).random||(e.rng||oC)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,function(e,t=0){return iC[e[t+0]]+iC[e[t+1]]+iC[e[t+2]]+iC[e[t+3]]+"-"+iC[e[t+4]]+iC[e[t+5]]+"-"+iC[e[t+6]]+iC[e[t+7]]+"-"+iC[e[t+8]]+iC[e[t+9]]+"-"+iC[e[t+10]]+iC[e[t+11]]+iC[e[t+12]]+iC[e[t+13]]+iC[e[t+14]]+iC[e[t+15]]}(n)}const lC="_li_ss",cC="li_sync_frame";let uC=!1,dC=null;const pC=e=>{null===document.getElementById(cC)?(dC||setTimeout((()=>fC(e.iframeMessageTimeout)),e.syncWait),dC=((e,t)=>{var r,n,o,i,s;return Uw(Uw(Uw({},e),t),{},{pixelSyncSettings:{euns:(void 0!==(null===(r=e.pixelSyncSettings)||void 0===r?void 0:r.euns)?e.pixelSyncSettings.euns:t.pixelSyncSettings.euns)||t.pixelSyncSettings.euns,pixelTimeout:Math.max(null!==(n=null===(o=e.pixelSyncSettings)||void 0===o?void 0:o.pixelTimeout)&&void 0!==n?n:0,null!==(i=t.pixelSyncSettings.pixelTimeout)&&void 0!==i?i:0)||void 0},consent:e.appId?e.consent:t.consent,appId:null!==(s=e.appId)&&void 0!==s?s:"application"===t.integration.type?t.integration.appId:void 0,distributorIds:[...e.distributorIds||[],..."distributor"===t.integration.type?[t.integration.distributorId]:[]]})})(dC||{},e)):e.logger.info("Sync container already launched")},fC=e=>{if(!dC)return;const{storageHandler:t,logger:r,syncContainerEndpointUrl:n,domainDetails:o}=dC;try{const i=hC(t,r)||"",s=wC(Uw(Uw({},dC),{},{syncState:i})),a=document.createElement("iframe");if(!a||!document.body)return void r.error(new SC("Failed to create iframe for sync container"));if(a.style.opacity="0",a.style.width="0px",a.style.height="0px",a.style.border="0px",a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.zIndex="-1000",a.id=cC,a.title="data","postMessage"in window){const e=new wp(n).origin;bC((n=>{n.origin===e&&n.data&&"string"==typeof n.data&&(uC=!0,yC(t,n.data,r,o.cookieDomain))}))}a.src=s,document.body.appendChild(a),a.onload=function(){setTimeout((()=>{uC||r.error(new EC("Error while loading sync container"))}),e)}}catch(e){r.error(new SC("Error while launching sync container",e))}},hC=(e,t)=>{var r;return null!==(r=gC(e,t))&&void 0!==r?r:vC(e,t)},gC=(e,t)=>{try{return e.getDataFromLocalStorage(lC)}catch(e){t.error(new SC("Error while loading sync state from local storage",{cause:e}))}},vC=(e,t)=>{try{return e.getCookie(lC)}catch(e){t.error(new SC("Error while loading sync state form cookie storage",e))}},yC=(e,t,r,n)=>{try{t&&t.replace(/([^=]+)=([^&]*)&?/g,((t,o,i)=>{if(o=decodeURIComponent(o),i=decodeURIComponent(i),o===lC){try{e.setDataInLocalStorage(o,i)}catch(e){r.error(new SC("Error while persisting sync state in local storage",e))}try{e.setCookie(o,i,{expires:qS(730),sameSite:"lax",domain:n})}catch(e){r.error(new SC("Error while persisting sync state in cookie storage",e))}}return""}))}catch(e){r.error(new SC("Error while handling SC message",e))}},mC={stripEmpty:!1},wC=e=>`${e.syncContainerEndpointUrl}${(({pageViewId:e,appId:t,distributorIds:r,consent:n,domainDetails:o,liveConnectFpc:i,syncState:s,pixelSyncSettings:a,hubVersion:l})=>{var c,u,d;return db.empty().addOptional("duid",i,mC).addOptional("appId",t,mC).addArray("ds",(r||[]).filter(Boolean),mC).add("euns",a.euns?1:0,mC).addOptional("pt",a.pixelTimeout,mC).addOptional("s",s,mC).addOptional("us_privacy",null===(c=n.usPrivacy)||void 0===c?void 0:c.consentString,mC).addOptional("gpp_s",null===(u=n.gpp)||void 0===u?void 0:u.consentString,mC).addOptional("gpp_as",null===(d=n.gpp)||void 0===d||null===(d=d.applicableSections)||void 0===d?void 0:d.join(","),mC).addOptional("version",l,mC).addOptional("cd",o.cookieDomain,mC).add("pv",e).build()})(e)}`,bC=e=>window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent("onmessage",e);class SC extends pb{constructor(e,t){super("SyncContainerError",e,{cause:t})}}class EC extends pb{constructor(e,t){super("SyncContainerLoadError",e,{cause:t})}}class CC{constructor(e,t,r,n,o,i,s,a){Tw(this,"storageHandlerFactory",void 0),Tw(this,"callHandlerFactory",void 0),Tw(this,"consentManager",void 0),Tw(this,"logger",void 0),Tw(this,"hubConfig",void 0),Tw(this,"commandQueue",void 0),Tw(this,"scheduler",void 0),Tw(this,"sharedData",void 0),Tw(this,"clientHandlers",new Map),Tw(this,"sharedIdentityPool",new XE),this.storageHandlerFactory=e,this.callHandlerFactory=t,this.consentManager=r,this.logger=n,this.hubConfig=o,this.commandQueue=i,this.scheduler=s,this.sharedData=a}static makeAsync(e,t,r,n,o,i,s){const a=e.unrestricted(n),l=Dw(),c=(({storageHandler:e,logger:t})=>({cookieDomain:ZE(e,t)}))({logger:n,storageHandler:a}),u={pageDetails:l,domainDetails:c,pageViewId:aC()};return om.resolve(new CC(e,t,r,n,o,i,s,u))}processCommand(e){var t=this;return jw((function*(){switch(t.logger.info(`hub received command of type ${e.type}`,{command:e}),e.type){case"register_client":return t.processRegisterClientCommand(e);case"collect":return t.processCollectCommand(e);case"resolve":return t.processResolveCommand(e);case"log":return t.processLogCommand(e);case"debug":return t.processDebugCommand(e);case"sync_container":return t.syncContainer(e),om.resolve();case"collect_to_side_channel":return t.processCollectToSideChannelCommand(e);case"attempt_auto_collect":return t.processAttemptAutoCollectCommand(e);case"new_id5_available":return t.processNewId5AvailableEvent(e);default:MS(e)}}))()}syncContainer(e){e.pixelSyncSettings.enabled&&!wb(e.consent)&&pC({integration:e.integration,consent:e.consent,domainDetails:e.domainDetails,liveConnectFpc:e.liveConnectFpc,storageHandler:e.storageHandler,pixelSyncSettings:e.pixelSyncSettings,syncWait:this.hubConfig.syncWait,syncContainerEndpointUrl:this.hubConfig.syncContainerEndpointUrl,hubVersion:this.hubConfig.hubVersion,logger:e.logger,identityPool:e.identityPool,pageViewId:this.sharedData.pageViewId,iframeMessageTimeout:this.hubConfig.iframeMessageTimeout})}processRegisterClientCommand(e){var t=this;return jw((function*(){const r=e.clientRef;if(t.clientHandlers.has(r))t.logger.error(new xC,{clientRef:r,command:e,existingState:t.clientHandlers.get(r)});else try{var n;const o=null!=e.consent?e.consent:yield t.consentManager.loadConsent(),i=wb(o)?new XE:t.sharedIdentityPool,s=t.logger.withContext({clientRef:r,registration:e,appId:"application"===e.integration.type?e.integration.appId:void 0,distributorId:"distributor"===e.integration.type?e.integration.distributorId:void 0,wrapperName:""!==Um(n=e.clientDetails.name).call(n)?e.clientDetails.name:"not-provided"}),a=t.callHandlerFactory.fromConsent(o,s),l=t.storageHandlerFactory.fromConsent(o,s),c=(({settings:e,monoid:t,pageDetails:r,logger:n})=>{let o=t.empty;try{const n=NE(e),[i,s]=ME(r);n.filter((([e])=>e.test(i))).forEach((([,e])=>{e.filter((([e])=>e.test(s))).forEach((([,e])=>{o=t.combine(o,e)}))}))}catch(e){n.error(new qE("Failed to evaluate page settings",e))}return o})({settings:e.pageDependentSettings,monoid:VE,pageDetails:t.sharedData.pageDetails,logger:s}),u=BE.combine(e.emailExtractionSettings,c.emailExtractionSettings),d=QE.combine(e.eventTriggeredCollectionSettings,c.eventTriggeredCollectionSettings),p=new LE({logger:s,callHandler:a,storageHandler:l,consent:o,hubConfig:t.hubConfig,sharedData:t.sharedData,contextElementCollectionSettings:e.contextElementCollectionSettings,partnerCookiesToResolve:e.partnerCookies,clientDetails:e.clientDetails,integration:e.integration,urlCollectionSettings:e.urlCollectionSettings,collectSettings:e.collectSettings,autoCollectSettings:e.autoCollectSettings,resolveSettings:e.resolveSettings,pixelSyncSettings:e.pixelSyncSettings,id5CollectionSettings:e.id5CollectionSettings,emailExtractionSettings:u,eventTriggeredCollectionSettings:d,identityPool:i});t.clientHandlers.set(r,p),t.logger.info("Client registered",{clientRef:r}),yield p.runStartupTasks(t.scheduler,r)}catch(r){t.logger.error(new PC(r),{command:e})}}))()}processCollectCommand(e){const t=this.loadClientHandler(e.clientRef);return null==t?om.resolve():this.doCollect(t,e.sourceEvent)}processCollectToSideChannelCommand(e){const t=this.loadClientHandler(e.clientRef);return null==t?om.resolve():t.tryCollectToSideChannel()}processResolveCommand(e){const t=this.loadClientHandler(e.clientRef);return null==t?om.resolve():t.resolve({requestedAttributes:e.requestedAttributes,additionalResolveParameters:e.additionalResolveParameters,onSuccess:e.onSuccess,onFailure:e.onFailure})}processAttemptAutoCollectCommand(e){const t=this.loadClientHandler(e.clientRef);return null==t?om.resolve():(r=this.logger,window.liQ_instances=null!==(n=window.liQ_instances)&&void 0!==n?n:[],GE(r,window.liQ_instances)||this.commandQueue.collectQueued()?(this.logger.info("Auto collect was attempted but was skipped",{clientRef:e.clientRef}),om.resolve()):this.doCollect(t,{}));var r,n}processLogCommand(e){switch(e.level){case"debug":this.logger.debug(e.message,e.context);break;case"info":this.logger.info(e.message,e.context);break;case"warn":this.logger.warn(e.message,e.context);break;case"error":{const t=new pb(e.name,e.message,{cause:e.cause});this.logger.error(t,e.context)}break;default:MS(e)}return om.resolve()}processDebugCommand(e){return null!=e.onEvents&&e.onEvents(this.logger.getEvents()),null!=e.onHub&&e.onHub(this),om.resolve()}processNewId5AvailableEvent(e){return this.sharedIdentityPool.addId5Data({id5:e.id5,linkType:e.linkType}),this.forAllClients(((e,t)=>{t.collectsOnId5Change()&&this.commandQueue.pushInternal({type:"collect_to_side_channel",clientRef:e})})),om.resolve()}loadClientHandler(e){const t=this.clientHandlers.get(e);return null==t&&this.logger.error(new kC,{ref:e}),t}forAllClients(e){this.clientHandlers.forEach(((t,r)=>e(r,t)))}doCollect(e,t){return(e=>{if(null==window.liQ_instances)window.liQ_instances=[new JE(zE(e))];else if(!GE(e,window.liQ_instances)){var t;to(t=window.liQ_instances).call(t,new JE(zE(e)))}})(this.logger),e.collect(t)}}class xC extends pb{constructor(){super("DuplicateClientRegisterError","Received duplicate registration for the same ref")}}class PC extends pb{constructor(e){super("RegisterClientError","Failed registering a new client",{cause:e})}}class kC extends pb{constructor(){super("UnknownClientError","Client passed an unknown client ref")}}class RC extends pb{constructor(e,t){super("SubscribeToPageEventsError",e,{cause:t})}}class OC{constructor(e,t){Tw(this,"commandQueue",void 0),Tw(this,"logger",void 0),Tw(this,"id5CollectionEnabled",!1),this.commandQueue=e,this.logger=t}scheduleAfterDelay(e,t){this.logger.info(`Scheduling ${t.type} for ${e}ms from now`),setTimeout((()=>{this.logger.info(`Executing scheduled ${t.type}`),this.commandQueue.pushInternal(t)}),e)}scheduleOnPageEvents(e,t){const r=e.map((e=>({cssSelector:e.eventSourceCssSelector,eventType:e.eventType,action:()=>{this.logger.info(`Scheduling ${t.type} for page event`,{event:e,command:t}),this.commandQueue.pushInternal(t)}})));this.logger.info(`Subscribing to ${r.length} page events`,{events:e}),(({listeners:e,logger:t})=>{if(0===e.length)return;const r=()=>{e.forEach((e=>{try{document.querySelectorAll(e.cssSelector).forEach((r=>{r.addEventListener(e.eventType,(()=>{try{e.action()}catch(e){t.error(new RC("Failed to execute action for listener",e))}}))}))}catch(e){t.error(new RC("Failed to subscribe listener",e))}}))};try{"loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",r)}catch(e){t.error(new RC("Failed to subscribe to DOMContentLoaded event",e))}})({listeners:r,logger:this.logger})}scheduleId5Collection(e){const t=this,r=()=>(()=>{if(null==window.ID5)return!1;try{window.ID5.init({partnerId:"538"}).onUpdate((e=>{const r=e.getUserId(),n=e.getLinkType();t.logger.info("Received id5 data",{id5:r,linkType:n}),t.commandQueue.pushInternal({type:"new_id5_available",id5:r,linkType:n})}))}catch(e){t.logger.error(new IC(e))}return!0})()?om.resolve():new om((t=>setTimeout(t,e))).then(r);this.id5CollectionEnabled||(this.id5CollectionEnabled=!0,this.logger.info("Scheduling id5 collection"),r())}}class IC extends pb{constructor(e){super("Id5RegisterError","Failed to register to id5 api",{cause:e})}}const _C=()=>wS((e=>"function"==typeof e),"A function is required!"),UC=IS([RS(),CS(),mS(),function e(t){return{kind:"schema",type:"null",reference:e,expects:"null",async:!1,message:t,_run(e,t){return null===e.value?e.typed=!0:hS(this,"type",e,t),e}}}(),function e(t){return{kind:"schema",type:"undefined",reference:e,expects:"undefined",async:!1,message:t,_run(e,t){return void 0===e.value?e.typed=!0:hS(this,"type",e,t),e}}}(),yS(bS((()=>UC))),kS(RS(),bS((()=>UC))),xS({toJSON:_C()})]),AC=kS(RS(),UC),jC=PS(function e(t,r){return{kind:"schema",type:"set",reference:e,expects:"Set",async:!1,value:t,message:r,_run(e,t){const r=e.value;if(r instanceof Set){e.typed=!0,e.value=new Set;for(const i of r){const s=this.value._run({typed:!1,value:i},t);if(s.issues){const a={type:"set",origin:"value",input:r,key:null,value:i};for(const t of s.issues){var n,o;if(t.path)Up(o=t.path).call(o,a);else t.path=[a];null===(n=e.issues)||void 0===n||to(n).call(n,t)}if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.add(s.value)}}else hS(this,"type",e,t);return e}}}(RS()),new Set),TC=PS(xS({retries:PS(CS(),3),timeout:PS(CS(),0)}),{}),DC=PS(xS({enabled:PS(mS(),!0),delay:PS(CS(),120)}),{}),LC=AS(PS(ES({type:PS(RS(),"generated")}),{}),US("type",[xS({type:SS("generated")}),xS({type:SS("provided"),source:IS([SS("cookie"),SS("local_storage")]),key:RS()})])),FC=xS({gdprApplies:PS(mS()),consentString:RS()}),HC=xS({consentString:RS()}),$C=xS({consentString:RS(),applicableSections:yS(CS())}),NC=xS({forcedPrivacyMode:PS(mS(),!1),gdpr:PS(FC),usPrivacy:PS(HC),gpp:PS($C)}),MC=PS(NC),qC=wS((e=>"object"==typeof e),"An object is required!"),BC=US("type",[xS({type:SS("application"),appId:PS(RS()),publisherId:PS(RS())}),xS({type:SS("distributor"),distributorId:RS()}),xS({type:SS("custom"),publisherId:PS(RS()),distributorId:PS(RS())})]),QC=xS({name:RS(),version:RS(),collaborator:PS(RS())}),VC=PS(xS({mode:PS(IS([SS("full"),SS("no_path")]),"full"),queryParametersFilter:PS(RS())}),{}),zC=AS(PS(ES({enabled:PS(mS(),!1)}),{}),US("enabled",[xS({enabled:SS(!1)}),xS({enabled:SS(!0),contextSelectors:RS(),maxLength:CS()})])),GC=PS(xS({timeout:PS(CS(),5e3),identityPartner:PS(RS(),"unknown")}),{}),JC=US("type",[xS({type:SS("write_to_local_storage"),targetKey:RS()}),xS({type:SS("write_to_cookie"),targetKey:RS(),sameSite:PS(IS([SS("strict"),SS("lax"),SS("none")])),domain:PS(RS())}),xS({type:SS("callback"),callback:_C()})]),WC=AS(PS(ES({enabled:PS(mS(),!1)}),{}),US("enabled",[xS({enabled:SS(!1)}),xS({enabled:SS(!0),euns:PS(mS(),!1),pixelTimeout:PS(CS())})])),XC=PS(xS({emailCssSelectors:PS(yS(RS()),[]),queryParameterRegexes:PS(yS(RS()),[]),windowPropertyPaths:PS(yS(RS()),[])}),{}),KC=AS(PS(ES({enabled:PS(mS(),!1)}),{}),US("enabled",[xS({enabled:SS(!1)}),xS({enabled:SS(!0),pollingInterval:PS(CS(),500)})])),ZC=xS({eventSourceCssSelector:RS(),eventType:RS()}),YC=PS(xS({pageEvents:PS(yS(ZC),[]),onId5Change:PS(xS({enabled:PS(mS(),!1)}),{})}),{}),ex=PS(AS(yS(RS()),function e(t){return{kind:"transformation",type:"transform",reference:e,async:!1,operation:t,_run(e){return e.value=this.operation(e.value),e}}}((e=>new Set(e)))),[]),tx=IS([RS(),CS(),mS()]),rx=PS(kS(RS(),IS([tx,yS(tx)])),{}),nx=PS(kS(RS(),kS(RS(),xS({emailExtractionSettings:PS(XC,{}),eventTriggeredCollectionSettings:PS(YC,{})}))),{}),ox=xS({type:SS("register_client"),clientRef:qC,clientDetails:QC,integration:BC,consent:MC,partnerCookies:jC,idCookieSettings:LC,urlCollectionSettings:VC,contextElementCollectionSettings:zC,collectSettings:TC,autoCollectSettings:DC,resolveSettings:GC,pixelSyncSettings:WC,eventTriggeredCollectionSettings:YC,emailExtractionSettings:XC,id5CollectionSettings:KC,pageDependentSettings:nx}),ix=xS({type:SS("collect"),clientRef:qC,sourceEvent:AC}),sx=xS({type:SS("resolve"),clientRef:qC,requestedAttributes:ex,additionalResolveParameters:rx,onFailure:PS(_C()),onSuccess:yS(JC)}),ax=US("level",[xS({type:SS("log"),level:SS("debug"),message:RS(),context:PS(ES({}))}),xS({type:SS("log"),level:SS("info"),message:RS(),context:PS(ES({}))}),xS({type:SS("log"),level:SS("warn"),message:RS(),context:PS(ES({}))}),xS({type:SS("log"),level:SS("error"),name:RS(),message:RS(),cause:PS(function e(t,r){return{kind:"schema",type:"instance",reference:e,expects:t.name,async:!1,class:t,message:r,_run(e,t){return e.value instanceof this.class?e.typed=!0:hS(this,"type",e,t),e}}}(Error)),context:PS(ES({}))})]),lx=US("type",[ox,ix,sx,xS({type:SS("debug"),onEvents:PS(_C()),onHub:PS(_C())}),ax]),cx=ES({globalVarName:RS(),distributorId:RS(),wrapperName:PS(RS()),collaborator:PS(RS()),usPrivacyString:PS(RS()),gdprApplies:PS(mS(),!1),gdprConsent:PS(RS()),forcedPrivacyMode:PS(mS(),!1),sync:PS(mS()),euns:PS(mS()),pixelTimeout:PS(CS()),identifiersToResolve:PS(IS([RS(),yS(RS())])),identityResolutionConfig:PS(xS({ajaxTimeout:PS(CS()),source:PS(RS()),requestedAttributes:PS(yS(RS())),idCookieMode:PS(IS([SS("generated"),SS("provided")]))})),urlCollectionMode:PS(IS([SS("full"),SS("no_path")]),"full"),queryParametersFilter:PS(RS()),ajaxTimeout:PS(CS()),ajaxRetries:PS(CS()),contextSelectors:PS(RS()),contextElementsLength:PS(CS()),peopleVerifiedId:PS(RS()),gppString:PS(RS()),gppApplicableSections:PS(yS(CS())),resolutionSync:AS(PS(ES({enabled:PS(mS(),!1)}),{}),US("enabled",[xS({enabled:SS(!1)}),xS({enabled:SS(!0),targetKey:RS(),strategy:IS([SS("cookie"),SS("ls")]),resolutionOptions:rx})])),scrapingCookieNames:PS(IS([RS(),yS(RS())])),defaultEventDelay:PS(CS()),emailExtraction:PS(_S()),id5Collection:PS(_S()),eventTriggeredCollection:PS(_S()),pageDependentSettings:PS(_S())});xS({appId:PS(RS()),wrapperName:PS(RS()),usPrivacyString:PS(RS()),collaborator:PS(RS()),gdprApplies:PS(mS(),!1),gdprConsent:PS(RS()),forcedPrivacyMode:PS(mS(),!1),identifiersToResolve:PS(IS([RS(),yS(RS())])),identityResolutionConfig:PS(xS({ajaxTimeout:PS(CS()),source:PS(RS()),publisherId:PS(IS([RS(),CS()])),requestedAttributes:PS(yS(RS())),idCookieMode:PS(IS([SS("generated"),SS("provided")]))})),urlCollectionMode:PS(IS([SS("full"),SS("no_path")]),"full"),queryParametersFilter:PS(RS()),ajaxTimeout:PS(CS()),ajaxRetries:PS(CS()),contextSelectors:PS(RS()),contextElementsLength:PS(CS()),gppString:PS(RS()),gppApplicableSections:PS(yS(CS())),scrapingCookieNames:PS(IS([RS(),yS(RS())])),defaultEventDelay:PS(CS()),sync:PS(mS()),euns:PS(mS()),pixelTimeout:PS(CS()),emailExtraction:PS(_S()),id5Collection:PS(_S()),eventTriggeredCollection:PS(_S()),pageDependentSettings:PS(_S())});class ux{constructor(e,t,r,n,o){Tw(this,"logger",void 0),Tw(this,"running",!1),Tw(this,"hubPromise",void 0),Tw(this,"bufferedCommands",[]),this.logger=n;const i=new OC(this,this.logger.withContext({component:"scheduler"}));this.hubPromise=CC.makeAsync(e,t,r,n,o,this,i)}push(...e){for(const t of e){const e=jS(lx,t);e.success?this.pushInternal(e.output):this.logger.error(new dx(t,e.issues))}return this.bufferedCommands.length}pushInternal(...e){var t;const r=to(t=this.bufferedCommands).call(t,...e);return this.running||(this.running=!0,this.drain()),r}collectQueued(){return this.bufferedCommands.some((e=>"collect"===e.type))}get length(){return this.bufferedCommands.length}drain(){var e=this;return jw((function*(){const t=yield e.hubPromise;for(;e.bufferedCommands.length>0;){const r=e.bufferedCommands.shift();try{yield t.processCommand(r)}catch(t){e.logger.error(new px(t),{command:r})}}e.running=!1}))()}}class dx extends pb{constructor(e,t){super("MalformedCommandError","hub received malformed command"),Tw(this,"command",void 0),Tw(this,"issues",void 0),this.command=e,this.issues=t,this.command=e,this.issues=t}}class px extends pb{constructor(e){super("CommandExecutionError","Failed to execute command",{cause:e})}}if(null==window.liQHub||Array.isArray(window.liQHub)){const e=new gb({callHandler:new Cb(eS.make()),pixelBaseUrl:aS,sampleRate:nS,version:iS}),t=eS.make(sS,[e]).withContext({wrapperName:"hub"}),r=new bb,n=new ux(new Gb,r,new Qb(t),t,{hubVersion:iS,syncContainerEndpointUrl:uS,idexEndpointUrl:oS,syncWait:dS,pixelBaseUrl:aS,sideChannelCollectorUrl:lS,sideChannelRegisterCollectDelay:cS,iframeMessageTimeout:pS});Array.isArray(window.liQHub)&&window.liQHub.forEach((e=>to(n).call(n,e))),window.liQHub={push:(...e)=>to(n).call(n,...e),length:n.length}}else console.log("Not starting liQHub: window.liQHub is neither undefined nor an array");class fx{constructor(e,t){Tw(this,"pusher",void 0),Tw(this,"version",void 0),Tw(this,"seenGlobalVarNames",new Set),this.pusher=e,this.version=t}push(...e){for(const o of e){const e=jS(cx,o);if(e.success){const n=e.output.globalVarName;if(this.seenGlobalVarNames.has(n)){var t;to(t=this.pusher()).call(t,{type:"log",level:"error",name:"DistributorEntryDuplicateConfigForVarname",message:`Distributor config already received for global var name ${n}`})}else{const t=hx.make(this.pusher,this.version,e.output);var r;if(null==t)to(r=this.pusher()).call(r,{type:"log",level:"error",name:"DistributorEntryFailedToCreateClient",message:"Failed to create distributor client"});else this.attachClientToWindow(t,n)}}else{var n;to(n=this.pusher()).call(n,{type:"log",level:"error",name:"DistributorEntryInvalidConfig",message:"Invalid distributor config received",context:{issues:e.issues}})}}return this.pusher.length}get length(){return this.pusher.length}attachClientToWindow(e,t){const r=window,n=r[t];if(null==n)r[t]=e,this.seenGlobalVarNames.add(t);else if(Array.isArray(n))n.forEach((t=>to(e).call(e,t))),r[t]=e,this.seenGlobalVarNames.add(t);else{var o;to(o=this.pusher()).call(o,{type:"log",level:"error",name:"DistributorEntryVarNameAlreadyTaken",message:`Global var name ${t} already taken`})}}}class hx{constructor(e,t,r){Tw(this,"config",void 0),Tw(this,"pusher",void 0),Tw(this,"clientRef",void 0),Tw(this,"ready",!0),this.config=e,this.pusher=t,this.clientRef=r}static make(e,t,r){var n,o,i,s,a;const l={},c=r.identityResolutionConfig,u=null!==(n=null==c?void 0:c.requestedAttributes)&&void 0!==n?n:[],d=new hx(r,e,l);if(to(o=e()).call(o,{type:"register_client",clientRef:l,integration:mx(r),partnerCookies:yx(r),clientDetails:{name:null!==(i=r.wrapperName)&&void 0!==i?i:"lc-bundle",version:t,collaborator:r.collaborator},consent:vx(r),contextElementCollectionSettings:wx(r),urlCollectionSettings:gx(r),collectSettings:{timeout:r.ajaxTimeout,retries:r.ajaxRetries},autoCollectSettings:{enabled:!0,delay:r.defaultEventDelay},pixelSyncSettings:{enabled:r.sync,pixelTimeout:r.pt,euns:r.euns},resolveSettings:{identityPartner:null===(s=r.identityResolutionConfig)||void 0===s?void 0:s.source},emailExtractionSettings:r.emailExtraction,id5CollectionSettings:r.id5Collection,eventTriggeredCollectionSettings:r.eventTriggeredCollection,pageDependentSettings:r.pageDependentSettings}),null!==(a=r.resolutionSync)&&void 0!==a&&a.enabled){var p;const t=r.resolutionSync,n="cookie"===t.strategy?{type:"write_to_cookie",targetKey:t.targetKey}:{type:"write_to_local_storage",targetKey:t.targetKey};to(p=e()).call(p,{type:"resolve",clientRef:l,onSuccess:[n],requestedAttributes:u,additionalResolveParameters:t.resolutionOptions})}return d}push(...e){e.forEach((e=>this.pushOne(e)))}resolve(e,t,r){"function"==typeof t?this.resolveHelper(e,t,r):this.resolveHelper(e,void 0,t)}resolveHelper(e,t,r){var n,o,i;to(n=this.pusher()).call(n,{type:"resolve",clientRef:this.clientRef,onSuccess:[{type:"callback",callback:e}],onFailure:t,requestedAttributes:null!==(o=null===(i=this.config.identityResolutionConfig)||void 0===i?void 0:i.requestedAttributes)&&void 0!==o?o:[],additionalResolveParameters:r})}pushOne(e){var t;null!=e&&"object"==typeof e&&to(t=this.pusher()).call(t,{type:"collect",clientRef:this.clientRef,sourceEvent:e})}}const gx=e=>({mode:e.urlCollectionMode,queryParametersFilter:e.queryParametersFilter}),vx=e=>{var t;if(!(e.forcedPrivacyMode||null!=e.gdprConsent||null!=e.usPrivacyString||null!=e.gppString))return;const r=null!=e.gdprConsent?{gdprApplies:e.gdprApplies,consentString:e.gdprConsent}:void 0;return{forcedPrivacyMode:e.forcedPrivacyMode,gdpr:r,usPrivacy:null!=e.usPrivacyString?{consentString:e.usPrivacyString}:void 0,gpp:null!=e.gppString?{consentString:e.gppString,applicableSections:null!==(t=e.gppApplicableSections)&&void 0!==t?t:[]}:void 0}},yx=e=>{var t,r;const n=null!==(t=null!==(r=e.identifiersToResolve)&&void 0!==r?r:e.scrapingCookieNames)&&void 0!==t?t:[];return"string"==typeof n?new Set(n.split(",").map((e=>Um(e).call(e)))):new Set(n)},mx=e=>({type:"distributor",distributorId:e.distributorId}),wx=e=>{var t;return null!=e.contextSelectors?{enabled:!0,contextSelectors:e.contextSelectors,maxLength:null!==(t=e.contextElementsLength)&&void 0!==t?t:0}:{enabled:!1}};if(window.liQHub=null!==(Rw=window.liQHub)&&void 0!==Rw?Rw:[],null==window.liQd)window.liQd=new fx((()=>window.liQHub),iS);else if(Array.isArray(window.liQd)){const e=new fx((()=>window.liQHub),iS);window.liQd.forEach((t=>to(e).call(e,t))),window.liQd=e}else if("object"==typeof window.liQd&&"push"in window.liQd){var bx;to(bx=window.liQHub).call(bx,{type:"log",level:"info",message:"Not initializing liQd as it is already present"})}else{var Sx;to(Sx=window.liQHub).call(Sx,{type:"log",level:"error",name:"DistributorEntryInvalidWindow",message:"window.liQd is neither null or an array"})}}();
