var yr=Object.defineProperty;var $r=(e,t,r)=>t in e?yr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var q=(e,t,r)=>$r(e,typeof t!="symbol"?t+"":t,r);import{r as T,g as rt,j as a,h as te,a0 as wr,a1 as et,a2 as br,n as ze,C as He,o as de,a3 as Yt,a4 as vt,G as Wt,M as Gt,a5 as jr,a6 as Mr,L as Ae,a7 as Ir,K as _r,a8 as Dr,a9 as Tr,N as Cr}from"./widget-CtZ8uwGu.js";import{g as it,h as nt,i as st,j as Ue,l as De,p as at,t as Pr,_ as Ar,w as qe,m as $e,$ as Or,B as V,K as Sr,I as Le,D as Te,a0 as ot,a1 as kr,a2 as Be,N as tt,a3 as Nr,G as Er,a4 as Ke,a5 as Ft,a6 as Lr,A as Re,a7 as Rr,a8 as zr,z as Hr,M as Ur,a9 as qr,aa as Br,ab as yt,ac as $t,ad as Yr,ae as wt}from"./Widget-BabkmTTu.js";import{e as Vt}from"./WidgetApp-BPXBIQGr.js";import{u as Kt,a as Wr,M as Gr,L as Fr,D as Vr}from"./useIsMounted-CqlHmoi5.js";function Kr(e){return nt("MuiCardActionArea",e)}const Qe=it("MuiCardActionArea",["root","focusVisible","focusHighlight"]),Qr=["children","className","focusVisibleClassName"],Zr=e=>{const{classes:t}=e;return at({root:["root"],focusHighlight:["focusHighlight"]},Kr,t)},Jr=Ue(Pr,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${Qe.focusHighlight}`]:{opacity:(e.vars||e).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${Qe.focusVisible} .${Qe.focusHighlight}`]:{opacity:(e.vars||e).palette.action.focusOpacity}})),Xr=Ue("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(e,t)=>t.focusHighlight})(({theme:e})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})})),ei=T.forwardRef(function(t,r){const i=st({props:t,name:"MuiCardActionArea"}),{children:n,className:w,focusVisibleClassName:h}=i,d=rt(i,Qr),s=i,g=Zr(s);return a.jsxs(Jr,te({className:De(g.root,w),focusVisibleClassName:De(h,g.focusVisible),ref:r,ownerState:s},d,{children:[n,a.jsx(Xr,{className:g.focusHighlight,ownerState:s})]}))});function ti(e){return nt("MuiImageList",e)}it("MuiImageList",["root","masonry","quilted","standard","woven"]);const Qt=T.createContext({}),ri=["children","className","cols","component","rowHeight","gap","style","variant"],ii=e=>{const{classes:t,variant:r}=e;return at({root:["root",r]},ti,t)},ni=Ue("ul",{name:"MuiImageList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant]]}})(({ownerState:e})=>te({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"},e.variant==="masonry"&&{display:"block"})),si=T.forwardRef(function(t,r){const i=st({props:t,name:"MuiImageList"}),{children:n,className:w,cols:h=2,component:d="ul",rowHeight:s="auto",gap:g=4,style:C,variant:$="standard"}=i,m=rt(i,ri),x=T.useMemo(()=>({rowHeight:s,gap:g,variant:$}),[s,g,$]);T.useEffect(()=>{},[]);const v=$==="masonry"?te({columnCount:h,columnGap:g},C):te({gridTemplateColumns:`repeat(${h}, 1fr)`,gap:g},C),c=te({},i,{component:d,gap:g,rowHeight:s,variant:$}),b=ii(c);return a.jsx(ni,te({as:d,className:De(b.root,b[$],w),ref:r,style:v,ownerState:c},m,{children:a.jsx(Qt.Provider,{value:x,children:n})}))});function ai(e){return nt("MuiImageListItem",e)}const bt=it("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),oi=["children","className","cols","component","rows","style"],ci=e=>{const{classes:t,variant:r}=e;return at({root:["root",r],img:["img"]},ai,t)},li=Ue("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${bt.img}`]:t.img},t.root,t[r.variant]]}})(({ownerState:e})=>te({display:"block",position:"relative"},e.variant==="standard"&&{display:"flex",flexDirection:"column"},e.variant==="woven"&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},{[`& .${bt.img}`]:te({objectFit:"cover",width:"100%",height:"100%",display:"block"},e.variant==="standard"&&{height:"auto",flexGrow:1})})),ui=T.forwardRef(function(t,r){const i=st({props:t,name:"MuiImageListItem"}),{children:n,className:w,cols:h=1,component:d="li",rows:s=1,style:g}=i,C=rt(i,oi),{rowHeight:$="auto",gap:m,variant:x}=T.useContext(Qt);let v="auto";x==="woven"?v=void 0:$!=="auto"&&(v=$*s+m*(s-1));const c=te({},i,{cols:h,component:d,gap:m,rowHeight:$,rows:s,variant:x}),b=ci(c);return a.jsx(li,te({as:d,className:De(b.root,b[x],w),ref:r,style:te({height:v,gridColumnEnd:x!=="masonry"?`span ${h}`:void 0,gridRowEnd:x!=="masonry"?`span ${s}`:void 0,marginBottom:x==="masonry"?m:void 0,breakInside:x==="masonry"?"avoid":void 0},g),ownerState:c},C,{children:T.Children.map(n,D=>T.isValidElement(D)?D.type==="img"||Ar(D,["Image"])?T.cloneElement(D,{className:De(b.img,D.props.className)}):D:null)}))});var di=/\s/;function fi(e){for(var t=e.length;t--&&di.test(e.charAt(t)););return t}var hi=/^\s+/;function pi(e){return e&&e.slice(0,fi(e)+1).replace(hi,"")}var jt=NaN,gi=/^[-+]0x[0-9a-f]+$/i,mi=/^0b[01]+$/i,xi=/^0o[0-7]+$/i,vi=parseInt;function Mt(e){if(typeof e=="number")return e;if(wr(e))return jt;if(et(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=et(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=pi(e);var r=mi.test(e);return r||xi.test(e)?vi(e.slice(2),r?2:8):gi.test(e)?jt:+e}var Ze=function(){return br.Date.now()},yi="Expected a function",$i=Math.max,wi=Math.min;function bi(e,t,r){var i,n,w,h,d,s,g=0,C=!1,$=!1,m=!0;if(typeof e!="function")throw new TypeError(yi);t=Mt(t)||0,et(r)&&(C=!!r.leading,$="maxWait"in r,w=$?$i(Mt(r.maxWait)||0,t):w,m="trailing"in r?!!r.trailing:m);function x(_){var L=i,B=n;return i=n=void 0,g=_,h=e.apply(B,L),h}function v(_){return g=_,d=setTimeout(D,t),C?x(_):h}function c(_){var L=_-s,B=_-g,Y=t-L;return $?wi(Y,w-B):Y}function b(_){var L=_-s,B=_-g;return s===void 0||L>=t||L<0||$&&B>=w}function D(){var _=Ze();if(b(_))return S(_);d=setTimeout(D,c(_))}function S(_){return d=void 0,m&&i?x(_):(i=n=void 0,h)}function P(){d!==void 0&&clearTimeout(d),g=0,i=s=n=d=void 0}function k(){return d===void 0?h:S(Ze())}function I(){var _=Ze(),L=b(_);if(i=arguments,n=this,s=_,L){if(d===void 0)return v(s);if($)return clearTimeout(d),d=setTimeout(D,t),x(s)}return d===void 0&&(d=setTimeout(D,t)),h}return I.cancel=P,I.flush=k,I}var be={},It;function ji(){if(It)return be;It=1;var e=ze();Object.defineProperty(be,"__esModule",{value:!0}),be.default=void 0;var t=e(qe()),r=He();return be.default=(0,t.default)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),be}var Mi=ji();const Ii=de(Mi);var je={},_t;function _i(){if(_t)return je;_t=1;var e=ze();Object.defineProperty(je,"__esModule",{value:!0}),je.default=void 0;var t=e(qe()),r=He();return je.default=(0,t.default)((0,r.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward"),je}var Di=_i();const Ti=de(Di),Ci=(e,t)=>{const[r,i]=T.useState(e);return T.useEffect(()=>{const n=setTimeout(()=>i(e),t);return()=>clearTimeout(n)},[t,e]),r},Dt=(e,t)=>{const r=T.useRef(!0),i=Kt();T.useEffect(()=>{let n=()=>{};if(r.current)r.current=!1;else{const w=e();n=typeof w=="function"&&w||n}return()=>{n==null||n(),i.current||(r.current=!0)}},t)};var ke={exports:{}},Pi=ke.exports,Tt;function Ai(){return Tt||(Tt=1,function(e,t){(function(r,i){e.exports=i()})(Pi,function(){var r="minute",i=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(w,h,d){var s=h.prototype;d.utc=function(c){var b={date:c,utc:!0,args:arguments};return new h(b)},s.utc=function(c){var b=d(this.toDate(),{locale:this.$L,utc:!0});return c?b.add(this.utcOffset(),r):b},s.local=function(){return d(this.toDate(),{locale:this.$L,utc:!1})};var g=s.parse;s.parse=function(c){c.utc&&(this.$u=!0),this.$utils().u(c.$offset)||(this.$offset=c.$offset),g.call(this,c)};var C=s.init;s.init=function(){if(this.$u){var c=this.$d;this.$y=c.getUTCFullYear(),this.$M=c.getUTCMonth(),this.$D=c.getUTCDate(),this.$W=c.getUTCDay(),this.$H=c.getUTCHours(),this.$m=c.getUTCMinutes(),this.$s=c.getUTCSeconds(),this.$ms=c.getUTCMilliseconds()}else C.call(this)};var $=s.utcOffset;s.utcOffset=function(c,b){var D=this.$utils().u;if(D(c))return this.$u?0:D(this.$offset)?$.call(this):this.$offset;if(typeof c=="string"&&(c=function(I){I===void 0&&(I="");var _=I.match(i);if(!_)return null;var L=(""+_[0]).match(n)||["-",0,0],B=L[0],Y=60*+L[1]+ +L[2];return Y===0?0:B==="+"?Y:-Y}(c),c===null))return this;var S=Math.abs(c)<=16?60*c:c,P=this;if(b)return P.$offset=S,P.$u=c===0,P;if(c!==0){var k=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(P=this.local().add(S+k,r)).$offset=S,P.$x.$localOffset=k}else P=this.utc();return P};var m=s.format;s.format=function(c){var b=c||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return m.call(this,b)},s.valueOf=function(){var c=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*c},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()};var x=s.toDate;s.toDate=function(c){return c==="s"&&this.$offset?d(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():x.call(this)};var v=s.diff;s.diff=function(c,b,D){if(c&&this.$u===c.$u)return v.call(this,c,b,D);var S=this.local(),P=d(c).local();return v.call(S,P,b,D)}}})}(ke)),ke.exports}var Oi=Ai();const Si=de(Oi);var Ne={exports:{}},ki=Ne.exports,Ct;function Ni(){return Ct||(Ct=1,function(e,t){(function(r,i){e.exports=i()})(ki,function(){var r={year:0,month:1,day:2,hour:3,minute:4,second:5},i={};return function(n,w,h){var d,s=function(m,x,v){v===void 0&&(v={});var c=new Date(m),b=function(D,S){S===void 0&&(S={});var P=S.timeZoneName||"short",k=D+"|"+P,I=i[k];return I||(I=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:D,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:P}),i[k]=I),I}(x,v);return b.formatToParts(c)},g=function(m,x){for(var v=s(m,x),c=[],b=0;b<v.length;b+=1){var D=v[b],S=D.type,P=D.value,k=r[S];k>=0&&(c[k]=parseInt(P,10))}var I=c[3],_=I===24?0:I,L=c[0]+"-"+c[1]+"-"+c[2]+" "+_+":"+c[4]+":"+c[5]+":000",B=+m;return(h.utc(L).valueOf()-(B-=B%1e3))/6e4},C=w.prototype;C.tz=function(m,x){m===void 0&&(m=d);var v,c=this.utcOffset(),b=this.toDate(),D=b.toLocaleString("en-US",{timeZone:m}),S=Math.round((b-new Date(D))/1e3/60),P=15*-Math.round(b.getTimezoneOffset()/15)-S;if(!Number(P))v=this.utcOffset(0,x);else if(v=h(D,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(P,!0),x){var k=v.utcOffset();v=v.add(c-k,"minute")}return v.$x.$timezone=m,v},C.offsetName=function(m){var x=this.$x.$timezone||h.tz.guess(),v=s(this.valueOf(),x,{timeZoneName:m}).find(function(c){return c.type.toLowerCase()==="timezonename"});return v&&v.value};var $=C.startOf;C.startOf=function(m,x){if(!this.$x||!this.$x.$timezone)return $.call(this,m,x);var v=h(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return $.call(v,m,x).tz(this.$x.$timezone,!0)},h.tz=function(m,x,v){var c=v&&x,b=v||x||d,D=g(+h(),b);if(typeof m!="string")return h(m).tz(b);var S=function(_,L,B){var Y=_-60*L*1e3,O=g(Y,B);if(L===O)return[Y,L];var A=g(Y-=60*(O-L)*1e3,B);return O===A?[Y,O]:[_-60*Math.min(O,A)*1e3,Math.max(O,A)]}(h.utc(m,c).valueOf(),D,b),P=S[0],k=S[1],I=h(P).utcOffset(k);return I.$x.$timezone=b,I},h.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},h.tz.setDefault=function(m){d=m}}})}(Ne)),Ne.exports}var Ei=Ni();const Li=de(Ei);var Ee={exports:{}},Ri=Ee.exports,Pt;function zi(){return Pt||(Pt=1,function(e,t){(function(r,i){e.exports=i()})(Ri,function(){var r=1e3,i=6e4,n=36e5,w="millisecond",h="second",d="minute",s="hour",g="day",C="week",$="month",m="quarter",x="year",v="date",c="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,D=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(j){var u=["th","st","nd","rd"],o=j%100;return"["+j+(u[(o-20)%10]||u[o]||u[0])+"]"}},P=function(j,u,o){var p=String(j);return!p||p.length>=u?j:""+Array(u+1-p.length).join(o)+j},k={s:P,z:function(j){var u=-j.utcOffset(),o=Math.abs(u),p=Math.floor(o/60),l=o%60;return(u<=0?"+":"-")+P(p,2,"0")+":"+P(l,2,"0")},m:function j(u,o){if(u.date()<o.date())return-j(o,u);var p=12*(o.year()-u.year())+(o.month()-u.month()),l=u.clone().add(p,$),f=o-l<0,y=u.clone().add(p+(f?-1:1),$);return+(-(p+(o-l)/(f?l-y:y-l))||0)},a:function(j){return j<0?Math.ceil(j)||0:Math.floor(j)},p:function(j){return{M:$,y:x,w:C,d:g,D:v,h:s,m:d,s:h,ms:w,Q:m}[j]||String(j||"").toLowerCase().replace(/s$/,"")},u:function(j){return j===void 0}},I="en",_={};_[I]=S;var L="$isDayjsObject",B=function(j){return j instanceof fe||!(!j||!j[L])},Y=function j(u,o,p){var l;if(!u)return I;if(typeof u=="string"){var f=u.toLowerCase();_[f]&&(l=f),o&&(_[f]=o,l=f);var y=u.split("-");if(!l&&y.length>1)return j(y[0])}else{var N=u.name;_[N]=u,l=N}return!p&&l&&(I=l),l||!p&&I},O=function(j,u){if(B(j))return j.clone();var o=typeof u=="object"?u:{};return o.date=j,o.args=arguments,new fe(o)},A=k;A.l=Y,A.i=B,A.w=function(j,u){return O(j,{locale:u.$L,utc:u.$u,x:u.$x,$offset:u.$offset})};var fe=function(){function j(o){this.$L=Y(o.locale,null,!0),this.parse(o),this.$x=this.$x||o.x||{},this[L]=!0}var u=j.prototype;return u.parse=function(o){this.$d=function(p){var l=p.date,f=p.utc;if(l===null)return new Date(NaN);if(A.u(l))return new Date;if(l instanceof Date)return new Date(l);if(typeof l=="string"&&!/Z$/i.test(l)){var y=l.match(b);if(y){var N=y[2]-1||0,R=(y[7]||"0").substring(0,3);return f?new Date(Date.UTC(y[1],N,y[3]||1,y[4]||0,y[5]||0,y[6]||0,R)):new Date(y[1],N,y[3]||1,y[4]||0,y[5]||0,y[6]||0,R)}}return new Date(l)}(o),this.init()},u.init=function(){var o=this.$d;this.$y=o.getFullYear(),this.$M=o.getMonth(),this.$D=o.getDate(),this.$W=o.getDay(),this.$H=o.getHours(),this.$m=o.getMinutes(),this.$s=o.getSeconds(),this.$ms=o.getMilliseconds()},u.$utils=function(){return A},u.isValid=function(){return this.$d.toString()!==c},u.isSame=function(o,p){var l=O(o);return this.startOf(p)<=l&&l<=this.endOf(p)},u.isAfter=function(o,p){return O(o)<this.startOf(p)},u.isBefore=function(o,p){return this.endOf(p)<O(o)},u.$g=function(o,p,l){return A.u(o)?this[p]:this.set(l,o)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(o,p){var l=this,f=!!A.u(p)||p,y=A.p(o),N=function(re,z){var J=A.w(l.$u?Date.UTC(l.$y,z,re):new Date(l.$y,z,re),l);return f?J:J.endOf(g)},R=function(re,z){return A.w(l.toDate()[re].apply(l.toDate("s"),(f?[0,0,0,0]:[23,59,59,999]).slice(z)),l)},U=this.$W,W=this.$M,F=this.$D,ae="set"+(this.$u?"UTC":"");switch(y){case x:return f?N(1,0):N(31,11);case $:return f?N(1,W):N(0,W+1);case C:var Q=this.$locale().weekStart||0,ce=(U<Q?U+7:U)-Q;return N(f?F-ce:F+(6-ce),W);case g:case v:return R(ae+"Hours",0);case s:return R(ae+"Minutes",1);case d:return R(ae+"Seconds",2);case h:return R(ae+"Milliseconds",3);default:return this.clone()}},u.endOf=function(o){return this.startOf(o,!1)},u.$set=function(o,p){var l,f=A.p(o),y="set"+(this.$u?"UTC":""),N=(l={},l[g]=y+"Date",l[v]=y+"Date",l[$]=y+"Month",l[x]=y+"FullYear",l[s]=y+"Hours",l[d]=y+"Minutes",l[h]=y+"Seconds",l[w]=y+"Milliseconds",l)[f],R=f===g?this.$D+(p-this.$W):p;if(f===$||f===x){var U=this.clone().set(v,1);U.$d[N](R),U.init(),this.$d=U.set(v,Math.min(this.$D,U.daysInMonth())).$d}else N&&this.$d[N](R);return this.init(),this},u.set=function(o,p){return this.clone().$set(o,p)},u.get=function(o){return this[A.p(o)]()},u.add=function(o,p){var l,f=this;o=Number(o);var y=A.p(p),N=function(W){var F=O(f);return A.w(F.date(F.date()+Math.round(W*o)),f)};if(y===$)return this.set($,this.$M+o);if(y===x)return this.set(x,this.$y+o);if(y===g)return N(1);if(y===C)return N(7);var R=(l={},l[d]=i,l[s]=n,l[h]=r,l)[y]||1,U=this.$d.getTime()+o*R;return A.w(U,this)},u.subtract=function(o,p){return this.add(-1*o,p)},u.format=function(o){var p=this,l=this.$locale();if(!this.isValid())return l.invalidDate||c;var f=o||"YYYY-MM-DDTHH:mm:ssZ",y=A.z(this),N=this.$H,R=this.$m,U=this.$M,W=l.weekdays,F=l.months,ae=l.meridiem,Q=function(z,J,oe,he){return z&&(z[J]||z(p,f))||oe[J].slice(0,he)},ce=function(z){return A.s(N%12||12,z,"0")},re=ae||function(z,J,oe){var he=z<12?"AM":"PM";return oe?he.toLowerCase():he};return f.replace(D,function(z,J){return J||function(oe){switch(oe){case"YY":return String(p.$y).slice(-2);case"YYYY":return A.s(p.$y,4,"0");case"M":return U+1;case"MM":return A.s(U+1,2,"0");case"MMM":return Q(l.monthsShort,U,F,3);case"MMMM":return Q(F,U);case"D":return p.$D;case"DD":return A.s(p.$D,2,"0");case"d":return String(p.$W);case"dd":return Q(l.weekdaysMin,p.$W,W,2);case"ddd":return Q(l.weekdaysShort,p.$W,W,3);case"dddd":return W[p.$W];case"H":return String(N);case"HH":return A.s(N,2,"0");case"h":return ce(1);case"hh":return ce(2);case"a":return re(N,R,!0);case"A":return re(N,R,!1);case"m":return String(R);case"mm":return A.s(R,2,"0");case"s":return String(p.$s);case"ss":return A.s(p.$s,2,"0");case"SSS":return A.s(p.$ms,3,"0");case"Z":return y}return null}(z)||y.replace(":","")})},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(o,p,l){var f,y=this,N=A.p(p),R=O(o),U=(R.utcOffset()-this.utcOffset())*i,W=this-R,F=function(){return A.m(y,R)};switch(N){case x:f=F()/12;break;case $:f=F();break;case m:f=F()/3;break;case C:f=(W-U)/6048e5;break;case g:f=(W-U)/864e5;break;case s:f=W/n;break;case d:f=W/i;break;case h:f=W/r;break;default:f=W}return l?f:A.a(f)},u.daysInMonth=function(){return this.endOf($).$D},u.$locale=function(){return _[this.$L]},u.locale=function(o,p){if(!o)return this.$L;var l=this.clone(),f=Y(o,p,!0);return f&&(l.$L=f),l},u.clone=function(){return A.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},j}(),we=fe.prototype;return O.prototype=we,[["$ms",w],["$s",h],["$m",d],["$H",s],["$W",g],["$M",$],["$y",x],["$D",v]].forEach(function(j){we[j[1]]=function(u){return this.$g(u,j[0],j[1])}}),O.extend=function(j,u){return j.$i||(j(u,fe,O),j.$i=!0),O},O.locale=Y,O.isDayjs=B,O.unix=function(j){return O(1e3*j)},O.en=_[I],O.Ls=_,O.p={},O})}(Ee)),Ee.exports}var Hi=zi();const Zt=de(Hi);Zt.extend(Si);Zt.extend(Li);const Ui=e=>{var r;return new Date().toDateString()===((r=e==null?void 0:e.toDateString)==null?void 0:r.call(e))},qi=e=>{var r;const t=new Date;return t.setDate(t.getDate()-1),t.toDateString()===((r=e==null?void 0:e.toDateString)==null?void 0:r.call(e))},Bi=e=>{var r;if(!e)return e;const t=new Date(e);return Ui(t)?"Today":qi(t)?"Yesterday":((r=t==null?void 0:t.toLocaleDateString)==null?void 0:r.call(t,void 0,{month:"short",day:"numeric"}))??"Today"},Yi=$e()(e=>({card:{background:e.colors.gradients.blue4},cardActionArea:{".MuiTouchRipple-root":{opacity:.2},".MuiCardActionArea-focusHighlight":{background:e.colors.primary.main},"&:hover":{".MuiCardActionArea-focusHighlight":{opacity:.03,background:`${e.colors.alpha.trueWhite[100]}`}},padding:16,display:"flex",alignItems:"center",justifyContent:"space-between"},avatar:{width:`${e.spacing(5.5)}`,height:`${e.spacing(5.5)}`,background:`${e.colors.success.main}`,color:`${e.palette.getContrastText(e.colors.success.dark)}`},copyWrapper:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},title:{color:`${e.colors.alpha.trueWhite[100]}`,fontSize:14},subTitle:{color:`${e.colors.alpha.trueWhite[70]}`,fontSize:13}})),Wi=({onClick:e,agentInfo:t})=>{const{classes:r}=Yi();return t?a.jsx(Or,{className:r.card,onClick:e,children:a.jsx(ei,{className:r.cardActionArea,children:a.jsxs(V,{display:"flex",width:"100%",children:[a.jsx(Sr,{src:t.avatarUrl,className:r.avatar,children:a.jsx(Wr,{})}),a.jsxs(V,{className:r.copyWrapper,children:[a.jsxs(Le,{className:r.title,variant:"h4",children:[t.name," is inviting you to join a call"]}),a.jsx(V,{mt:.5,display:"flex",alignItems:"center",children:a.jsx(Le,{className:r.subTitle,variant:"subtitle2",noWrap:!0,children:"Click here to enable your microphone"})})]})]})})}):a.jsx("div",{})};var Me={},At;function Gi(){if(At)return Me;At=1;var e=ze();Object.defineProperty(Me,"__esModule",{value:!0}),Me.default=void 0;var t=e(qe()),r=He();return Me.default=(0,t.default)((0,r.jsx)("path",{d:"M11.5 9H13v6h-1.5zM9 9H6c-.6 0-1 .5-1 1v4c0 .5.4 1 1 1h3c.6 0 1-.5 1-1v-2H8.5v1.5h-2v-3H10V10c0-.5-.4-1-1-1m10 1.5V9h-4.5v6H16v-2h2v-1.5h-2v-1z"}),"Gif"),Me}var Fi=Gi();const Vi=de(Fi);var Ie={},Ot;function Ki(){if(Ot)return Ie;Ot=1;var e=ze();Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.default=void 0;var t=e(qe()),r=He();return Ie.default=(0,t.default)((0,r.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload"),Ie}var Qi=Ki();const Zi=de(Qi);function ve(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}let Oe;const Ji=new Uint8Array(16);function Xi(){if(!Oe&&(Oe=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Oe))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Oe(Ji)}const G=[];for(let e=0;e<256;++e)G.push((e+256).toString(16).slice(1));function en(e,t=0){return G[e[t+0]]+G[e[t+1]]+G[e[t+2]]+G[e[t+3]]+"-"+G[e[t+4]]+G[e[t+5]]+"-"+G[e[t+6]]+G[e[t+7]]+"-"+G[e[t+8]]+G[e[t+9]]+"-"+G[e[t+10]]+G[e[t+11]]+G[e[t+12]]+G[e[t+13]]+G[e[t+14]]+G[e[t+15]]}const tn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),St={randomUUID:tn};function rn(e,t,r){if(St.randomUUID&&!e)return St.randomUUID();e=e||{};const i=e.random||(e.rng||Xi)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,en(i)}typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug");var ue="",Jt=16,nn=()=>{let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=t.length;for(let i=0;i<Jt;i++)e+=t.charAt(Math.floor(Math.random()*r));return e},sn=()=>{if(!ue){try{ue=sessionStorage.getItem("giphyPingbackId")}catch{}if(!ue){const e=new Date().getTime().toString(16);try{ue=`${e}${rn().replace(/-/g,"")}`.substring(0,Jt)}catch{ue=nn()}try{sessionStorage.setItem("giphyPingbackId",ue)}catch{}}}return ue},an=sn,Se=null;new Promise(e=>{typeof Image>"u"&&e(!1);const t=new Image;t.onload=()=>{Se=!0,e(Se)},t.onerror=()=>{Se=!1,e(Se)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var _e=(typeof window<"u"?window:global)||{};_e._GIPHY_SDK_HEADERS_=_e._GIPHY_SDK_HEADERS_||(_e.Headers?new _e.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var Xt=()=>_e._GIPHY_SDK_HEADERS_,kt=(e,t)=>{var r;return(r=Xt())==null?void 0:r.set(e,t)},on=Object.defineProperty,cn=Object.defineProperties,ln=Object.getOwnPropertyDescriptors,un=Object.getOwnPropertyNames,Nt=Object.getOwnPropertySymbols,dn=Object.prototype.hasOwnProperty,fn=Object.prototype.propertyIsEnumerable,Et=(e,t,r)=>t in e?on(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ne=(e,t)=>{for(var r in t||(t={}))dn.call(t,r)&&Et(e,r,t[r]);if(Nt)for(var r of Nt(t))fn.call(t,r)&&Et(e,r,t[r]);return e},Je=(e,t)=>cn(e,ln(t)),hn=(e=>typeof ve<"u"?ve:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof ve<"u"?ve:t)[r]}):e)(function(e){if(typeof ve<"u")return ve.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),pn=(e,t)=>function(){return t||(0,e[un(e)[0]])((t={exports:{}}).exports,t),t.exports},gn=(e,t,r)=>new Promise((i,n)=>{var w=s=>{try{d(r.next(s))}catch(g){n(g)}},h=s=>{try{d(r.throw(s))}catch(g){n(g)}},d=s=>s.done?i(s.value):Promise.resolve(s.value).then(w,h);d((r=r.apply(e,t)).next())}),mn=pn({"package.json"(e,t){t.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.6.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),xn=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],vn=["suppress_chrome","is_public","is_verified"],Lt=e=>t=>e[t]=!!e[t],yn=e=>typeof e=="string"?e:e.text,er=(e,t="")=>{const r=ne({},e);r.id=String(r.id),r.tags=(r.tags||[]).map(yn),r.bottle_data||(r.bottle_data={}),r.response_id=t,xn.forEach(Lt(r)),Object.keys(r.images||{}).forEach(n=>{const w=r.images[n];w.width=parseInt(w.width),w.height=parseInt(w.height)});const{user:i}=r;if(i){const n=ne({},i);vn.forEach(Lt(n)),r.user=n}return r},Rt=e=>{const{response_id:t}=e.meta;return e.data=er(e.data,t),e},se=e=>{const{response_id:t}=e.meta;return e.data=e.data.map(r=>er(r,t)),e},$n=(typeof window<"u"?window:global)||{},wn=$n.GIPHY_API_URL||"https://api.giphy.com/v1/",tr=class extends Error{constructor(e,t,r=0,i=""){super(e),this.url=t,this.status=r,this.statusText=i}},bn=class extends tr{},zt=tr,jn="@giphy/js-fetch-api: ",Mn="Error fetching",In=e=>e,ee={},_n=6e4,Dn=6e3,Tn=()=>{const e=Date.now();Object.keys(ee).forEach(t=>{const r=ee[t].isError?Dn:_n;e-ee[t].ts>=r&&delete ee[t]})};function Cn(e,t={}){const{apiVersion:r=1,noCache:i=!1,normalizer:n=In}=t,w=wn.replace(/\/v\d+\/$/,`/v${r}/`);if(Tn(),!ee[e]||i){const h=`${w}${e}`,d=()=>gn(this,null,function*(){var s,g;let C;try{const $=yield fetch(h,{method:"get"});if($.ok){const m=yield $.json();if((s=m.meta)!=null&&s.response_id)return n(m);throw{message:"synthetic response"}}else{let m=Mn;try{const v=yield $.json();v.message&&(m=v.message),(g=v.meta)!=null&&g.msg&&(m=v.meta.msg)}catch{}ee[e]&&(ee[e].isError=!0);let x=zt;m==="This content is not available in your location"&&(x=bn),C=new x(`${jn}${m}`,h,$.status,$.statusText)}}catch($){C=new zt($.message,h),ee[e]&&(ee[e].isError=!0)}throw C});ee[e]={request:d(),ts:Date.now()}}return ee[e].request}var K=Cn,Xe=e=>e&&e.type?e.type:"gifs",Pn=class{constructor(e,t={}){this.getQS=(r={})=>new URLSearchParams(ne(Je(ne({},r),{api_key:this.apiKey,pingback_id:an()}),this.qsParams)).toString(),this.apiKey=e,this.qsParams=t}categories(e){return K(`gifs/categories?${this.getQS(e)}`)}gif(e,t){const r=t!=null&&t.internal?"internal/":"";return K(`${r}gifs/${e}?${this.getQS()}`,{normalizer:Rt})}gifs(e,t){return Array.isArray(e)?K(`gifs?${this.getQS({ids:e.join(",")})}`,{normalizer:se}):K(`gifs/categories/${e}/${t}?${this.getQS()}`,{normalizer:se})}emoji(e){return K(`emoji?${this.getQS(e)}`,{normalizer:se})}emojiDefaultVariations(e){return K(`emoji?${this.getQS(e)}`,{apiVersion:2,normalizer:se})}emojiVariations(e){return K(`emoji/${e}/variations?${this.getQS()}`,{apiVersion:2,normalizer:se})}animate(e,t={}){const r=this.getQS(Je(ne({},t),{m:e}));return K(`text/animate?${r}`,{normalizer:se})}search(e,t={}){const r=t.channel?`@${t.channel} ${e}`:e;let i;t.type==="text"&&(i=!0);const n=this.getQS(Je(ne({rating:"pg-13"},t),{q:r,excludeDynamicResults:i}));return K(`${Xe(t)}/search?${n}`,{normalizer:se})}subcategories(e,t){return K(`gifs/categories/${e}?${this.getQS(t)}`)}trending(e={}){return K(`${Xe(e)}/trending?${this.getQS(ne({rating:"pg-13"},e))}`,{normalizer:se})}random(e){return K(`${Xe(e)}/random?${this.getQS(ne({rating:"pg-13"},e))}`,{noCache:!0,normalizer:Rt})}related(e,t={}){const{type:r="gifs"}=t;return K(`${r}/related?${this.getQS(ne({gif_id:e,rating:"pg-13"},t))}`,{normalizer:se})}channels(e,t={}){return K(`channels/search?${this.getQS(ne({q:e,rating:"pg-13"},t))}`)}},An=Pn,Ht;if(typeof hn<"u"){const{version:e}=mn();(Ht=Xt())!=null&&Ht.get("X-GIPHY-SDK-NAME")||(kt("X-GIPHY-SDK-NAME","FetchAPI"),kt("X-GIPHY-SDK-VERSION",e))}const ye={results:[],offset:0,searchTerm:"",initialized:!1,loading:!1},Ut=new An(jr);class On{constructor(){q(this,"results",ye.results);q(this,"initialized",ye.initialized);q(this,"searchTerm",ye.searchTerm);q(this,"offset",ye.offset);q(this,"loading",ye.loading);q(this,"initialize",()=>this.initialized=!0);q(this,"setSearchTerm",t=>{this.searchTerm=t,this.onSearchTermChange()});q(this,"onSearchTermChange",bi(Yt(()=>this.search(this.searchTerm)),500));q(this,"fetchFromGiphy",async()=>(this.searchTerm?await Ut.search(this.searchTerm,{offset:this.offset,limit:24}):await Ut.trending({limit:24})).data);q(this,"setOffset",()=>{this.offset+=10,this.fetch()});q(this,"search",t=>{this.searchTerm=t,this.results=[],this.offset=0,this.fetch()});q(this,"fetch",async()=>{vt(()=>{this.loading=!0});const t=await this.fetchFromGiphy();vt(()=>{this.loading=!1,this.results=[...this.results,...t]})});q(this,"resetState",()=>Object.entries(ye).forEach(([t,r])=>this[t]=r));Wt(this),Gt.on("logout",this.resetState)}}const qt=new On,Sn=$e()(e=>({container:{display:"flex",flexDirection:"column",height:"100%"},searchContainer:{padding:e.spacing(1),flex:"1 auto",flexDirection:"row",display:"flex"},searchInput:{"& .MuiInputBase-input":{fontSize:"16px"}},closeContainer:{justifyContent:"center",alignItems:"center",display:"flex",paddingLeft:e.spacing(1)},imageListContainer:{padding:e.spacing(0,1),overflow:"scroll",flex:"1 auto"},imageListItem:{overflow:"hidden",borderRadius:e.spacing(.5),cursor:"pointer"},imageList:{marginTop:0,position:"relative"},poweredBy:{width:100,position:"fixed",zIndex:100,borderRadius:e.spacing(.5)},poweredBySticky:{position:"absolute",top:8,right:108}})),kn=Te(({store:e})=>{const{sessionStore:{sendChatMessage:t},closePlugin:r}=e,{classes:i}=Sn(),{results:n,searchTerm:w,setSearchTerm:h}=qt,d=s=>{t(s,"gif"),r()};return ot(()=>{qt.fetch()}),kr(()=>h("")),a.jsxs(V,{className:i.container,children:[a.jsxs(V,{className:i.searchContainer,children:[a.jsx(V,{flex:"auto 1",children:a.jsx(Be,{id:"outlined-basic",label:"Search",variant:"outlined",autoComplete:"off",fullWidth:!0,value:w,onChange:s=>h(s.target.value),size:"small",className:i.searchInput})}),a.jsx(V,{className:i.closeContainer,children:a.jsx(tt,{size:"small",onClick:r,children:a.jsx(Nr,{})})})]}),a.jsx(V,{className:i.imageListContainer,children:a.jsxs(si,{cols:3,rowHeight:150,className:i.imageList,children:[a.jsx("div",{className:i.poweredBySticky,children:a.jsx("img",{src:"https://res.cloudinary.com/warmly/image/upload/v1676512664/warm_opps_chat_photos_development/spy9ervdkqjzb60k9wjy.gif",alt:"Powered By Giphy",className:i.poweredBy})}),n.map((s,g)=>a.jsx(ui,{className:i.imageListItem,onClick:()=>d(s.images.original.url),children:a.jsx("img",{src:`${s.images.fixed_height.url}`,alt:s.title,loading:"lazy"})},`${s.id}-${g}`))]})})]})}),Nn=Mr,En=`warm_opps_chat_photos_${Nn}`,Ln=$e()((e,{displayInline:t,compact:r})=>({container:{position:"relative",cursor:"pointer",height:"100%",width:"100%",...!r&&{width:"100%"},...t&&{display:"inline"}}})),Rn=({storageFolder:e=En,children:t,croppingAspectRatio:r,onUploadPhoto:i,onUploadCancelled:n,showSkipCropButton:w=!0,displayInline:h=!1,openImmediately:d=!1,singleUploadAutoClose:s=!1,message:g="Drag and drop your photo here",maxFileSize:C=2e6,compact:$=!1})=>{const{classes:m}=Ln({displayInline:h,compact:$}),x=Er(),v=async()=>{const c=async(S,P)=>{try{const k=await fetch(_r+Dr.CLOUDINARY_SIGNATURE,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(P)});if(!k.ok){Ae.error(new Error(`Signature request failed with status ${k.status}`));return}const{signature:I}=await k.json();S(I)}catch(k){Ae.error(k instanceof Error?k:new Error("Failed to generate upload signature"))}},b=(S,P)=>{var k;if(P.info==="hidden"){Ke("show"),n==null||n();return}if(S){const{statusText:I}=S;!(I!=null&&I.includes("exceeds maximum allowed"))&&!(I!=null&&I.includes("Invalid image file"))&&!(I!=null&&I.includes("abort"))&&Ae.error(new Error(I));return}if(P.event==="success"&&typeof P.info!="string"&&((k=P.info)!=null&&k.path)){const I=`https://res.cloudinary.com/warmly/image/upload/q_auto,f_auto,fl_lossy,c_crop,g_custom/${P.info.path}`;i(I,P.info.public_id,P.info.format),Ke("show")}},D=window.cloudinary;if(!D){Ae.error(new Error("Cloudinary widget not loaded")),n==null||n();return}Ke("hide"),D.createUploadWidget({api_key:Ir,uploadSignature:c,cloudName:"warmly",secure:!0,cropping:!0,croppingCoordinatesMode:"custom",croppingAspectRatio:r,croppingShowBackButton:!0,folder:e,showPoweredBy:!1,singleUploadAutoClose:s,showCompletedButton:!0,clientAllowedFormats:["jpg","png","jpeg","gif"],showSkipCropButton:w,maxFileSize:C,text:{en:{local:{dd_title_single:g,dd_title_multi:g}}},styles:{palette:{action:x.colors.primary.main,link:x.colors.primary.dark}}},b).open()};return ot(()=>{d&&v()}),a.jsx("div",{className:m.container,onClick:v,children:t})},zn=Te(({store:e})=>a.jsx(Rn,{openImmediately:!0,singleUploadAutoClose:!0,onUploadCancelled:()=>e.setSelectedPlugin(null),onUploadPhoto:t=>{e.sessionStore.sendChatMessage(t,"image"),e.setSelectedPlugin(null)}})),Hn=({defaultValue:e,showErrorOnEmpty:t,touched:r,...i})=>{const[n,w]=T.useState(e||""),[h,d]=T.useState(!1),s=Ft(n),g=Lr(n);let C=h&&!s,$=s&&!g?"Calendly link recommended":void 0;return!t&&!n&&(C=!1,$=void 0),T.useEffect(()=>{r!==void 0&&d(r)},[r]),T.useEffect(()=>{w(e)},[e]),a.jsx(Be,{...i,label:"Link to Calendar",value:n,onChange:m=>{var x;w(m.target.value),(x=i.onChange)==null||x.call(i,m)},error:C,helperText:C?"Enter a valid URL":$,onBlur:m=>{var x;d(!0),(x=i.onBlur)==null||x.call(i,m)}})},Un=$e()(()=>({container:{display:"flex",height:"100%",flexDirection:"column"},wrapper:{padding:"1rem",flex:1,overflow:"auto"},spacedBetween:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"},inputContainer:{display:"flex",flexDirection:"column",gap:"12px"},buttonContainer:{display:"flex",flexDirection:"column",gap:"10px"},textField:{"& .MuiInputBase-input":{fontSize:"16px"}}})),qn=Te(({store:e})=>{const[t,r]=T.useState(e.defaultCalendarLink),[i,n]=T.useState("Book a meeting"),[w,h]=T.useState(!1),{classes:d}=Un(),s=!i||w&&!Ft(t),g=()=>{if(w||h(!0),s||!t||!i)return;const C={calendarLink:t,buttonText:i};e.sessionStore.sendChatMessage(JSON.stringify(C),"calendar"),e.closePlugin()};return a.jsx("div",{className:d.container,children:a.jsx("div",{className:d.wrapper,children:a.jsxs("div",{className:d.spacedBetween,children:[a.jsxs("div",{className:d.inputContainer,children:[a.jsx(Hn,{fullWidth:!0,showErrorOnEmpty:!0,defaultValue:t||"",onChange:C=>r(C.target.value),touched:w,className:d.textField}),a.jsx(Be,{fullWidth:!0,label:"Button Text",value:i,variant:"outlined",onChange:C=>n(C.target.value),className:d.textField})]}),a.jsxs("div",{className:d.buttonContainer,children:[a.jsx(Re,{onClick:e.closePlugin,variant:"outlined",fullWidth:!0,color:"info",children:"Cancel"}),a.jsx(Re,{disabled:s,onClick:g,variant:"contained",fullWidth:!0,children:"Send Calendar Link"})]})]})})})}),rr=[{key:"calendar",label:"Calendar",icon:a.jsx(Rr,{sx:{fontSize:"20px !important"}}),component:qn,showDrawer:!0,onlyAgent:!0},{key:"gif",label:"GIF",icon:a.jsx(Vi,{sx:{fontSize:"20px !important"}}),component:kn,showDrawer:!0,onlyAgent:!1},{label:"Upload an image",icon:a.jsx(Zi,{sx:{fontSize:"20px !important"}}),key:"upload",component:zn,showDrawer:!1,onlyAgent:!1}],Bt={selectedPluginKey:void 0,imageLastLoadedAt:void 0};class Bn{constructor(t,r){q(this,"selectedPluginKey",Bt.selectedPluginKey);q(this,"imageLastLoadedAt",Bt.imageLastLoadedAt);q(this,"setSelectedPlugin",t=>this.selectedPluginKey=(t==null?void 0:t.key)||null);q(this,"setSelectedPluginKey",t=>this.selectedPluginKey=t);q(this,"onImageLoad",Yt(()=>this.imageLastLoadedAt=new Date));q(this,"closePlugin",()=>this.setSelectedPlugin(null));this.sessionStore=t,this.defaultCalendarLink=r,Wt(this),Gt.on("chatImageLoaded",this.onImageLoad),Tr(()=>t.isEngagedInConversation,i=>!i&&this.closePlugin())}get selectedPlugin(){return rr.find(t=>t.key===this.selectedPluginKey)}}const Yn=$e()((e,{variant:t,customBackgroundStyle:r,v2FontFamily:i,v2ContentStyles:n})=>({noPadding:{padding:0},menuPaper:{backgroundColor:e.palette.background.default,border:`1px solid ${e.sidebar.dividerBg}`},drawer:{backgroundColor:e.palette.background.paper,height:"calc(100% + 56px)",paddingBottom:4,position:"absolute",width:"100%",zIndex:123},root:{position:"relative",flex:"auto",width:"100%"},container:{width:"100%",overflowY:"scroll",overflowX:"hidden",height:"100%",position:"absolute",background:(n==null?void 0:n.background)||e.palette.background.paper,borderTop:t==="paper"?void 0:`1.5px solid ${e.sidebar.dividerBg}`},fixedChild:{display:"flex",flexDirection:"column",flex:"none",color:e.palette.text.primary,width:"100%",background:(n==null?void 0:n.background)||e.palette.background.paper},inputCollapse:{width:"100%"},fixedChildContent:{width:"100%",display:"flex",padding:n?e.spacing(1.5,1):e.spacing(1),paddingTop:0},addIconContainer:{display:"flex",justifyContent:"center",alignItems:"center"},addIcon:{borderRadius:"50%",width:"45px",height:"45px",marginLeft:"6px"},expandChild:{flex:"auto",overflowY:"scroll"},input:{flex:1,borderWidth:1,...i&&{fontFamily:i},"& .MuiOutlinedInput-root:hover":{"& > fieldset, & .MuiOutlinedInput-notchedOutline":{borderColor:`${(n==null?void 0:n.inputHoverBorderColor)||(r==null?void 0:r.backgroundColor)||e.colors.alpha.black[100]} !important`},"&.Mui-focused fieldset, &.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:`${(n==null?void 0:n.inputHoverBorderColor)||(r==null?void 0:r.backgroundColor)||e.colors.alpha.black[100]} !important`}},"& .MuiOutlinedInput-root":{paddingRight:0,paddingLeft:e.spacing(1.5),paddingTop:e.spacing(.8),paddingBottom:e.spacing(.8),lineHeight:"28px",...i&&{fontFamily:i},"&.Mui-focused fieldset, &.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:`${(n==null?void 0:n.inputHoverBorderColor)||(r==null?void 0:r.backgroundColor)||e.colors.alpha.black[100]} !important`,borderWidth:1},"&.Mui-focused:hover fieldset, &.Mui-focused:hover .MuiOutlinedInput-notchedOutline":{borderColor:`${(n==null?void 0:n.inputHoverBorderColor)||(r==null?void 0:r.backgroundColor)||e.colors.alpha.black[100]} !important`,borderWidth:1}},"& fieldset, & .MuiOutlinedInput-notchedOutline":{borderRadius:n?"12px":e.spacing(.5),borderColor:(n==null?void 0:n.inputBorderColor)||e.colors.alpha.black[50],borderWidth:1},"& .MuiInputBase-input":{fontSize:"16px",...i&&{fontFamily:i},...(n==null?void 0:n.inputTextColor)&&{color:n.inputTextColor},"&::placeholder":{color:(n==null?void 0:n.placeholderColor)||"inherit",opacity:1}}},loaderContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},newMessageButtonContainer:{display:"flex",justifyContent:"center",alignContent:"center",position:"absolute",left:105},newMessagesButton:{borderRadius:4,fontWeight:600,marginBottom:10,padding:"10px 20px 10px 15px"},lineHeight:{lineHeight:"12px !important"},v2DateDivider:{display:"flex",alignItems:"center",justifyContent:"center",padding:e.spacing(.5,1.5),gap:e.spacing(1.5),marginBottom:e.spacing(1)},v2DateLine:{flex:1,height:"1px",backgroundColor:(n==null?void 0:n.dividerColor)||e.palette.divider},v2DateText:{fontSize:"9px",fontWeight:500,color:(n==null?void 0:n.dividerColor)||e.palette.text.secondary,...i&&{fontFamily:i}},v2PrivacyPolicy:{textAlign:"center",padding:"12px 18px",fontSize:"10px",lineHeight:"14px",color:(n==null?void 0:n.privacyPolicyColor)||e.palette.text.secondary,borderTop:`1px solid ${(n==null?void 0:n.dividerColor)||e.palette.divider}`,...i&&{fontFamily:i},"& a":{color:"inherit",textDecoration:"none"}},v2AddIcon:{color:(n==null?void 0:n.iconColor)||"inherit"},v2SendIcon:{color:(n==null?void 0:n.iconColor)||"inherit"},v2TimeStamp:{color:(n==null?void 0:n.timeStampColor)||e.palette.text.secondary}})),Wn=$e()((e,{customBackgroundStyle:t,hasV2Style:r,v2ButtonAlignment:i})=>({container:{padding:e.spacing(1,2),borderTop:r?"none":`1px solid ${e.palette.divider}`,backgroundColor:r?"transparent":(t==null?void 0:t.backgroundColor)||e.palette.background.paper},messagesContainer:{display:"flex",gap:e.spacing(1),...r&&i?Cr(i):{flexDirection:"column",alignItems:"stretch"}},messageButton:{borderRadius:e.spacing(2),textTransform:"none",fontSize:"0.875rem",padding:e.spacing(1,2),borderColor:e.palette.primary.main,color:e.palette.primary.main,backgroundColor:"transparent","&:hover":{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,borderColor:e.palette.primary.main},"&:focus":{outline:`2px solid ${e.palette.primary.main}`,outlineOffset:2}}})),ir=({suggestedMessages:e,onMessageClick:t,customBackgroundStyle:r,v2ButtonStyle:i,v2ButtonAlignment:n})=>{const{classes:w}=Wn({customBackgroundStyle:r,hasV2Style:!!i,v2ButtonAlignment:n}),h=e.filter(s=>s.enabled&&s.text.trim()),d=s=>{t(s)};return h.length===0?null:a.jsx(V,{className:w.container,children:a.jsx(V,{className:w.messagesContainer,children:h.map((s,g)=>i?a.jsx(V,{component:"button",type:"button",sx:i,onClick:()=>d(s.text),children:s.text},g):a.jsx(Re,{variant:"outlined",size:"small",className:w.messageButton,onClick:()=>d(s.text),children:s.text},g))})})};ir.displayName=`SuggestedMessages-v${Vt}`;const Gn=Te(ir),nr=({variant:e,agentChat:t,store:r,defaultCalendarLink:i,api:n,suggestedMessages:w=[],customBackgroundStyle:h})=>{const{sentMessages:d,receivedMessages:s,remoteIsTyping:g,typingOrigin:C,onIsTypingChange:$,messagesLoading:m,agent:x,sendChatMessage:v,webRtcStore:c,type:b,isEngagedInConversation:D,isEngagedByWorkflow:S,isLastMessageQuestion:P,customBackgroundStyle:k,customBorderStyle:I,privacyPolicyUrl:_,customPrivacyPolicyEnabled:L,initialPrivacyPolicyMessage:B,shortenedPrivacyPolicyMessage:Y,startConversation:O,v2MessageBubbleStyle:A,v2MessageBubblePairedStyle:fe,v2SuggestedMessageButtonStyle:we,v2ButtonColor:j,v2CornerRadius:u,v2ButtonAlignment:o,v2FontFamily:p,v2CustomOutlinedStyle:l,v2ContentStyles:f,chatBrandingV2Settings:y}=r,{mediaStore:N}=c,{micOn:R,remoteMicOn:U,remoteVideoOn:W}=N,F=T.useMemo(()=>new Bn(r,i),[i,r]),{setSelectedPlugin:ae,selectedPlugin:Q,imageLastLoadedAt:ce}=F,re=Kt(),[z,J]=T.useState(""),[oe,he]=T.useState(!1),[sr,ct]=T.useState(!0),lt=Ci(z,1e3),X=T.useRef(null),Ye=T.useRef(null),[ut,We]=T.useState(null),pe=h||k,{classes:H}=Yn({variant:e,customBackgroundStyle:pe,v2FontFamily:p,v2ContentStyles:f}),{classes:ar}=zr({customBackgroundStyle:pe}),ie=!P&&(!S||!g||C==="agent"),dt=T.useRef(ie),Ge=!R&&(U||W),or="chat-box-content",Fe=r.type==="client"&&(f?y==null?void 0:y.customPrivacyPolicyEnabled:!0),cr=t&&w.length>0&&sr,le=[...d.map(M=>({...M,origin:"self"})),...s.map(M=>({...M,origin:"other"}))].sort((M,E)=>M.createdAt.getTime()-E.createdAt.getTime()).map(M=>{let E=M.content;return E.charAt(0)===`
`&&(E=E.substring(1)),E.charAt(E.length-1)===`
`&&(E=E.substring(0,E.length-1)),{...M,content:E}}),lr=m&&!le.length,ur=m,dr=m&&!le.length,ft=le==null?void 0:le.reduce((M,E)=>{const Z=Bi(E==null?void 0:E.createdAt)??"Today";return M[Z]||(M[Z]=[]),M[Z].push(E),M},{}),fr=Fe&&!le.some(M=>M.agentType==="human"&&M.messageOrigin==="agent"),[ht,hr]=T.useState(s.length),[Ve,pt]=T.useState(!1),Ce=T.useRef(!1),gt=s.length-ht,mt=()=>{z&&(v(z,"text"),J(""),ct(!1),setTimeout(ge,500),r.type==="agent"&&D===!1&&(O==null||O()))},ge=()=>{var M,E;re&&((E=X.current)==null||E.scrollTo({top:(M=X.current)==null?void 0:M.scrollHeight,behavior:"smooth"}),Ce.current=!1,pt(!1),hr(s.length))},pr=()=>{ge()},xt=()=>(f?y==null?void 0:y.customPrivacyPolicyEnabled:L)&&(fr?B:Y)||"Privacy Policy",gr=M=>{v(M,"text"),ct(!1),setTimeout(ge,500),r.type==="agent"&&D===!1&&(O==null||O())};ot(ge),T.useEffect(()=>{var M;if(X.current&&ie){let E=(M=X.current)==null?void 0:M.scrollTop;X.current.onscroll=()=>{var Z,me,xe,Pe;if(!((Z=X.current)!=null&&Z.scrollTop)||!E){E=(me=X.current)==null?void 0:me.scrollTop;return}((xe=X.current)==null?void 0:xe.scrollTop)<E&&(Ce.current=!0),E=(Pe=X.current)==null?void 0:Pe.scrollTop}}},[ie,re.current,X.current]),T.useEffect(()=>{!Ve&&Ce.current&&pt(ht!==s.length)},[s,Ve]),T.useEffect(()=>{ie&&b!=="agent"&&ge()},[ie,g,b]),Dt(()=>{const M=!dt.current,E=ie;dt.current=ie,M&&E&&Ye.current&&setTimeout(()=>{var Z;(Z=Ye.current)==null||Z.focus()},100)},[ie]),T.useEffect(()=>{he(z!==lt)},[lt,z]),Dt(()=>{$==null||$(oe,b)},[oe,$,b]),T.useEffect(()=>{const M=D||Ge;(!Ce.current||b==="client")&&setTimeout(ge,M?250:0)},[le,Ge,D,ce,s]);const mr=a.jsx("div",{className:H.loaderContainer,children:a.jsx(Hr,{})}),xr=a.jsx(Ur,{open:!!ut,classes:{paper:H.menuPaper,list:H.noPadding},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},componentsProps:{backdrop:{className:"MuiBackdrop-invisible"}},anchorEl:ut,onClose:()=>We(null),children:a.jsx(qr,{dense:!0,classes:{root:H.noPadding},className:H.noPadding,children:rr.filter(M=>r.type==="agent"?!0:!M.onlyAgent).map(M=>a.jsxs(Gr,{onClick:()=>{We(null),ae(M)},children:[a.jsx(Fr,{children:M.icon}),M.label]},M.key))})}),vr=a.jsx(Br,{direction:"up",className:H.drawer,in:!!(Q!=null&&Q.showDrawer),children:a.jsx("div",{children:Q&&a.jsx(Q.component,{store:F})})});return lr?mr:a.jsxs(a.Fragment,{children:[xr,a.jsxs("div",{className:H.root,children:[vr,a.jsx("div",{id:or,ref:X,className:H.container,children:a.jsx(V,{p:f?1.5:3,pl:1.5,pr:1.5,pb:0,children:ft?Object.entries(ft).map((M,E)=>{const[Z,me]=M;return a.jsxs(T.Fragment,{children:[f?a.jsxs("div",{className:H.v2DateDivider,children:[a.jsx("div",{className:H.v2DateLine}),a.jsx(Le,{className:H.v2DateText,children:Z}),a.jsx("div",{className:H.v2DateLine})]}):a.jsx("div",{style:{marginBottom:"1.5rem"},children:a.jsx(Vr,{children:a.jsx(Le,{variant:"subtitle1",sx:{},children:Z})})}),me==null?void 0:me.map((xe,Pe)=>a.jsx(yt,{message:xe,hideSenderInfo:b==="client"&&xe.origin==="self",agentChat:t,customBackgroundStyle:pe,v2SelfStyle:fe,v2OtherStyle:A,v2ButtonStyle:we,v2ButtonColor:j,v2CornerRadius:u,v2ButtonAlignment:o,v2TimeStampColor:f==null?void 0:f.timeStampColor,v2NameColor:f==null?void 0:f.nameColor,v2FontFamily:p,api:n,store:r},`${Pe}-${xe.createdAt.toISOString()}`)),g&&a.jsx(yt,{message:"typing",agentChat:t,store:r}),a.jsx($t,{in:Ge,children:a.jsx(Wi,{onClick:r.toggleAudio,agentInfo:x})})]},`${Z}-${E}-date-divider`)}):null})})]}),a.jsxs("div",{className:H.fixedChild,children:[ie&&a.jsxs($t,{in:ie,className:H.inputCollapse,children:[Ve&&a.jsx(V,{className:H.newMessageButtonContainer,sx:{bottom:Fe?80:60},children:a.jsxs(Re,{className:H.newMessagesButton,sx:{...pe},onClick:pr,variant:"contained",children:[a.jsx(Ti,{sx:{fontSize:"20px",marginRight:1,...pe}}),gt===1?"1 New message":`${gt} New messages`]})}),cr&&a.jsx(Gn,{suggestedMessages:w,onMessageClick:gr,customBackgroundStyle:pe,v2ButtonStyle:we,v2ButtonAlignment:o}),a.jsxs("div",{className:H.fixedChildContent,children:[a.jsx(Be,{id:t?"warmly-agent-textfield":"visitor-textfield",inputRef:Ye,multiline:!0,maxRows:3,value:z,placeholder:f==null?void 0:f.inputPlaceholder,disabled:ur,className:H.input,onChange:M=>J(M.target.value),InputProps:{sx:{...I},endAdornment:a.jsx(tt,{"data-testid":"send-chat-btn",onClick:mt,disabled:dr,color:"inherit",className:ar.sendButton,children:a.jsx(Yr,{sx:{fontSize:"20px",...f&&{color:f.iconColor}}})})},onKeyDown:M=>{M.key==="Enter"&&(M.preventDefault(),M.shiftKey?J(z+`
`):mt())}}),a.jsx("div",{className:H.addIconContainer,children:a.jsx(tt,{onClick:M=>We(M.currentTarget),className:H.addIcon,children:a.jsx(Ii,{sx:{fontSize:"20px",...f&&{color:f.iconColor}}})})})]})]}),Fe&&a.jsx("div",{style:{width:"100%"},children:f?a.jsx(V,{className:H.v2PrivacyPolicy,children:a.jsx(wt,{style:{color:"inherit"},href:(y==null?void 0:y.customPrivacyPolicyUrl)||_,target:"_blank",children:xt()})}):a.jsx(V,{sx:{display:"flex",justifyContent:"center",marginBottom:1,padding:"0px 9px !important",textAlign:"center !important",lineHeight:"12px !important"},children:a.jsx(wt,{style:{fontSize:"9px",color:"black"},className:H.lineHeight,href:_,target:"_blank",children:xt()})})})]})]})};nr.displayName=`ChatContent-v${Vt}`;const Jn=Te(nr);export{Jn as default};
