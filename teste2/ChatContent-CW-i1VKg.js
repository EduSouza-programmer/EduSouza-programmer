var wr=Object.defineProperty;var br=(e,t,r)=>t in e?wr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var H=(e,t,r)=>br(e,typeof t!="symbol"?t+"":t,r);import{r as I,g as at,j as s,h as re,a0 as jr,a1 as it,a2 as Mr,n as He,C as Ue,o as fe,a3 as Vt,a4 as bt,G as Kt,M as nt,a5 as _r,a6 as Ir,L as Oe,a7 as Dr,K as Tr,a8 as Cr,a9 as Pr,N as Ar}from"./widget-Da2svzF_.js";import{g as ot,h as ct,i as lt,j as qe,l as De,p as ut,t as Or,_ as kr,w as Be,m as $e,$ as Sr,B as V,K as Er,I as Re,D as Te,a0 as dt,a1 as Nr,a2 as Ye,N as st,a3 as Lr,G as Rr,a4 as Je,a5 as Qt,a6 as zr,A as ze,a7 as Hr,a8 as Ur,z as qr,M as Br,a9 as Yr,aa as Wr,ab as jt,ac as Mt,ad as Gr,ae as _t}from"./Widget-2FSmaCdi.js";import{e as Zt}from"./WidgetApp-BuQT9PRV.js";import{u as Jt,a as Fr,M as Vr,L as Kr,D as Qr}from"./useIsMounted-CYYP4sBL.js";function Zr(e){return ct("MuiCardActionArea",e)}const Xe=ot("MuiCardActionArea",["root","focusVisible","focusHighlight"]),Jr=["children","className","focusVisibleClassName"],Xr=e=>{const{classes:t}=e;return ut({root:["root"],focusHighlight:["focusHighlight"]},Zr,t)},ei=qe(Or,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${Xe.focusHighlight}`]:{opacity:(e.vars||e).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${Xe.focusVisible} .${Xe.focusHighlight}`]:{opacity:(e.vars||e).palette.action.focusOpacity}})),ti=qe("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(e,t)=>t.focusHighlight})(({theme:e})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})})),ri=I.forwardRef(function(t,r){const i=lt({props:t,name:"MuiCardActionArea"}),{children:n,className:y,focusVisibleClassName:p}=i,l=at(i,Jr),a=i,h=Xr(a);return s.jsxs(ei,re({className:De(h.root,y),focusVisibleClassName:De(p,h.focusVisible),ref:r,ownerState:a},l,{children:[n,s.jsx(ti,{className:h.focusHighlight,ownerState:a})]}))});function ii(e){return ct("MuiImageList",e)}ot("MuiImageList",["root","masonry","quilted","standard","woven"]);const Xt=I.createContext({}),ni=["children","className","cols","component","rowHeight","gap","style","variant"],si=e=>{const{classes:t,variant:r}=e;return ut({root:["root",r]},ii,t)},ai=qe("ul",{name:"MuiImageList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant]]}})(({ownerState:e})=>re({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"},e.variant==="masonry"&&{display:"block"})),oi=I.forwardRef(function(t,r){const i=lt({props:t,name:"MuiImageList"}),{children:n,className:y,cols:p=2,component:l="ul",rowHeight:a="auto",gap:h=4,style:T,variant:$="standard"}=i,m=at(i,ni),x=I.useMemo(()=>({rowHeight:a,gap:h,variant:$}),[a,h,$]);I.useEffect(()=>{},[]);const v=$==="masonry"?re({columnCount:p,columnGap:h},T):re({gridTemplateColumns:`repeat(${p}, 1fr)`,gap:h},T),c=re({},i,{component:l,gap:h,rowHeight:a,variant:$}),j=si(c);return s.jsx(ai,re({as:l,className:De(j.root,j[$],y),ref:r,style:v,ownerState:c},m,{children:s.jsx(Xt.Provider,{value:x,children:n})}))});function ci(e){return ct("MuiImageListItem",e)}const It=ot("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),li=["children","className","cols","component","rows","style"],ui=e=>{const{classes:t,variant:r}=e;return ut({root:["root",r],img:["img"]},ci,t)},di=qe("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${It.img}`]:t.img},t.root,t[r.variant]]}})(({ownerState:e})=>re({display:"block",position:"relative"},e.variant==="standard"&&{display:"flex",flexDirection:"column"},e.variant==="woven"&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},{[`& .${It.img}`]:re({objectFit:"cover",width:"100%",height:"100%",display:"block"},e.variant==="standard"&&{height:"auto",flexGrow:1})})),fi=I.forwardRef(function(t,r){const i=lt({props:t,name:"MuiImageListItem"}),{children:n,className:y,cols:p=1,component:l="li",rows:a=1,style:h}=i,T=at(i,li),{rowHeight:$="auto",gap:m,variant:x}=I.useContext(Xt);let v="auto";x==="woven"?v=void 0:$!=="auto"&&(v=$*a+m*(a-1));const c=re({},i,{cols:p,component:l,gap:m,rowHeight:$,rows:a,variant:x}),j=ui(c);return s.jsx(di,re({as:l,className:De(j.root,j[x],y),ref:r,style:re({height:v,gridColumnEnd:x!=="masonry"?`span ${p}`:void 0,gridRowEnd:x!=="masonry"?`span ${a}`:void 0,marginBottom:x==="masonry"?m:void 0,breakInside:x==="masonry"?"avoid":void 0},h),ownerState:c},T,{children:I.Children.map(n,D=>I.isValidElement(D)?D.type==="img"||kr(D,["Image"])?I.cloneElement(D,{className:De(j.img,D.props.className)}):D:null)}))});var hi=/\s/;function pi(e){for(var t=e.length;t--&&hi.test(e.charAt(t)););return t}var gi=/^\s+/;function mi(e){return e&&e.slice(0,pi(e)+1).replace(gi,"")}var Dt=NaN,xi=/^[-+]0x[0-9a-f]+$/i,vi=/^0b[01]+$/i,yi=/^0o[0-7]+$/i,$i=parseInt;function Tt(e){if(typeof e=="number")return e;if(jr(e))return Dt;if(it(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=it(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=mi(e);var r=vi.test(e);return r||yi.test(e)?$i(e.slice(2),r?2:8):xi.test(e)?Dt:+e}var et=function(){return Mr.Date.now()},wi="Expected a function",bi=Math.max,ji=Math.min;function Mi(e,t,r){var i,n,y,p,l,a,h=0,T=!1,$=!1,m=!0;if(typeof e!="function")throw new TypeError(wi);t=Tt(t)||0,it(r)&&(T=!!r.leading,$="maxWait"in r,y=$?bi(Tt(r.maxWait)||0,t):y,m="trailing"in r?!!r.trailing:m);function x(P){var L=i,q=n;return i=n=void 0,h=P,p=e.apply(q,L),p}function v(P){return h=P,l=setTimeout(D,t),T?x(P):p}function c(P){var L=P-a,q=P-h,B=t-L;return $?ji(B,y-q):B}function j(P){var L=P-a,q=P-h;return a===void 0||L>=t||L<0||$&&q>=y}function D(){var P=et();if(j(P))return k(P);l=setTimeout(D,c(P))}function k(P){return l=void 0,m&&i?x(P):(i=n=void 0,p)}function A(){l!==void 0&&clearTimeout(l),h=0,i=a=n=l=void 0}function S(){return l===void 0?p:k(et())}function _(){var P=et(),L=j(P);if(i=arguments,n=this,a=P,L){if(l===void 0)return v(a);if($)return clearTimeout(l),l=setTimeout(D,t),x(a)}return l===void 0&&(l=setTimeout(D,t)),p}return _.cancel=A,_.flush=S,_}var be={},Ct;function _i(){if(Ct)return be;Ct=1;var e=He();Object.defineProperty(be,"__esModule",{value:!0}),be.default=void 0;var t=e(Be()),r=Ue();return be.default=(0,t.default)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),be}var Ii=_i();const Di=fe(Ii);var je={},Pt;function Ti(){if(Pt)return je;Pt=1;var e=He();Object.defineProperty(je,"__esModule",{value:!0}),je.default=void 0;var t=e(Be()),r=Ue();return je.default=(0,t.default)((0,r.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward"),je}var Ci=Ti();const Pi=fe(Ci),Ai=(e,t)=>{const[r,i]=I.useState(e);return I.useEffect(()=>{const n=setTimeout(()=>i(e),t);return()=>clearTimeout(n)},[t,e]),r},At=(e,t)=>{const r=I.useRef(!0),i=Jt();I.useEffect(()=>{let n=()=>{};if(r.current)r.current=!1;else{const y=e();n=typeof y=="function"&&y||n}return()=>{n==null||n(),i.current||(r.current=!0)}},t)};var Ee={exports:{}},Oi=Ee.exports,Ot;function ki(){return Ot||(Ot=1,function(e,t){(function(r,i){e.exports=i()})(Oi,function(){var r="minute",i=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(y,p,l){var a=p.prototype;l.utc=function(c){var j={date:c,utc:!0,args:arguments};return new p(j)},a.utc=function(c){var j=l(this.toDate(),{locale:this.$L,utc:!0});return c?j.add(this.utcOffset(),r):j},a.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var h=a.parse;a.parse=function(c){c.utc&&(this.$u=!0),this.$utils().u(c.$offset)||(this.$offset=c.$offset),h.call(this,c)};var T=a.init;a.init=function(){if(this.$u){var c=this.$d;this.$y=c.getUTCFullYear(),this.$M=c.getUTCMonth(),this.$D=c.getUTCDate(),this.$W=c.getUTCDay(),this.$H=c.getUTCHours(),this.$m=c.getUTCMinutes(),this.$s=c.getUTCSeconds(),this.$ms=c.getUTCMilliseconds()}else T.call(this)};var $=a.utcOffset;a.utcOffset=function(c,j){var D=this.$utils().u;if(D(c))return this.$u?0:D(this.$offset)?$.call(this):this.$offset;if(typeof c=="string"&&(c=function(_){_===void 0&&(_="");var P=_.match(i);if(!P)return null;var L=(""+P[0]).match(n)||["-",0,0],q=L[0],B=60*+L[1]+ +L[2];return B===0?0:q==="+"?B:-B}(c),c===null))return this;var k=Math.abs(c)<=16?60*c:c,A=this;if(j)return A.$offset=k,A.$u=c===0,A;if(c!==0){var S=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(A=this.local().add(k+S,r)).$offset=k,A.$x.$localOffset=S}else A=this.utc();return A};var m=a.format;a.format=function(c){var j=c||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return m.call(this,j)},a.valueOf=function(){var c=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*c},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var x=a.toDate;a.toDate=function(c){return c==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():x.call(this)};var v=a.diff;a.diff=function(c,j,D){if(c&&this.$u===c.$u)return v.call(this,c,j,D);var k=this.local(),A=l(c).local();return v.call(k,A,j,D)}}})}(Ee)),Ee.exports}var Si=ki();const Ei=fe(Si);var Ne={exports:{}},Ni=Ne.exports,kt;function Li(){return kt||(kt=1,function(e,t){(function(r,i){e.exports=i()})(Ni,function(){var r={year:0,month:1,day:2,hour:3,minute:4,second:5},i={};return function(n,y,p){var l,a=function(m,x,v){v===void 0&&(v={});var c=new Date(m),j=function(D,k){k===void 0&&(k={});var A=k.timeZoneName||"short",S=D+"|"+A,_=i[S];return _||(_=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:D,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:A}),i[S]=_),_}(x,v);return j.formatToParts(c)},h=function(m,x){for(var v=a(m,x),c=[],j=0;j<v.length;j+=1){var D=v[j],k=D.type,A=D.value,S=r[k];S>=0&&(c[S]=parseInt(A,10))}var _=c[3],P=_===24?0:_,L=c[0]+"-"+c[1]+"-"+c[2]+" "+P+":"+c[4]+":"+c[5]+":000",q=+m;return(p.utc(L).valueOf()-(q-=q%1e3))/6e4},T=y.prototype;T.tz=function(m,x){m===void 0&&(m=l);var v,c=this.utcOffset(),j=this.toDate(),D=j.toLocaleString("en-US",{timeZone:m}),k=Math.round((j-new Date(D))/1e3/60),A=15*-Math.round(j.getTimezoneOffset()/15)-k;if(!Number(A))v=this.utcOffset(0,x);else if(v=p(D,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(A,!0),x){var S=v.utcOffset();v=v.add(c-S,"minute")}return v.$x.$timezone=m,v},T.offsetName=function(m){var x=this.$x.$timezone||p.tz.guess(),v=a(this.valueOf(),x,{timeZoneName:m}).find(function(c){return c.type.toLowerCase()==="timezonename"});return v&&v.value};var $=T.startOf;T.startOf=function(m,x){if(!this.$x||!this.$x.$timezone)return $.call(this,m,x);var v=p(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return $.call(v,m,x).tz(this.$x.$timezone,!0)},p.tz=function(m,x,v){var c=v&&x,j=v||x||l,D=h(+p(),j);if(typeof m!="string")return p(m).tz(j);var k=function(P,L,q){var B=P-60*L*1e3,N=h(B,q);if(L===N)return[B,L];var C=h(B-=60*(N-L)*1e3,q);return N===C?[B,N]:[P-60*Math.min(N,C)*1e3,Math.max(N,C)]}(p.utc(m,c).valueOf(),D,j),A=k[0],S=k[1],_=p(A).utcOffset(S);return _.$x.$timezone=j,_},p.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},p.tz.setDefault=function(m){l=m}}})}(Ne)),Ne.exports}var Ri=Li();const zi=fe(Ri);var Le={exports:{}},Hi=Le.exports,St;function Ui(){return St||(St=1,function(e,t){(function(r,i){e.exports=i()})(Hi,function(){var r=1e3,i=6e4,n=36e5,y="millisecond",p="second",l="minute",a="hour",h="day",T="week",$="month",m="quarter",x="year",v="date",c="Invalid Date",j=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,D=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,k={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(w){var d=["th","st","nd","rd"],o=w%100;return"["+w+(d[(o-20)%10]||d[o]||d[0])+"]"}},A=function(w,d,o){var g=String(w);return!g||g.length>=d?w:""+Array(d+1-g.length).join(o)+w},S={s:A,z:function(w){var d=-w.utcOffset(),o=Math.abs(d),g=Math.floor(o/60),u=o%60;return(d<=0?"+":"-")+A(g,2,"0")+":"+A(u,2,"0")},m:function w(d,o){if(d.date()<o.date())return-w(o,d);var g=12*(o.year()-d.year())+(o.month()-d.month()),u=d.clone().add(g,$),M=o-u<0,f=d.clone().add(g+(M?-1:1),$);return+(-(g+(o-u)/(M?u-f:f-u))||0)},a:function(w){return w<0?Math.ceil(w)||0:Math.floor(w)},p:function(w){return{M:$,y:x,w:T,d:h,D:v,h:a,m:l,s:p,ms:y,Q:m}[w]||String(w||"").toLowerCase().replace(/s$/,"")},u:function(w){return w===void 0}},_="en",P={};P[_]=k;var L="$isDayjsObject",q=function(w){return w instanceof he||!(!w||!w[L])},B=function w(d,o,g){var u;if(!d)return _;if(typeof d=="string"){var M=d.toLowerCase();P[M]&&(u=M),o&&(P[M]=o,u=M);var f=d.split("-");if(!u&&f.length>1)return w(f[0])}else{var O=d.name;P[O]=d,u=O}return!g&&u&&(_=u),u||!g&&_},N=function(w,d){if(q(w))return w.clone();var o=typeof d=="object"?d:{};return o.date=w,o.args=arguments,new he(o)},C=S;C.l=B,C.i=q,C.w=function(w,d){return N(w,{locale:d.$L,utc:d.$u,x:d.$x,$offset:d.$offset})};var he=function(){function w(o){this.$L=B(o.locale,null,!0),this.parse(o),this.$x=this.$x||o.x||{},this[L]=!0}var d=w.prototype;return d.parse=function(o){this.$d=function(g){var u=g.date,M=g.utc;if(u===null)return new Date(NaN);if(C.u(u))return new Date;if(u instanceof Date)return new Date(u);if(typeof u=="string"&&!/Z$/i.test(u)){var f=u.match(j);if(f){var O=f[2]-1||0,R=(f[7]||"0").substring(0,3);return M?new Date(Date.UTC(f[1],O,f[3]||1,f[4]||0,f[5]||0,f[6]||0,R)):new Date(f[1],O,f[3]||1,f[4]||0,f[5]||0,f[6]||0,R)}}return new Date(u)}(o),this.init()},d.init=function(){var o=this.$d;this.$y=o.getFullYear(),this.$M=o.getMonth(),this.$D=o.getDate(),this.$W=o.getDay(),this.$H=o.getHours(),this.$m=o.getMinutes(),this.$s=o.getSeconds(),this.$ms=o.getMilliseconds()},d.$utils=function(){return C},d.isValid=function(){return this.$d.toString()!==c},d.isSame=function(o,g){var u=N(o);return this.startOf(g)<=u&&u<=this.endOf(g)},d.isAfter=function(o,g){return N(o)<this.startOf(g)},d.isBefore=function(o,g){return this.endOf(g)<N(o)},d.$g=function(o,g,u){return C.u(o)?this[g]:this.set(u,o)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(o,g){var u=this,M=!!C.u(g)||g,f=C.p(o),O=function(oe,W){var F=C.w(u.$u?Date.UTC(u.$y,W,oe):new Date(u.$y,W,oe),u);return M?F:F.endOf(h)},R=function(oe,W){return C.w(u.toDate()[oe].apply(u.toDate("s"),(M?[0,0,0,0]:[23,59,59,999]).slice(W)),u)},U=this.$W,Y=this.$M,K=this.$D,J="set"+(this.$u?"UTC":"");switch(f){case x:return M?O(1,0):O(31,11);case $:return M?O(1,Y):O(0,Y+1);case T:var ae=this.$locale().weekStart||0,X=(U<ae?U+7:U)-ae;return O(M?K-X:K+(6-X),Y);case h:case v:return R(J+"Hours",0);case a:return R(J+"Minutes",1);case l:return R(J+"Seconds",2);case p:return R(J+"Milliseconds",3);default:return this.clone()}},d.endOf=function(o){return this.startOf(o,!1)},d.$set=function(o,g){var u,M=C.p(o),f="set"+(this.$u?"UTC":""),O=(u={},u[h]=f+"Date",u[v]=f+"Date",u[$]=f+"Month",u[x]=f+"FullYear",u[a]=f+"Hours",u[l]=f+"Minutes",u[p]=f+"Seconds",u[y]=f+"Milliseconds",u)[M],R=M===h?this.$D+(g-this.$W):g;if(M===$||M===x){var U=this.clone().set(v,1);U.$d[O](R),U.init(),this.$d=U.set(v,Math.min(this.$D,U.daysInMonth())).$d}else O&&this.$d[O](R);return this.init(),this},d.set=function(o,g){return this.clone().$set(o,g)},d.get=function(o){return this[C.p(o)]()},d.add=function(o,g){var u,M=this;o=Number(o);var f=C.p(g),O=function(Y){var K=N(M);return C.w(K.date(K.date()+Math.round(Y*o)),M)};if(f===$)return this.set($,this.$M+o);if(f===x)return this.set(x,this.$y+o);if(f===h)return O(1);if(f===T)return O(7);var R=(u={},u[l]=i,u[a]=n,u[p]=r,u)[f]||1,U=this.$d.getTime()+o*R;return C.w(U,this)},d.subtract=function(o,g){return this.add(-1*o,g)},d.format=function(o){var g=this,u=this.$locale();if(!this.isValid())return u.invalidDate||c;var M=o||"YYYY-MM-DDTHH:mm:ssZ",f=C.z(this),O=this.$H,R=this.$m,U=this.$M,Y=u.weekdays,K=u.months,J=u.meridiem,ae=function(W,F,ie,le){return W&&(W[F]||W(g,M))||ie[F].slice(0,le)},X=function(W){return C.s(O%12||12,W,"0")},oe=J||function(W,F,ie){var le=W<12?"AM":"PM";return ie?le.toLowerCase():le};return M.replace(D,function(W,F){return F||function(ie){switch(ie){case"YY":return String(g.$y).slice(-2);case"YYYY":return C.s(g.$y,4,"0");case"M":return U+1;case"MM":return C.s(U+1,2,"0");case"MMM":return ae(u.monthsShort,U,K,3);case"MMMM":return ae(K,U);case"D":return g.$D;case"DD":return C.s(g.$D,2,"0");case"d":return String(g.$W);case"dd":return ae(u.weekdaysMin,g.$W,Y,2);case"ddd":return ae(u.weekdaysShort,g.$W,Y,3);case"dddd":return Y[g.$W];case"H":return String(O);case"HH":return C.s(O,2,"0");case"h":return X(1);case"hh":return X(2);case"a":return oe(O,R,!0);case"A":return oe(O,R,!1);case"m":return String(R);case"mm":return C.s(R,2,"0");case"s":return String(g.$s);case"ss":return C.s(g.$s,2,"0");case"SSS":return C.s(g.$ms,3,"0");case"Z":return f}return null}(W)||f.replace(":","")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(o,g,u){var M,f=this,O=C.p(g),R=N(o),U=(R.utcOffset()-this.utcOffset())*i,Y=this-R,K=function(){return C.m(f,R)};switch(O){case x:M=K()/12;break;case $:M=K();break;case m:M=K()/3;break;case T:M=(Y-U)/6048e5;break;case h:M=(Y-U)/864e5;break;case a:M=Y/n;break;case l:M=Y/i;break;case p:M=Y/r;break;default:M=Y}return u?M:C.a(M)},d.daysInMonth=function(){return this.endOf($).$D},d.$locale=function(){return P[this.$L]},d.locale=function(o,g){if(!o)return this.$L;var u=this.clone(),M=B(o,g,!0);return M&&(u.$L=M),u},d.clone=function(){return C.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},w}(),Ce=he.prototype;return N.prototype=Ce,[["$ms",y],["$s",p],["$m",l],["$H",a],["$W",h],["$M",$],["$y",x],["$D",v]].forEach(function(w){Ce[w[1]]=function(d){return this.$g(d,w[0],w[1])}}),N.extend=function(w,d){return w.$i||(w(d,he,N),w.$i=!0),N},N.locale=B,N.isDayjs=q,N.unix=function(w){return N(1e3*w)},N.en=P[_],N.Ls=P,N.p={},N})}(Le)),Le.exports}var qi=Ui();const er=fe(qi);er.extend(Ei);er.extend(zi);const Bi=e=>{var r;return new Date().toDateString()===((r=e==null?void 0:e.toDateString)==null?void 0:r.call(e))},Yi=e=>{var r;const t=new Date;return t.setDate(t.getDate()-1),t.toDateString()===((r=e==null?void 0:e.toDateString)==null?void 0:r.call(e))},Wi=e=>{var r;if(!e)return e;const t=new Date(e);return Bi(t)?"Today":Yi(t)?"Yesterday":((r=t==null?void 0:t.toLocaleDateString)==null?void 0:r.call(t,void 0,{month:"short",day:"numeric"}))??"Today"},Gi=$e()(e=>({card:{background:e.colors.gradients.blue4},cardActionArea:{".MuiTouchRipple-root":{opacity:.2},".MuiCardActionArea-focusHighlight":{background:e.colors.primary.main},"&:hover":{".MuiCardActionArea-focusHighlight":{opacity:.03,background:`${e.colors.alpha.trueWhite[100]}`}},padding:16,display:"flex",alignItems:"center",justifyContent:"space-between"},avatar:{width:`${e.spacing(5.5)}`,height:`${e.spacing(5.5)}`,background:`${e.colors.success.main}`,color:`${e.palette.getContrastText(e.colors.success.dark)}`},copyWrapper:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},title:{color:`${e.colors.alpha.trueWhite[100]}`,fontSize:14},subTitle:{color:`${e.colors.alpha.trueWhite[70]}`,fontSize:13}})),Fi=({onClick:e,agentInfo:t})=>{const{classes:r}=Gi();return t?s.jsx(Sr,{className:r.card,onClick:e,children:s.jsx(ri,{className:r.cardActionArea,children:s.jsxs(V,{display:"flex",width:"100%",children:[s.jsx(Er,{src:t.avatarUrl,className:r.avatar,children:s.jsx(Fr,{})}),s.jsxs(V,{className:r.copyWrapper,children:[s.jsxs(Re,{className:r.title,variant:"h4",children:[t.name," is inviting you to join a call"]}),s.jsx(V,{mt:.5,display:"flex",alignItems:"center",children:s.jsx(Re,{className:r.subTitle,variant:"subtitle2",noWrap:!0,children:"Click here to enable your microphone"})})]})]})})}):s.jsx("div",{})};var Me={},Et;function Vi(){if(Et)return Me;Et=1;var e=He();Object.defineProperty(Me,"__esModule",{value:!0}),Me.default=void 0;var t=e(Be()),r=Ue();return Me.default=(0,t.default)((0,r.jsx)("path",{d:"M11.5 9H13v6h-1.5zM9 9H6c-.6 0-1 .5-1 1v4c0 .5.4 1 1 1h3c.6 0 1-.5 1-1v-2H8.5v1.5h-2v-3H10V10c0-.5-.4-1-1-1m10 1.5V9h-4.5v6H16v-2h2v-1.5h-2v-1z"}),"Gif"),Me}var Ki=Vi();const Qi=fe(Ki);var _e={},Nt;function Zi(){if(Nt)return _e;Nt=1;var e=He();Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=e(Be()),r=Ue();return _e.default=(0,t.default)((0,r.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload"),_e}var Ji=Zi();const Xi=fe(Ji);function ve(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}let ke;const en=new Uint8Array(16);function tn(){if(!ke&&(ke=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ke))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ke(en)}const G=[];for(let e=0;e<256;++e)G.push((e+256).toString(16).slice(1));function rn(e,t=0){return G[e[t+0]]+G[e[t+1]]+G[e[t+2]]+G[e[t+3]]+"-"+G[e[t+4]]+G[e[t+5]]+"-"+G[e[t+6]]+G[e[t+7]]+"-"+G[e[t+8]]+G[e[t+9]]+"-"+G[e[t+10]]+G[e[t+11]]+G[e[t+12]]+G[e[t+13]]+G[e[t+14]]+G[e[t+15]]}const nn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Lt={randomUUID:nn};function sn(e,t,r){if(Lt.randomUUID&&!e)return Lt.randomUUID();e=e||{};const i=e.random||(e.rng||tn)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,rn(i)}typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug");var de="",tr=16,an=()=>{let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=t.length;for(let i=0;i<tr;i++)e+=t.charAt(Math.floor(Math.random()*r));return e},on=()=>{if(!de){try{de=sessionStorage.getItem("giphyPingbackId")}catch{}if(!de){const e=new Date().getTime().toString(16);try{de=`${e}${sn().replace(/-/g,"")}`.substring(0,tr)}catch{de=an()}try{sessionStorage.setItem("giphyPingbackId",de)}catch{}}}return de},cn=on,Se=null;new Promise(e=>{typeof Image>"u"&&e(!1);const t=new Image;t.onload=()=>{Se=!0,e(Se)},t.onerror=()=>{Se=!1,e(Se)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var Ie=(typeof window<"u"?window:global)||{};Ie._GIPHY_SDK_HEADERS_=Ie._GIPHY_SDK_HEADERS_||(Ie.Headers?new Ie.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var rr=()=>Ie._GIPHY_SDK_HEADERS_,Rt=(e,t)=>{var r;return(r=rr())==null?void 0:r.set(e,t)},ln=Object.defineProperty,un=Object.defineProperties,dn=Object.getOwnPropertyDescriptors,fn=Object.getOwnPropertyNames,zt=Object.getOwnPropertySymbols,hn=Object.prototype.hasOwnProperty,pn=Object.prototype.propertyIsEnumerable,Ht=(e,t,r)=>t in e?ln(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,se=(e,t)=>{for(var r in t||(t={}))hn.call(t,r)&&Ht(e,r,t[r]);if(zt)for(var r of zt(t))pn.call(t,r)&&Ht(e,r,t[r]);return e},tt=(e,t)=>un(e,dn(t)),gn=(e=>typeof ve<"u"?ve:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof ve<"u"?ve:t)[r]}):e)(function(e){if(typeof ve<"u")return ve.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),mn=(e,t)=>function(){return t||(0,e[fn(e)[0]])((t={exports:{}}).exports,t),t.exports},xn=(e,t,r)=>new Promise((i,n)=>{var y=a=>{try{l(r.next(a))}catch(h){n(h)}},p=a=>{try{l(r.throw(a))}catch(h){n(h)}},l=a=>a.done?i(a.value):Promise.resolve(a.value).then(y,p);l((r=r.apply(e,t)).next())}),vn=mn({"package.json"(e,t){t.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.6.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),yn=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],$n=["suppress_chrome","is_public","is_verified"],Ut=e=>t=>e[t]=!!e[t],wn=e=>typeof e=="string"?e:e.text,ir=(e,t="")=>{const r=se({},e);r.id=String(r.id),r.tags=(r.tags||[]).map(wn),r.bottle_data||(r.bottle_data={}),r.response_id=t,yn.forEach(Ut(r)),Object.keys(r.images||{}).forEach(n=>{const y=r.images[n];y.width=parseInt(y.width),y.height=parseInt(y.height)});const{user:i}=r;if(i){const n=se({},i);$n.forEach(Ut(n)),r.user=n}return r},qt=e=>{const{response_id:t}=e.meta;return e.data=ir(e.data,t),e},ce=e=>{const{response_id:t}=e.meta;return e.data=e.data.map(r=>ir(r,t)),e},bn=(typeof window<"u"?window:global)||{},jn=bn.GIPHY_API_URL||"https://api.giphy.com/v1/",nr=class extends Error{constructor(e,t,r=0,i=""){super(e),this.url=t,this.status=r,this.statusText=i}},Mn=class extends nr{},Bt=nr,_n="@giphy/js-fetch-api: ",In="Error fetching",Dn=e=>e,te={},Tn=6e4,Cn=6e3,Pn=()=>{const e=Date.now();Object.keys(te).forEach(t=>{const r=te[t].isError?Cn:Tn;e-te[t].ts>=r&&delete te[t]})};function An(e,t={}){const{apiVersion:r=1,noCache:i=!1,normalizer:n=Dn}=t,y=jn.replace(/\/v\d+\/$/,`/v${r}/`);if(Pn(),!te[e]||i){const p=`${y}${e}`,l=()=>xn(this,null,function*(){var a,h;let T;try{const $=yield fetch(p,{method:"get"});if($.ok){const m=yield $.json();if((a=m.meta)!=null&&a.response_id)return n(m);throw{message:"synthetic response"}}else{let m=In;try{const v=yield $.json();v.message&&(m=v.message),(h=v.meta)!=null&&h.msg&&(m=v.meta.msg)}catch{}te[e]&&(te[e].isError=!0);let x=Bt;m==="This content is not available in your location"&&(x=Mn),T=new x(`${_n}${m}`,p,$.status,$.statusText)}}catch($){T=new Bt($.message,p),te[e]&&(te[e].isError=!0)}throw T});te[e]={request:l(),ts:Date.now()}}return te[e].request}var Q=An,rt=e=>e&&e.type?e.type:"gifs",On=class{constructor(e,t={}){this.getQS=(r={})=>new URLSearchParams(se(tt(se({},r),{api_key:this.apiKey,pingback_id:cn()}),this.qsParams)).toString(),this.apiKey=e,this.qsParams=t}categories(e){return Q(`gifs/categories?${this.getQS(e)}`)}gif(e,t){const r=t!=null&&t.internal?"internal/":"";return Q(`${r}gifs/${e}?${this.getQS()}`,{normalizer:qt})}gifs(e,t){return Array.isArray(e)?Q(`gifs?${this.getQS({ids:e.join(",")})}`,{normalizer:ce}):Q(`gifs/categories/${e}/${t}?${this.getQS()}`,{normalizer:ce})}emoji(e){return Q(`emoji?${this.getQS(e)}`,{normalizer:ce})}emojiDefaultVariations(e){return Q(`emoji?${this.getQS(e)}`,{apiVersion:2,normalizer:ce})}emojiVariations(e){return Q(`emoji/${e}/variations?${this.getQS()}`,{apiVersion:2,normalizer:ce})}animate(e,t={}){const r=this.getQS(tt(se({},t),{m:e}));return Q(`text/animate?${r}`,{normalizer:ce})}search(e,t={}){const r=t.channel?`@${t.channel} ${e}`:e;let i;t.type==="text"&&(i=!0);const n=this.getQS(tt(se({rating:"pg-13"},t),{q:r,excludeDynamicResults:i}));return Q(`${rt(t)}/search?${n}`,{normalizer:ce})}subcategories(e,t){return Q(`gifs/categories/${e}?${this.getQS(t)}`)}trending(e={}){return Q(`${rt(e)}/trending?${this.getQS(se({rating:"pg-13"},e))}`,{normalizer:ce})}random(e){return Q(`${rt(e)}/random?${this.getQS(se({rating:"pg-13"},e))}`,{noCache:!0,normalizer:qt})}related(e,t={}){const{type:r="gifs"}=t;return Q(`${r}/related?${this.getQS(se({gif_id:e,rating:"pg-13"},t))}`,{normalizer:ce})}channels(e,t={}){return Q(`channels/search?${this.getQS(se({q:e,rating:"pg-13"},t))}`)}},kn=On,Yt;if(typeof gn<"u"){const{version:e}=vn();(Yt=rr())!=null&&Yt.get("X-GIPHY-SDK-NAME")||(Rt("X-GIPHY-SDK-NAME","FetchAPI"),Rt("X-GIPHY-SDK-VERSION",e))}const ye={results:[],offset:0,searchTerm:"",initialized:!1,loading:!1},Wt=new kn(_r);class Sn{constructor(){H(this,"results",ye.results);H(this,"initialized",ye.initialized);H(this,"searchTerm",ye.searchTerm);H(this,"offset",ye.offset);H(this,"loading",ye.loading);H(this,"initialize",()=>this.initialized=!0);H(this,"setSearchTerm",t=>{this.searchTerm=t,this.onSearchTermChange()});H(this,"onSearchTermChange",Mi(Vt(()=>this.search(this.searchTerm)),500));H(this,"fetchFromGiphy",async()=>(this.searchTerm?await Wt.search(this.searchTerm,{offset:this.offset,limit:24}):await Wt.trending({limit:24})).data);H(this,"setOffset",()=>{this.offset+=10,this.fetch()});H(this,"search",t=>{this.searchTerm=t,this.results=[],this.offset=0,this.fetch()});H(this,"fetch",async()=>{bt(()=>{this.loading=!0});const t=await this.fetchFromGiphy();bt(()=>{this.loading=!1,this.results=[...this.results,...t]})});H(this,"resetState",()=>Object.entries(ye).forEach(([t,r])=>this[t]=r));Kt(this),nt.on("logout",this.resetState)}}const Gt=new Sn,En=$e()(e=>({container:{display:"flex",flexDirection:"column",height:"100%"},searchContainer:{padding:e.spacing(1),flex:"1 auto",flexDirection:"row",display:"flex"},searchInput:{"& .MuiInputBase-input":{fontSize:"16px"}},closeContainer:{justifyContent:"center",alignItems:"center",display:"flex",paddingLeft:e.spacing(1)},imageListContainer:{padding:e.spacing(0,1),overflow:"scroll",flex:"1 auto"},imageListItem:{overflow:"hidden",borderRadius:e.spacing(.5),cursor:"pointer"},imageList:{marginTop:0,position:"relative"},poweredBy:{width:100,position:"fixed",zIndex:100,borderRadius:e.spacing(.5)},poweredBySticky:{position:"absolute",top:8,right:108}})),Nn=Te(({store:e})=>{const{sessionStore:{sendChatMessage:t},closePlugin:r}=e,{classes:i}=En(),{results:n,searchTerm:y,setSearchTerm:p}=Gt,l=a=>{t(a,"gif"),r()};return dt(()=>{Gt.fetch()}),Nr(()=>p("")),s.jsxs(V,{className:i.container,children:[s.jsxs(V,{className:i.searchContainer,children:[s.jsx(V,{flex:"auto 1",children:s.jsx(Ye,{id:"outlined-basic",label:"Search",variant:"outlined",autoComplete:"off",fullWidth:!0,value:y,onChange:a=>p(a.target.value),size:"small",className:i.searchInput})}),s.jsx(V,{className:i.closeContainer,children:s.jsx(st,{size:"small",onClick:r,children:s.jsx(Lr,{})})})]}),s.jsx(V,{className:i.imageListContainer,children:s.jsxs(oi,{cols:3,rowHeight:150,className:i.imageList,children:[s.jsx("div",{className:i.poweredBySticky,children:s.jsx("img",{src:"https://res.cloudinary.com/warmly/image/upload/v1676512664/warm_opps_chat_photos_development/spy9ervdkqjzb60k9wjy.gif",alt:"Powered By Giphy",className:i.poweredBy})}),n.map((a,h)=>s.jsx(fi,{className:i.imageListItem,onClick:()=>l(a.images.original.url),children:s.jsx("img",{src:`${a.images.fixed_height.url}`,alt:a.title,loading:"lazy"})},`${a.id}-${h}`))]})})]})}),Ln=Ir,Rn=`warm_opps_chat_photos_${Ln}`,zn=$e()((e,{displayInline:t,compact:r})=>({container:{position:"relative",cursor:"pointer",height:"100%",width:"100%",...!r&&{width:"100%"},...t&&{display:"inline"}}})),Hn=({storageFolder:e=Rn,children:t,croppingAspectRatio:r,onUploadPhoto:i,onUploadCancelled:n,showSkipCropButton:y=!0,displayInline:p=!1,openImmediately:l=!1,singleUploadAutoClose:a=!1,message:h="Drag and drop your photo here",maxFileSize:T=2e6,compact:$=!1})=>{const{classes:m}=zn({displayInline:p,compact:$}),x=Rr(),v=async()=>{const c=async(k,A)=>{try{const S=await fetch(Tr+Cr.CLOUDINARY_SIGNATURE,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(A)});if(!S.ok){Oe.error(new Error(`Signature request failed with status ${S.status}`));return}const{signature:_}=await S.json();k(_)}catch(S){Oe.error(S instanceof Error?S:new Error("Failed to generate upload signature"))}},j=(k,A)=>{var S;if(A.info==="hidden"){Je("show"),n==null||n();return}if(k){const{statusText:_}=k;!(_!=null&&_.includes("exceeds maximum allowed"))&&!(_!=null&&_.includes("Invalid image file"))&&!(_!=null&&_.includes("abort"))&&Oe.error(new Error(_));return}if(A.event==="success"&&typeof A.info!="string"&&((S=A.info)!=null&&S.path)){const _=`https://res.cloudinary.com/warmly/image/upload/q_auto,f_auto,fl_lossy,c_crop,g_custom/${A.info.path}`;i(_,A.info.public_id,A.info.format),Je("show")}},D=window.cloudinary;if(!D){Oe.error(new Error("Cloudinary widget not loaded")),n==null||n();return}Je("hide"),D.createUploadWidget({api_key:Dr,uploadSignature:c,cloudName:"warmly",secure:!0,cropping:!0,croppingCoordinatesMode:"custom",croppingAspectRatio:r,croppingShowBackButton:!0,folder:e,showPoweredBy:!1,singleUploadAutoClose:a,showCompletedButton:!0,clientAllowedFormats:["jpg","png","jpeg","gif"],showSkipCropButton:y,maxFileSize:T,text:{en:{local:{dd_title_single:h,dd_title_multi:h}}},styles:{palette:{action:x.colors.primary.main,link:x.colors.primary.dark}}},j).open()};return dt(()=>{l&&v()}),s.jsx("div",{className:m.container,onClick:v,children:t})},Un=Te(({store:e})=>s.jsx(Hn,{openImmediately:!0,singleUploadAutoClose:!0,onUploadCancelled:()=>e.setSelectedPlugin(null),onUploadPhoto:t=>{e.sessionStore.sendChatMessage(t,"image"),e.setSelectedPlugin(null)}})),qn=({defaultValue:e,showErrorOnEmpty:t,touched:r,...i})=>{const[n,y]=I.useState(e||""),[p,l]=I.useState(!1),a=Qt(n),h=zr(n);let T=p&&!a,$=a&&!h?"Calendly link recommended":void 0;return!t&&!n&&(T=!1,$=void 0),I.useEffect(()=>{r!==void 0&&l(r)},[r]),I.useEffect(()=>{y(e)},[e]),s.jsx(Ye,{...i,label:"Link to Calendar",value:n,onChange:m=>{var x;y(m.target.value),(x=i.onChange)==null||x.call(i,m)},error:T,helperText:T?"Enter a valid URL":$,onBlur:m=>{var x;l(!0),(x=i.onBlur)==null||x.call(i,m)}})},Bn=$e()(()=>({container:{display:"flex",height:"100%",flexDirection:"column"},wrapper:{padding:"1rem",flex:1,overflow:"auto"},spacedBetween:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"},inputContainer:{display:"flex",flexDirection:"column",gap:"12px"},buttonContainer:{display:"flex",flexDirection:"column",gap:"10px"},textField:{"& .MuiInputBase-input":{fontSize:"16px"}}})),Yn=Te(({store:e})=>{const[t,r]=I.useState(e.defaultCalendarLink),[i,n]=I.useState("Book a meeting"),[y,p]=I.useState(!1),{classes:l}=Bn(),a=!i||y&&!Qt(t),h=()=>{if(y||p(!0),a||!t||!i)return;const T={calendarLink:t,buttonText:i};e.sessionStore.sendChatMessage(JSON.stringify(T),"calendar"),e.closePlugin()};return s.jsx("div",{className:l.container,children:s.jsx("div",{className:l.wrapper,children:s.jsxs("div",{className:l.spacedBetween,children:[s.jsxs("div",{className:l.inputContainer,children:[s.jsx(qn,{fullWidth:!0,showErrorOnEmpty:!0,defaultValue:t||"",onChange:T=>r(T.target.value),touched:y,className:l.textField}),s.jsx(Ye,{fullWidth:!0,label:"Button Text",value:i,variant:"outlined",onChange:T=>n(T.target.value),className:l.textField})]}),s.jsxs("div",{className:l.buttonContainer,children:[s.jsx(ze,{onClick:e.closePlugin,variant:"outlined",fullWidth:!0,color:"info",children:"Cancel"}),s.jsx(ze,{disabled:a,onClick:h,variant:"contained",fullWidth:!0,children:"Send Calendar Link"})]})]})})})}),sr=[{key:"calendar",label:"Calendar",icon:s.jsx(Hr,{sx:{fontSize:"20px !important"}}),component:Yn,showDrawer:!0,onlyAgent:!0},{key:"gif",label:"GIF",icon:s.jsx(Qi,{sx:{fontSize:"20px !important"}}),component:Nn,showDrawer:!0,onlyAgent:!1},{label:"Upload an image",icon:s.jsx(Xi,{sx:{fontSize:"20px !important"}}),key:"upload",component:Un,showDrawer:!1,onlyAgent:!1}],Ft={selectedPluginKey:void 0,imageLastLoadedAt:void 0};class Wn{constructor(t,r){H(this,"selectedPluginKey",Ft.selectedPluginKey);H(this,"imageLastLoadedAt",Ft.imageLastLoadedAt);H(this,"setSelectedPlugin",t=>this.selectedPluginKey=(t==null?void 0:t.key)||null);H(this,"setSelectedPluginKey",t=>this.selectedPluginKey=t);H(this,"onImageLoad",Vt(()=>this.imageLastLoadedAt=new Date));H(this,"closePlugin",()=>this.setSelectedPlugin(null));H(this,"disposers",[]);H(this,"destroy",()=>{nt.off("chatImageLoaded",this.onImageLoad),this.disposers.forEach(t=>t()),this.disposers=[]});this.sessionStore=t,this.defaultCalendarLink=r,Kt(this),nt.on("chatImageLoaded",this.onImageLoad),this.disposers.push(Pr(()=>t.isEngagedInConversation,i=>!i&&this.closePlugin()))}get selectedPlugin(){return sr.find(t=>t.key===this.selectedPluginKey)}}const Gn=$e()((e,{variant:t,customBackgroundStyle:r,v2FontFamily:i,v2ContentStyles:n})=>({noPadding:{padding:0},menuPaper:{backgroundColor:e.palette.background.default,border:`1px solid ${e.sidebar.dividerBg}`},drawer:{backgroundColor:e.palette.background.paper,height:"calc(100% + 56px)",paddingBottom:4,position:"absolute",width:"100%",zIndex:123},root:{position:"relative",flex:"auto",width:"100%"},container:{width:"100%",overflowY:"scroll",overflowX:"hidden",height:"100%",position:"absolute",background:(n==null?void 0:n.background)||e.palette.background.paper,borderTop:t==="paper"?void 0:`1.5px solid ${e.sidebar.dividerBg}`},fixedChild:{display:"flex",flexDirection:"column",flex:"none",color:e.palette.text.primary,width:"100%",background:(n==null?void 0:n.background)||e.palette.background.paper},inputCollapse:{width:"100%"},fixedChildContent:{width:"100%",display:"flex",padding:n?e.spacing(1.5,1):e.spacing(1),paddingTop:0},addIconContainer:{display:"flex",justifyContent:"center",alignItems:"center"},addIcon:{borderRadius:"50%",width:"45px",height:"45px",marginLeft:"6px"},expandChild:{flex:"auto",overflowY:"scroll"},input:{flex:1,borderWidth:1,...i&&{fontFamily:i},"& .MuiOutlinedInput-root:hover":{"& > fieldset, & .MuiOutlinedInput-notchedOutline":{borderColor:`${(n==null?void 0:n.inputHoverBorderColor)||(r==null?void 0:r.backgroundColor)||e.colors.alpha.black[100]} !important`},"&.Mui-focused fieldset, &.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:`${(n==null?void 0:n.inputHoverBorderColor)||(r==null?void 0:r.backgroundColor)||e.colors.alpha.black[100]} !important`}},"& .MuiOutlinedInput-root":{paddingRight:0,paddingLeft:e.spacing(1.5),paddingTop:e.spacing(.8),paddingBottom:e.spacing(.8),lineHeight:"28px",...i&&{fontFamily:i},"&.Mui-focused fieldset, &.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:`${(n==null?void 0:n.inputHoverBorderColor)||(r==null?void 0:r.backgroundColor)||e.colors.alpha.black[100]} !important`,borderWidth:1},"&.Mui-focused:hover fieldset, &.Mui-focused:hover .MuiOutlinedInput-notchedOutline":{borderColor:`${(n==null?void 0:n.inputHoverBorderColor)||(r==null?void 0:r.backgroundColor)||e.colors.alpha.black[100]} !important`,borderWidth:1}},"& fieldset, & .MuiOutlinedInput-notchedOutline":{borderRadius:n?"12px":e.spacing(.5),borderColor:(n==null?void 0:n.inputBorderColor)||e.colors.alpha.black[50],borderWidth:1},"& .MuiInputBase-input":{fontSize:"16px",...i&&{fontFamily:i},...(n==null?void 0:n.inputTextColor)&&{color:n.inputTextColor},"&::placeholder":{color:(n==null?void 0:n.placeholderColor)||"inherit",opacity:1}}},loaderContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},newMessageButtonContainer:{display:"flex",justifyContent:"center",alignContent:"center",position:"absolute",left:105},newMessagesButton:{borderRadius:4,fontWeight:600,marginBottom:10,padding:"10px 20px 10px 15px"},lineHeight:{lineHeight:"12px !important"},v2DateDivider:{display:"flex",alignItems:"center",justifyContent:"center",padding:e.spacing(.5,1.5),gap:e.spacing(1.5),marginBottom:e.spacing(1)},v2DateLine:{flex:1,height:"1px",backgroundColor:(n==null?void 0:n.dividerColor)||e.palette.divider},v2DateText:{fontSize:"9px",fontWeight:500,color:(n==null?void 0:n.dividerColor)||e.palette.text.secondary,...i&&{fontFamily:i}},v2PrivacyPolicy:{textAlign:"center",padding:"12px 18px",fontSize:"10px",lineHeight:"14px",color:(n==null?void 0:n.privacyPolicyColor)||e.palette.text.secondary,borderTop:`1px solid ${(n==null?void 0:n.dividerColor)||e.palette.divider}`,...i&&{fontFamily:i},"& a":{color:"inherit",textDecoration:"none"}},v2AddIcon:{color:(n==null?void 0:n.iconColor)||"inherit"},v2SendIcon:{color:(n==null?void 0:n.iconColor)||"inherit"},v2TimeStamp:{color:(n==null?void 0:n.timeStampColor)||e.palette.text.secondary}})),Fn=$e()((e,{customBackgroundStyle:t,hasV2Style:r,v2ButtonAlignment:i})=>({container:{padding:e.spacing(1,2),borderTop:r?"none":`1px solid ${e.palette.divider}`,backgroundColor:r?"transparent":(t==null?void 0:t.backgroundColor)||e.palette.background.paper},messagesContainer:{display:"flex",gap:e.spacing(1),...r&&i?Ar(i):{flexDirection:"column",alignItems:"stretch"}},messageButton:{borderRadius:e.spacing(2),textTransform:"none",fontSize:"0.875rem",padding:e.spacing(1,2),borderColor:e.palette.primary.main,color:e.palette.primary.main,backgroundColor:"transparent","&:hover":{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,borderColor:e.palette.primary.main},"&:focus":{outline:`2px solid ${e.palette.primary.main}`,outlineOffset:2}}})),ar=({suggestedMessages:e,onMessageClick:t,customBackgroundStyle:r,v2ButtonStyle:i,v2ButtonAlignment:n})=>{const{classes:y}=Fn({customBackgroundStyle:r,hasV2Style:!!i,v2ButtonAlignment:n}),p=e.filter(a=>a.enabled&&a.text.trim()),l=a=>{t(a)};return p.length===0?null:s.jsx(V,{className:y.container,children:s.jsx(V,{className:y.messagesContainer,children:p.map((a,h)=>i?s.jsx(V,{component:"button",type:"button",sx:i,onClick:()=>l(a.text),children:a.text},h):s.jsx(ze,{variant:"outlined",size:"small",className:y.messageButton,onClick:()=>l(a.text),children:a.text},h))})})};ar.displayName=`SuggestedMessages-v${Zt}`;const Vn=Te(ar),or=({variant:e,agentChat:t,store:r,defaultCalendarLink:i,api:n,suggestedMessages:y=[],customBackgroundStyle:p,stateScopeId:l})=>{const{sentMessages:a,receivedMessages:h,remoteIsTyping:T,typingOrigin:$,onIsTypingChange:m,messagesLoading:x,agent:v,sendChatMessage:c,webRtcStore:j,type:D,isEngagedInConversation:k,isEngagedByWorkflow:A,isLastMessageQuestion:S,customBackgroundStyle:_,customBorderStyle:P,privacyPolicyUrl:L,customPrivacyPolicyEnabled:q,initialPrivacyPolicyMessage:B,shortenedPrivacyPolicyMessage:N,startConversation:C,v2MessageBubbleStyle:he,v2MessageBubblePairedStyle:Ce,v2SuggestedMessageButtonStyle:w,v2ButtonColor:d,v2CornerRadius:o,v2ButtonAlignment:g,v2FontFamily:u,v2CustomOutlinedStyle:M,v2ContentStyles:f,chatBrandingV2Settings:O}=r,{mediaStore:R}=j,{micOn:U,remoteMicOn:Y,remoteVideoOn:K}=R,J=I.useMemo(()=>new Wn(r,i),[i,r]),{setSelectedPlugin:ae,selectedPlugin:X,imageLastLoadedAt:oe}=J,W=Jt(),[F,ie]=I.useState(""),[le,ft]=I.useState(!1),[cr,We]=I.useState(!0),ht=Ai(F,1e3),ee=I.useRef(null),Ge=I.useRef(null),[pt,Pe]=I.useState(null),pe=p||_,{classes:z}=Gn({variant:e,customBackgroundStyle:pe,v2FontFamily:u,v2ContentStyles:f}),{classes:lr}=Ur({customBackgroundStyle:pe}),ne=!S&&(!A||!T||$==="agent"),gt=I.useRef(ne),Fe=!U&&(Y||K),ur="chat-box-content",Ve=r.type==="client"&&(f?O==null?void 0:O.customPrivacyPolicyEnabled:!0),dr=t&&y.length>0&&cr,ue=[...a.map(b=>({...b,origin:"self"})),...h.map(b=>({...b,origin:"other"}))].sort((b,E)=>b.createdAt.getTime()-E.createdAt.getTime()).map(b=>{let E=b.content;return E.charAt(0)===`
`&&(E=E.substring(1)),E.charAt(E.length-1)===`
`&&(E=E.substring(0,E.length-1)),{...b,content:E}}),fr=x&&!ue.length,hr=x,pr=x&&!ue.length,mt=ue==null?void 0:ue.reduce((b,E)=>{const Z=Wi(E==null?void 0:E.createdAt)??"Today";return b[Z]||(b[Z]=[]),b[Z].push(E),b},{}),gr=Ve&&!ue.some(b=>b.agentType==="human"&&b.messageOrigin==="agent"),[xt,vt]=I.useState(h.length),[Ke,Qe]=I.useState(!1),we=I.useRef(!1),yt=h.length-xt,Ze=I.useRef(new Set);I.useEffect(()=>{l&&(ie(""),ft(!1),vt(0),Qe(!1),we.current=!1,Pe(null),J.setSelectedPlugin(null),We(!Ze.current.has(l)))},[l]);const $t=()=>{F&&(c(F,"text"),ie(""),We(!1),l&&Ze.current.add(l),setTimeout(ge,500),r.type==="agent"&&k===!1&&(C==null||C()))},ge=()=>{var b,E;W&&((E=ee.current)==null||E.scrollTo({top:(b=ee.current)==null?void 0:b.scrollHeight,behavior:"smooth"}),we.current=!1,Qe(!1),vt(h.length))},mr=()=>{ge()},wt=()=>(f?O==null?void 0:O.customPrivacyPolicyEnabled:q)&&(gr?B:N)||"Privacy Policy",xr=b=>{c(b,"text"),We(!1),l&&Ze.current.add(l),setTimeout(ge,500),r.type==="agent"&&k===!1&&(C==null||C())};dt(ge),I.useEffect(()=>()=>J.destroy(),[J]),I.useEffect(()=>{var b;if(ee.current&&ne){let E=(b=ee.current)==null?void 0:b.scrollTop;ee.current.onscroll=()=>{var Z,me,xe,Ae;if(!((Z=ee.current)!=null&&Z.scrollTop)||!E){E=(me=ee.current)==null?void 0:me.scrollTop;return}((xe=ee.current)==null?void 0:xe.scrollTop)<E&&(we.current=!0),E=(Ae=ee.current)==null?void 0:Ae.scrollTop}}},[ne,W.current,ee.current]),I.useEffect(()=>{!Ke&&we.current&&Qe(xt!==h.length)},[h,Ke]),I.useEffect(()=>{ne&&D!=="agent"&&ge()},[ne,T,D]),At(()=>{const b=!gt.current,E=ne;gt.current=ne,b&&E&&Ge.current&&setTimeout(()=>{var Z;(Z=Ge.current)==null||Z.focus()},100)},[ne]),I.useEffect(()=>{ft(F!==ht)},[ht,F]),At(()=>{m==null||m(le,D)},[le,m,D]),I.useEffect(()=>{const b=k||Fe;(!we.current||D==="client")&&setTimeout(ge,b?250:0)},[ue,Fe,k,oe,h]);const vr=s.jsx("div",{className:z.loaderContainer,children:s.jsx(qr,{})}),yr=s.jsx(Br,{open:!!pt,classes:{paper:z.menuPaper,list:z.noPadding},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},componentsProps:{backdrop:{className:"MuiBackdrop-invisible"}},anchorEl:pt,onClose:()=>Pe(null),children:s.jsx(Yr,{dense:!0,classes:{root:z.noPadding},className:z.noPadding,children:sr.filter(b=>r.type==="agent"?!0:!b.onlyAgent).map(b=>s.jsxs(Vr,{onClick:()=>{Pe(null),ae(b)},children:[s.jsx(Kr,{children:b.icon}),b.label]},b.key))})}),$r=s.jsx(Wr,{direction:"up",className:z.drawer,in:!!(X!=null&&X.showDrawer),children:s.jsx("div",{children:X&&s.jsx(X.component,{store:J})})});return fr?vr:s.jsxs(s.Fragment,{children:[yr,s.jsxs("div",{className:z.root,children:[$r,s.jsx("div",{id:ur,ref:ee,className:z.container,children:s.jsx(V,{p:f?1.5:3,pl:1.5,pr:1.5,pb:0,children:mt?Object.entries(mt).map((b,E)=>{const[Z,me]=b;return s.jsxs(I.Fragment,{children:[f?s.jsxs("div",{className:z.v2DateDivider,children:[s.jsx("div",{className:z.v2DateLine}),s.jsx(Re,{className:z.v2DateText,children:Z}),s.jsx("div",{className:z.v2DateLine})]}):s.jsx("div",{style:{marginBottom:"1.5rem"},children:s.jsx(Qr,{children:s.jsx(Re,{variant:"subtitle1",sx:{},children:Z})})}),me==null?void 0:me.map((xe,Ae)=>s.jsx(jt,{message:xe,hideSenderInfo:D==="client"&&xe.origin==="self",agentChat:t,customBackgroundStyle:pe,v2SelfStyle:Ce,v2OtherStyle:he,v2ButtonStyle:w,v2ButtonColor:d,v2CornerRadius:o,v2ButtonAlignment:g,v2TimeStampColor:f==null?void 0:f.timeStampColor,v2NameColor:f==null?void 0:f.nameColor,v2FontFamily:u,api:n,store:r},`${Ae}-${xe.createdAt.toISOString()}`)),T&&s.jsx(jt,{message:"typing",agentChat:t,store:r}),s.jsx(Mt,{in:Fe,children:s.jsx(Fi,{onClick:r.toggleAudio,agentInfo:v})})]},`${Z}-${E}-date-divider`)}):null})})]}),s.jsxs("div",{className:z.fixedChild,children:[ne&&s.jsxs(Mt,{in:ne,className:z.inputCollapse,children:[Ke&&s.jsx(V,{className:z.newMessageButtonContainer,sx:{bottom:Ve?80:60},children:s.jsxs(ze,{className:z.newMessagesButton,sx:{...pe},onClick:mr,variant:"contained",children:[s.jsx(Pi,{sx:{fontSize:"20px",marginRight:1,...pe}}),yt===1?"1 New message":`${yt} New messages`]})}),dr&&s.jsx(Vn,{suggestedMessages:y,onMessageClick:xr,customBackgroundStyle:pe,v2ButtonStyle:w,v2ButtonAlignment:g}),s.jsxs("div",{className:z.fixedChildContent,children:[s.jsx(Ye,{id:t?"warmly-agent-textfield":"visitor-textfield",inputRef:Ge,multiline:!0,maxRows:3,value:F,placeholder:f==null?void 0:f.inputPlaceholder,disabled:hr,className:z.input,onChange:b=>ie(b.target.value),InputProps:{sx:{...P},endAdornment:s.jsx(st,{"data-testid":"send-chat-btn",onClick:$t,disabled:pr,color:"inherit",className:lr.sendButton,children:s.jsx(Gr,{sx:{fontSize:"20px",...f&&{color:f.iconColor}}})})},onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),b.shiftKey?ie(F+`
`):$t())}}),s.jsx("div",{className:z.addIconContainer,children:s.jsx(st,{onClick:b=>Pe(b.currentTarget),className:z.addIcon,children:s.jsx(Di,{sx:{fontSize:"20px",...f&&{color:f.iconColor}}})})})]})]}),Ve&&s.jsx("div",{style:{width:"100%"},children:f?s.jsx(V,{className:z.v2PrivacyPolicy,children:s.jsx(_t,{style:{color:"inherit"},href:(O==null?void 0:O.customPrivacyPolicyUrl)||L,target:"_blank",children:wt()})}):s.jsx(V,{sx:{display:"flex",justifyContent:"center",marginBottom:1,padding:"0px 9px !important",textAlign:"center !important",lineHeight:"12px !important"},children:s.jsx(_t,{style:{fontSize:"9px",color:"black"},className:z.lineHeight,href:L,target:"_blank",children:wt()})})})]})]})};or.displayName=`ChatContent-v${Zt}`;const es=Te(or);export{es as default};
