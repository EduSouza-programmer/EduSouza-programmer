import{r as z,g as it,h as C,j as e,c as x,t as Y,n as K,C as Q,o as Z,$ as kt}from"./widget-Da2svzF_.js";import{g as tt,c as Ot,C as wt,d as zt,e as Pt,f as Lt,T as Et,h as at,i as It,j as _,l as ut,n as Bt,o as Vt,p as nt,q as St,r as Tt,t as Ft,v as Dt,w as ot,x as Mt,y as Nt,z as _t,A as yt,D as rt,m as pt,M as At,L as q,E as qt,F as Wt,k as Gt,G as Ht,H as Ut,B as gt,I as N,J as vt,K as Jt}from"./Widget-2FSmaCdi.js";import{e as Xt}from"./WidgetApp-BuQT9PRV.js";import{u as Yt,M as st,L as dt,D as lt,a as Kt}from"./useIsMounted-CYYP4sBL.js";import{T as bt}from"./Tooltip-DlPdi-q6.js";const Qt=tt("MuiBox",["root"]),Zt=Ot({defaultClassName:Qt.root,generateClassName:wt.generate});function to({props:o,name:t,defaultTheme:i,themeId:n}){let s=zt(i);return s=s[n]||s,Pt({theme:s,name:t,props:o})}function oo(o){return z.Children.toArray(o).filter(t=>z.isValidElement(t))}function eo({props:o,name:t}){return to({props:o,name:t,defaultTheme:Lt,themeId:Et})}function io(o){return at("MuiButtonGroup",o)}const O=tt("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),ao=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],no=(o,t)=>{const{ownerState:i}=o;return[{[`& .${O.grouped}`]:t.grouped},{[`& .${O.grouped}`]:t[`grouped${x(i.orientation)}`]},{[`& .${O.grouped}`]:t[`grouped${x(i.variant)}`]},{[`& .${O.grouped}`]:t[`grouped${x(i.variant)}${x(i.orientation)}`]},{[`& .${O.grouped}`]:t[`grouped${x(i.variant)}${x(i.color)}`]},{[`& .${O.firstButton}`]:t.firstButton},{[`& .${O.lastButton}`]:t.lastButton},{[`& .${O.middleButton}`]:t.middleButton},t.root,t[i.variant],i.disableElevation===!0&&t.disableElevation,i.fullWidth&&t.fullWidth,i.orientation==="vertical"&&t.vertical]},ro=o=>{const{classes:t,color:i,disabled:n,disableElevation:s,fullWidth:c,orientation:p,variant:u}=o,d={root:["root",u,p==="vertical"&&"vertical",c&&"fullWidth",s&&"disableElevation"],grouped:["grouped",`grouped${x(p)}`,`grouped${x(u)}`,`grouped${x(u)}${x(p)}`,`grouped${x(u)}${x(i)}`,n&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return nt(d,io,t)},so=_("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:no})(({theme:o,ownerState:t})=>C({display:"inline-flex",borderRadius:(o.vars||o).shape.borderRadius},t.variant==="contained"&&{boxShadow:(o.vars||o).shadows[2]},t.disableElevation&&{boxShadow:"none"},t.fullWidth&&{width:"100%"},t.orientation==="vertical"&&{flexDirection:"column"},{[`& .${O.grouped}`]:C({minWidth:40,"&:hover":C({},t.variant==="contained"&&{boxShadow:"none"})},t.variant==="contained"&&{boxShadow:"none"}),[`& .${O.firstButton},& .${O.middleButton}`]:C({},t.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},t.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},t.variant==="text"&&t.orientation==="horizontal"&&{borderRight:o.vars?`1px solid rgba(${o.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${o.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${O.disabled}`]:{borderRight:`1px solid ${(o.vars||o).palette.action.disabled}`}},t.variant==="text"&&t.orientation==="vertical"&&{borderBottom:o.vars?`1px solid rgba(${o.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${o.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${O.disabled}`]:{borderBottom:`1px solid ${(o.vars||o).palette.action.disabled}`}},t.variant==="text"&&t.color!=="inherit"&&{borderColor:o.vars?`rgba(${o.vars.palette[t.color].mainChannel} / 0.5)`:Y.alpha(o.palette[t.color].main,.5)},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"transparent"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"transparent"},t.variant==="contained"&&t.orientation==="horizontal"&&{borderRight:`1px solid ${(o.vars||o).palette.grey[400]}`,[`&.${O.disabled}`]:{borderRight:`1px solid ${(o.vars||o).palette.action.disabled}`}},t.variant==="contained"&&t.orientation==="vertical"&&{borderBottom:`1px solid ${(o.vars||o).palette.grey[400]}`,[`&.${O.disabled}`]:{borderBottom:`1px solid ${(o.vars||o).palette.action.disabled}`}},t.variant==="contained"&&t.color!=="inherit"&&{borderColor:(o.vars||o).palette[t.color].dark},{"&:hover":C({},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"currentColor"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${O.lastButton},& .${O.middleButton}`]:C({},t.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},t.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},t.variant==="outlined"&&t.orientation==="horizontal"&&{marginLeft:-1},t.variant==="outlined"&&t.orientation==="vertical"&&{marginTop:-1})})),lo=z.forwardRef(function(t,i){const n=It({props:t,name:"MuiButtonGroup"}),{children:s,className:c,color:p="primary",component:u="div",disabled:d=!1,disableElevation:g=!1,disableFocusRipple:b=!1,disableRipple:l=!1,fullWidth:m=!1,orientation:E="horizontal",size:w="medium",variant:$="outlined"}=n,y=it(n,ao),L=C({},n,{color:p,component:u,disabled:d,disableElevation:g,disableFocusRipple:b,disableRipple:l,fullWidth:m,orientation:E,size:w,variant:$}),R=ro(L),A=z.useMemo(()=>({className:R.grouped,color:p,disabled:d,disableElevation:g,disableFocusRipple:b,disableRipple:l,fullWidth:m,size:w,variant:$}),[p,d,g,b,l,m,w,$,R.grouped]),B=oo(s),f=B.length,v=S=>{const j=S===0,I=S===f-1;return j&&I?"":j?R.firstButton:I?R.lastButton:R.middleButton};return e.jsx(so,C({as:u,role:"group",className:ut(R.root,c),ref:i,ownerState:L},y,{children:e.jsx(Bt.Provider,{value:A,children:B.map((S,j)=>e.jsx(Vt.Provider,{value:v(j),children:S},j))})}))});function co(o){return at("PrivateSwitchBase",o)}tt("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const uo=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],po=o=>{const{classes:t,checked:i,disabled:n,edge:s}=o,c={root:["root",i&&"checked",n&&"disabled",s&&`edge${x(s)}`],input:["input"]};return nt(c,co,t)},ho=_(Ft)(({ownerState:o})=>C({padding:9,borderRadius:"50%"},o.edge==="start"&&{marginLeft:o.size==="small"?-3:-12},o.edge==="end"&&{marginRight:o.size==="small"?-3:-12})),go=_("input",{shouldForwardProp:Dt})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),vo=z.forwardRef(function(t,i){const{autoFocus:n,checked:s,checkedIcon:c,className:p,defaultChecked:u,disabled:d,disableFocusRipple:g=!1,edge:b=!1,icon:l,id:m,inputProps:E,inputRef:w,name:$,onBlur:y,onChange:L,onFocus:R,readOnly:A,required:B=!1,tabIndex:f,type:v,value:S}=t,j=it(t,uo),[I,h]=St({controlled:s,default:!!u,name:"SwitchBase",state:"checked"}),k=Tt(),F=D=>{R&&R(D),k&&k.onFocus&&k.onFocus(D)},a=D=>{y&&y(D),k&&k.onBlur&&k.onBlur(D)},V=D=>{if(D.nativeEvent.defaultPrevented)return;const ht=D.target.checked;h(ht),L&&L(D,ht)};let r=d;k&&typeof r>"u"&&(r=k.disabled);const et=v==="checkbox"||v==="radio",T=C({},t,{checked:I,disabled:r,disableFocusRipple:g,edge:b}),W=po(T);return e.jsxs(ho,C({component:"span",className:ut(W.root,p),centerRipple:!0,focusRipple:!g,disabled:r,tabIndex:null,role:void 0,onFocus:F,onBlur:a,ownerState:T,ref:i},j,{children:[e.jsx(go,C({autoFocus:n,checked:s,defaultChecked:u,className:W.input,disabled:r,id:et?m:void 0,name:$,onChange:V,readOnly:A,ref:w,required:B,ownerState:T,tabIndex:f,type:v},v==="checkbox"&&S===void 0?{}:{value:S},E)),I?c:l]}))});function bo(o){return at("MuiSwitch",o)}const P=tt("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),mo=["className","color","edge","size","sx"],xo=o=>{const{classes:t,edge:i,size:n,color:s,checked:c,disabled:p}=o,u={root:["root",i&&`edge${x(i)}`,`size${x(n)}`],switchBase:["switchBase",`color${x(s)}`,c&&"checked",p&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},d=nt(u,bo,t);return C({},t,d)},fo=_("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(o,t)=>{const{ownerState:i}=o;return[t.root,i.edge&&t[`edge${x(i.edge)}`],t[`size${x(i.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${P.thumb}`]:{width:16,height:16},[`& .${P.switchBase}`]:{padding:4,[`&.${P.checked}`]:{transform:"translateX(16px)"}}}}]}),jo=_(vo,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(o,t)=>{const{ownerState:i}=o;return[t.switchBase,{[`& .${P.input}`]:t.input},i.color!=="default"&&t[`color${x(i.color)}`]]}})(({theme:o})=>({position:"absolute",top:0,left:0,zIndex:1,color:o.vars?o.vars.palette.Switch.defaultColor:`${o.palette.mode==="light"?o.palette.common.white:o.palette.grey[300]}`,transition:o.transitions.create(["left","transform"],{duration:o.transitions.duration.shortest}),[`&.${P.checked}`]:{transform:"translateX(20px)"},[`&.${P.disabled}`]:{color:o.vars?o.vars.palette.Switch.defaultDisabledColor:`${o.palette.mode==="light"?o.palette.grey[100]:o.palette.grey[600]}`},[`&.${P.checked} + .${P.track}`]:{opacity:.5},[`&.${P.disabled} + .${P.track}`]:{opacity:o.vars?o.vars.opacity.switchTrackDisabled:`${o.palette.mode==="light"?.12:.2}`},[`& .${P.input}`]:{left:"-100%",width:"300%"}}),({theme:o})=>({"&:hover":{backgroundColor:o.vars?`rgba(${o.vars.palette.action.activeChannel} / ${o.vars.palette.action.hoverOpacity})`:Y.alpha(o.palette.action.active,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(o.palette).filter(([,t])=>t.main&&t.light).map(([t])=>({props:{color:t},style:{[`&.${P.checked}`]:{color:(o.vars||o).palette[t].main,"&:hover":{backgroundColor:o.vars?`rgba(${o.vars.palette[t].mainChannel} / ${o.vars.palette.action.hoverOpacity})`:Y.alpha(o.palette[t].main,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${P.disabled}`]:{color:o.vars?o.vars.palette.Switch[`${t}DisabledColor`]:`${o.palette.mode==="light"?Y.lighten(o.palette[t].main,.62):Y.darken(o.palette[t].main,.55)}`}},[`&.${P.checked} + .${P.track}`]:{backgroundColor:(o.vars||o).palette[t].main}}}))]})),Co=_("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(o,t)=>t.track})(({theme:o})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:o.transitions.create(["opacity","background-color"],{duration:o.transitions.duration.shortest}),backgroundColor:o.vars?o.vars.palette.common.onBackground:`${o.palette.mode==="light"?o.palette.common.black:o.palette.common.white}`,opacity:o.vars?o.vars.opacity.switchTrack:`${o.palette.mode==="light"?.38:.3}`})),$o=_("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(o,t)=>t.thumb})(({theme:o})=>({boxShadow:(o.vars||o).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),Io=z.forwardRef(function(t,i){const n=It({props:t,name:"MuiSwitch"}),{className:s,color:c="primary",edge:p=!1,size:u="medium",sx:d}=n,g=it(n,mo),b=C({},n,{color:c,edge:p,size:u}),l=xo(b),m=e.jsx($o,{className:l.thumb,ownerState:b});return e.jsxs(fo,{className:ut(l.root,s),sx:d,ownerState:b,children:[e.jsx(jo,C({type:"checkbox",icon:m,checkedIcon:m,ref:i,ownerState:b},g,{classes:C({},l,{root:l.switchBase})})),e.jsx(Co,{className:l.track,ownerState:b})]})});var G={},mt;function Bo(){if(mt)return G;mt=1;var o=K();Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var t=o(ot()),i=Q();return G.default=(0,t.default)((0,i.jsx)("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3m-1-9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1zm6 6c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92z"}),"MicNoneOutlined"),G}var yo=Bo();const Ro=Z(yo);var H={},xt;function ko(){if(xt)return H;xt=1;var o=K();Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var t=o(ot()),i=Q();return H.default=(0,t.default)((0,i.jsx)("path",{d:"M15 8v8H5V8zm1-2H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4V7c0-.55-.45-1-1-1"}),"VideocamOutlined"),H}var Oo=ko();const wo=Z(Oo);var U={},ft;function zo(){if(ft)return U;ft=1;var o=K();Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var t=o(ot()),i=Q();return U.default=(0,t.default)((0,i.jsx)("path",{d:"m9.56 8-2-2-4.15-4.14L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.55-.18L19.73 21l1.41-1.41-8.86-8.86zM5 16V8h1.73l8 8zm10-8v2.61l6 6V6.5l-4 4V7c0-.55-.45-1-1-1h-5.61l2 2z"}),"VideocamOffOutlined"),U}var Po=zo();const Lo=Z(Po);function Eo(o){return at("MuiLoadingButton",o)}const M=tt("MuiLoadingButton",["root","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]),Vo=["children","disabled","id","loading","loadingIndicator","loadingPosition","variant"],So=o=>{const{loading:t,loadingPosition:i,classes:n}=o,s={root:["root",t&&"loading"],startIcon:[t&&`startIconLoading${x(i)}`],endIcon:[t&&`endIconLoading${x(i)}`],loadingIndicator:["loadingIndicator",t&&`loadingIndicator${x(i)}`]},c=nt(s,Eo,n);return C({},n,c)},To=o=>o!=="ownerState"&&o!=="theme"&&o!=="sx"&&o!=="as"&&o!=="classes",Fo=_(yt,{shouldForwardProp:o=>To(o)||o==="classes",name:"MuiLoadingButton",slot:"Root",overridesResolver:(o,t)=>[t.root,t.startIconLoadingStart&&{[`& .${M.startIconLoadingStart}`]:t.startIconLoadingStart},t.endIconLoadingEnd&&{[`& .${M.endIconLoadingEnd}`]:t.endIconLoadingEnd}]})(({ownerState:o,theme:t})=>C({[`& .${M.startIconLoadingStart}, & .${M.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},o.loadingPosition==="center"&&{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${M.loading}`]:{color:"transparent"}},o.loadingPosition==="start"&&o.fullWidth&&{[`& .${M.startIconLoadingStart}, & .${M.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0,marginRight:-8}},o.loadingPosition==="end"&&o.fullWidth&&{[`& .${M.startIconLoadingStart}, & .${M.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0,marginLeft:-8}})),Do=_("span",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:(o,t)=>{const{ownerState:i}=o;return[t.loadingIndicator,t[`loadingIndicator${x(i.loadingPosition)}`]]}})(({theme:o,ownerState:t})=>C({position:"absolute",visibility:"visible",display:"flex"},t.loadingPosition==="start"&&(t.variant==="outlined"||t.variant==="contained")&&{left:t.size==="small"?10:14},t.loadingPosition==="start"&&t.variant==="text"&&{left:6},t.loadingPosition==="center"&&{left:"50%",transform:"translate(-50%)",color:(o.vars||o).palette.action.disabled},t.loadingPosition==="end"&&(t.variant==="outlined"||t.variant==="contained")&&{right:t.size==="small"?10:14},t.loadingPosition==="end"&&t.variant==="text"&&{right:6},t.loadingPosition==="start"&&t.fullWidth&&{position:"relative",left:-10},t.loadingPosition==="end"&&t.fullWidth&&{position:"relative",right:-10})),jt=z.forwardRef(function(t,i){const n=z.useContext(Bt),s=Mt(n,t),c=eo({props:s,name:"MuiLoadingButton"}),{children:p,disabled:u=!1,id:d,loading:g=!1,loadingIndicator:b,loadingPosition:l="center",variant:m="text"}=c,E=it(c,Vo),w=Nt(d),$=b??e.jsx(_t,{"aria-labelledby":w,color:"inherit",size:16}),y=C({},c,{disabled:u,loading:g,loadingIndicator:$,loadingPosition:l,variant:m}),L=So(y),R=g?e.jsx(Do,{className:L.loadingIndicator,ownerState:y,children:$}):null;return e.jsxs(Fo,C({disabled:u||g,id:w,ref:i},E,{variant:m,classes:L,ownerState:y,children:[y.loadingPosition==="end"?p:R,y.loadingPosition==="end"?R:p]}))});var J={},Ct;function Mo(){if(Ct)return J;Ct=1;var o=K();Object.defineProperty(J,"__esModule",{value:!0}),J.default=void 0;var t=o(ot()),i=Q();return J.default=(0,t.default)((0,i.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown"),J}var No=Mo();const _o=Z(No);var X={},$t;function Ao(){if($t)return X;$t=1;var o=K();Object.defineProperty(X,"__esModule",{value:!0}),X.default=void 0;var t=o(ot()),i=Q();return X.default=(0,t.default)((0,i.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),X}var qo=Ao();const ct=Z(qo),Wo=pt()(o=>({listItem:{minWidth:220},button:{padding:0}})),Go=rt(({sessionStore:o,iconButtonSize:t})=>{const{webRtcStore:{mediaStore:{audioInputMediaDevices:i,selectedAudioInputMediaDevice:n,setSelectedAudioInputMediaDevice:s,audioOutputMediaDevices:c,videoInputMediaDevices:p,selectedAudioOutputMediaDevice:u,setSelectedAudioOutputMediaDevice:d,selectedVideoInputMediaDevice:g,setSelectedVideoInputMediaDevice:b,showVideoControls:l,setShowVideoControls:m,requestMediaPermissions:E}},setUserNotificationMessage:w}=o,[$,y]=z.useState(null),L=!!$,{classes:R}=Wo(),A=Yt(),B=async h=>{y(h.currentTarget),!await E(w)&&A.current&&y(null)},f=()=>{y(null)},v=h=>{s(h),f()},S=h=>{b(h),f()},j=h=>{d(h),f()},I=h=>{m(h.target.checked),f()};return e.jsxs(e.Fragment,{children:[e.jsx(yt,{size:t,className:R.button,color:"inherit",id:"media-source-button",variant:"text","aria-controls":L?"media-device-menu":void 0,"aria-haspopup":"true","aria-expanded":L?"true":void 0,onClick:B,children:e.jsx(_o,{sx:{fontSize:"20px"}})}),e.jsxs(At,{id:"media-device-menu",anchorEl:$,open:L,onClose:f,MenuListProps:{"aria-labelledby":"media-source-button"},children:[e.jsx(q,{primary:"Audio Input"}),i==null?void 0:i.map((h,k)=>{const F=(n==null?void 0:n.deviceId)===h.deviceId;return e.jsxs(st,{onClick:()=>v(h),children:[F&&e.jsx(dt,{children:e.jsx(ct,{})}),e.jsx(q,{children:h.label})]},`mediaDevice-input-${k}`)}),e.jsx(lt,{}),e.jsx(q,{primary:"Audio Output"}),c==null?void 0:c.map((h,k)=>{const F=(u==null?void 0:u.deviceId)===h.deviceId;return e.jsxs(st,{onClick:()=>j(h),children:[F&&e.jsx(dt,{children:e.jsx(ct,{})}),e.jsx(q,{children:h.label})]},`mediaDevice-output-${k}`)}),e.jsx(lt,{}),e.jsx(q,{primary:"Video Input"}),p==null?void 0:p.map((h,k)=>{const F=(g==null?void 0:g.deviceId)===h.deviceId;return e.jsxs(st,{onClick:()=>S(h),children:[F&&e.jsx(dt,{children:e.jsx(ct,{})}),e.jsx(q,{children:h.label})]},`mediaDevice-video-output-${k}`)}),e.jsx(lt,{}),e.jsxs(qt,{className:R.listItem,children:[e.jsx(q,{children:"Show Media Controls"}),e.jsx(Wt,{children:e.jsx(Io,{onChange:I,checked:l,color:"primary",inputProps:{"aria-label":"Show Media Controls"}})})]})]})]})}),Ho=pt()(o=>({callControlBar:{position:"absolute",bottom:o.spacing(1),left:o.spacing(1),zIndex:30,".MuiButtonBase-root":{minWidth:30}},toggleContainer:{display:"flex",paddingLeft:10},callButtonRoot:{borderRadius:o.spacing(1),background:kt(o.palette.background.default,.9)},buttonGrouped:{borderColor:`${o.colors.alpha.black[30]} !important`,padding:o.spacing(1),fontSize:12},pulse:{zIndex:"1000 !important",animationName:`${Gt({"0%":{boxShadow:"0 0 0 0 rgba(255, 109, 74, 0.7), 0 0 0 0 rgba(255, 109, 74, 0.7)"},"40%":{boxShadow:"0 0 0 25px rgba(255, 109, 74, 0),0 0 0 0 rgba(255, 109, 74, 0.7)"},"80%":{boxShadow:"0 0 0 50px rgba(255, 109, 74, 0),0 0 0 30px rgba(255, 109, 74, 0)"},"100%":{boxShadow:"0 0 0 0 rgba(255, 109, 74, 0), 0 0 0 30px rgba(255, 109, 74, 0)"}})}`,animationDuration:"2.2s",animationTimingFunction:"ease-in-out",animationIterationCount:"infinite",animationFillMode:"both"}})),Uo=rt(({sessionStore:o})=>{const{toggleVideo:t,toggleAudio:i,prompts:n,isEngagedInConversation:s,webRtcStore:{isP2PConnected:c,isStartingVideoStream:p,isStartingAudioStream:u,mediaStore:{showMediaControls:d,videoOn:g,micOn:b}}}=o,{classes:l,cx:m}=Ho(),E=g?"Click to hide video":"Click to show video",w=b?"Click to unmute":"Click to mute";return!s||!c?null:e.jsx("div",{className:l.callControlBar,children:e.jsxs(lo,{variant:"contained","aria-label":"outlined primary button group",disableElevation:!0,className:l.callButtonRoot,children:[e.jsx(jt,{loading:p,className:m(l.buttonGrouped,(n==null?void 0:n.promptForVideo)&&l.pulse),onClick:$=>{$.stopPropagation(),t()},variant:"text",color:"inherit",children:e.jsx(bt,{placement:"bottom",title:E,children:e.jsx(e.Fragment,{children:g?e.jsx(wo,{sx:{fontSize:"20px"}}):e.jsx(Lo,{sx:{fontSize:"20px"}})})})}),e.jsx(jt,{loading:u,onClick:$=>{$.stopPropagation(),i()},variant:"text",color:"inherit",className:l.buttonGrouped,children:e.jsx(bt,{placement:"bottom",title:w,children:e.jsx(e.Fragment,{children:b?e.jsx(Ro,{sx:{fontSize:"20px"}}):e.jsx(Kt,{sx:{fontSize:"20px"}})})})}),d&&e.jsx(Go,{sessionStore:o,iconButtonSize:"small"})]})})}),Jo=({anchorRef:o,userNotificationMessage:t,setUserNotificationMessage:i})=>{const n=(t==null?void 0:t.name)==="video_permission_error"||(t==null?void 0:t.name)==="microphone_permission_error",s=Ht(),c=t==null?void 0:t.header,p=t==null?void 0:t.body,u=()=>{i(void 0)};return e.jsx(Ut,{in:n,timeout:400,unmountOnExit:!0,children:e.jsx(gt,{m:2,ref:o.current,sx:{display:"flex",cursor:"pointer"},onClick:u,children:e.jsxs(gt,{sx:{borderRadius:`${s.general.borderRadius}`,background:`${s.palette.primary.main}`,width:"100%",color:"white",position:"relative",zIndex:7},p:3,children:[e.jsx(N,{textAlign:"left",sx:{pb:1},variant:"h4",children:c}),e.jsx(N,{textAlign:"left",variant:"body2",children:p})]})})})},Xo=rt(Jo),Yo=pt()((o,{videoOn:t,remoteVideoOn:i,remoteUser:n,isAgent:s,hideWhenInactive:c})=>({container:{display:"flex",flexDirection:"column",margin:"0",flexFlow:" column nowrap"},fixedChild:{width:"100%",flex:"none",height:!n&&!s?c?0:30:300,position:"relative",background:o.colors.alpha.black[100]},expandChild:{flex:"auto",overflowY:"scroll"},videoFeed:{width:"100%",height:"100%",objectFit:"cover",display:"block",position:"absolute"},primaryVideoFeed:{right:0,bottom:0,display:i?"block":"none"},secondaryVideoFeed:{width:"100%",height:"100%",objectFit:"cover"},secondaryVideoFeedContainer:{border:"1px solid white",background:o.colors.alpha.black[100],zIndex:50,width:100,height:100,position:"absolute",right:o.spacing(1),bottom:o.spacing(1),display:t?"flex":"none",justifyContent:"center",alignItems:"center"},zoom:{transitionDelay:i?"250ms":"0ms",position:"relative"},videoContainer:{zIndex:1,width:"100%",height:"100%",position:"relative"},avatar:{width:100,height:100},preVideo:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",flexDirection:"column",padding:"0 12px"},avatarName:{marginTop:o.spacing(1)},avatarTagline:{marginTop:o.spacing(.25)},videoOverlay:{display:"flex",flexDirection:"column",position:"absolute",zIndex:2,color:"white",width:"100%",height:"100%",paddingTop:"12px",paddingLeft:"12px",background:"linear-gradient(135deg, rgba(70, 69, 69, 1) 0%, transparent 35%, transparent 100%)"},location:{display:"flex",alignItems:"center",fontSize:14},locationIcon:{fontSize:14}})),Rt=({store:o,isSecondaryPanel:t,onClick:i,customBackgroundStyle:n,hideWhenInactive:s})=>{const{type:c,userNotificationMessage:p,setUserNotificationMessage:u,remoteUser:d,webRtcStore:{mediaStore:{addOtherRemoteVideoElements:g,showVideoControls:b,remoteVideoOn:l,videoOn:m,setRemoteVideoElement:E,setLocalVideoElement:w,addOtherLocalVideoElements:$}}}=o,y=c==="agent",L=!l&&m,R=d==null?void 0:d.avatarUrl,A=z.useRef(null),B=z.useRef(),f=z.useRef(),{classes:v,cx:S}=Yo({videoOn:m,remoteVideoOn:l,isAgent:y,onlyLocalVideoOn:L,showVideoControls:b,remoteUser:d,hideWhenInactive:s}),{remoteVideoElement:j,localVideoElement:I}=o.webRtcStore.mediaStore,h=(a,V,r)=>{var et;if(V.current=a??void 0,!!a)if(t)r.primaryElement?(r.addToOtherElements(a),r.isVideoOn&&((et=r.primaryElement)!=null&&et.srcObject)&&!a.srcObject&&(a.srcObject=r.primaryElement.srcObject)):(r.setPrimaryElement(a),r.addToOtherElements(a));else{const T=r.primaryElement,W=T==null?void 0:T.srcObject;r.setPrimaryElement(a),W&&!a.srcObject&&(a.srcObject=W,T&&T!==a&&r.addToOtherElements(T))}},k=a=>{h(a,B,{primaryElement:j,isVideoOn:l,setPrimaryElement:E,addToOtherElements:g})},F=a=>{h(a,f,{primaryElement:I,isVideoOn:m,setPrimaryElement:w,addToOtherElements:$})};return z.useEffect(()=>{if(B.current){if(t)g(B.current),l&&(j!=null&&j.srcObject)&&!B.current.srcObject&&(B.current.srcObject=j.srcObject);else{const a=j,V=a==null?void 0:a.srcObject,r=B.current;E(r),V&&r&&!r.srcObject&&(r.srcObject=V,a&&a!==r&&g(a))}return()=>{B.current&&t&&(B.current.srcObject=null)}}},[g,t,E,l,j]),z.useEffect(()=>{if(!t||!B.current)return;const a=()=>{var r;l&&(j!=null&&j.srcObject)&&!((r=B.current)!=null&&r.srcObject)&&B.current&&(B.current.srcObject=j.srcObject)};a();const V=setInterval(a,100);return()=>{clearInterval(V)}},[t,l,j]),z.useEffect(()=>{if(f.current){if(t)$(f.current),m&&(I!=null&&I.srcObject)&&!f.current.srcObject&&(f.current.srcObject=I.srcObject);else{const a=I,V=a==null?void 0:a.srcObject,r=f.current;w(r),V&&r&&!r.srcObject&&(r.srcObject=V,a&&a!==r&&$(a))}return()=>{f.current&&t&&(f.current.srcObject=null)}}},[$,t,w,m,I]),z.useEffect(()=>{if(!t||!f.current)return;const a=()=>{var r;m&&(I!=null&&I.srcObject)&&!((r=f.current)!=null&&r.srcObject)&&f.current&&(f.current.srcObject=I.srcObject)};a();const V=setInterval(a,100);return()=>{clearInterval(V)}},[t,m,I]),e.jsxs("div",{className:v.fixedChild,onClick:i,style:{cursor:i?"pointer":void 0,...n},children:[(d||y)&&e.jsx(Uo,{sessionStore:o}),!y&&d&&l&&e.jsxs("div",{className:v.videoOverlay,children:[e.jsx(N,{variant:"h3",sx:{color:"white"},children:d.name}),d.tagline&&e.jsx(N,{variant:"h4",children:d.tagline}),d.location&&e.jsxs(N,{variant:"h6",className:v.location,children:[e.jsx(vt,{className:v.locationIcon}),d.location]})]}),e.jsxs(Zt,{className:v.videoContainer,ref:A,children:[d&&!l&&e.jsxs("div",{className:v.preVideo,children:[e.jsx(Jt,{variant:"square",src:R,className:v.avatar}),e.jsx(N,{color:"white",fontWeight:"bold",className:v.avatarName,textAlign:"center",children:d.name}),e.jsx(N,{color:"white",className:v.avatarTagline,fontSize:11,textAlign:"center",children:d.tagline}),e.jsxs(N,{color:"white",className:v.avatarTagline,fontSize:11,textAlign:"center",style:{display:"flex",alignItems:"center",fontSize:11},children:[e.jsx(vt,{style:{fontSize:11}}),d.location]})]}),e.jsx("video",{ref:k,className:S(v.videoFeed,v.primaryVideoFeed),autoPlay:!0,playsInline:!0,muted:!0,controls:b}),e.jsxs("div",{className:v.secondaryVideoFeedContainer,children:[e.jsx(N,{color:"white",fontWeight:"bold",children:"You"}),e.jsx("video",{ref:F,className:S(v.videoFeed,v.secondaryVideoFeed),autoPlay:!0,playsInline:!0,muted:!0,controls:b})]})]}),e.jsx(Xo,{anchorRef:A,userNotificationMessage:p,setUserNotificationMessage:u})]})};Rt.displayName=`WarmlyVideoPanel-v${Xt}`;const ee=rt(Rt);export{Rt as WarmlyVideoPanel,ee as default};
